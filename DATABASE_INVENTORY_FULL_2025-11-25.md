# FULL DATABASE INVENTORY REPORT
**Database:** postgres @ 127.0.0.1:54322
**Timestamp:** 2025-11-25
**Generated by:** STIG (System for Technical Implementation & Governance)
**Scope:** Complete database structure, metadata, constraints, and anomalies

---

## EXECUTIVE SUMMARY

**Total Schemas:** 24
**Total Tables:** 178
**Total Data Rows (actual):** ~750 rows across all user tables
**Total Storage Size:** ~7.8 MB (including indexes)
**Database Status:** **SKELETON INFRASTRUCTURE - MINIMALLY POPULATED**

**CRITICAL FINDINGS:**
- ✅ Core infrastructure schemas exist (fhq_*, vision_*, vega)
- ❌ **ADR registry is EMPTY** (0 constitutional documents registered)
- ❌ **Agent keys infrastructure is EMPTY** (0 Ed25519 keys)
- ❌ **Data ingestion logs are EMPTY** despite 720 OHLCV records existing
- ❌ **Reconciliation infrastructure is ABSENT** (no snapshots, no tolerance rules)
- ⚠️  **144 tables have ZERO rows** (81% of all tables are empty)

---

## 1. SCHEMA INVENTORY

### 1.1 FHQ Core Schemas

| Schema | Tables | Purpose | Status |
|--------|--------|---------|--------|
| **fhq_data** | 9 | OHLCV, indicators, corporate actions | MINIMAL (only price_series has data: 720 rows) |
| **fhq_governance** | 8 | Executive roles, contracts, actions log | ACTIVE (7 roles, 131 governance actions, 1 canonical evidence) |
| **fhq_meta** | 50 | ADR registry, function registry, agent keys, validation | SKELETON (mostly empty, 10 vega attestations, 3 functions registered) |
| **fhq_monitoring** | 21 | Ingestion logs, execution logs, validation | EMPTY (0 logs despite active system) |
| **fhq_research** | 20 | Backtests, HMM models, regime predictions | EMPTY (no research data) |
| **fhq_phase3** | 1 | CDS weight locks | ACTIVE (1 canonical weight lock) |

### 1.2 Vision-IoS Schemas

| Schema | Tables | Purpose | Status |
|--------|--------|---------|--------|
| **vision_core** | 7 | Economic safety, execution state, live mode | EMPTY |
| **vision_signals** | 2 | Alpha signals, signal baseline | EMPTY |
| **vision_autonomy** | 2 | Governance decisions, meta-state sync | EMPTY |
| **vision_verification** | 2 | Hash chains, operation signatures | EMPTY |
| **vision_validation** | 0 | ⚠️ **SCHEMA EXISTS BUT HAS NO TABLES** | ORPHAN |

### 1.3 VEGA (Economic Safety Layer)

| Schema | Tables | Purpose | Status |
|--------|--------|---------|--------|
| **vega** | 6 | LLM rate/cost/execution limits, usage log, violations | EMPTY (infrastructure exists, no usage data) |

### 1.4 Supabase Infrastructure Schemas

| Schema | Tables | Purpose | Status |
|--------|--------|---------|--------|
| **auth** | 18 | Authentication, sessions, MFA | EMPTY (auth infrastructure ready, no users) |
| **storage** | 9 | Object storage, buckets, S3 multipart | EMPTY |
| **realtime** | 9 | Realtime subscriptions, message partitions | EMPTY (6 daily partitions) |
| **vault** | 1 | Secrets management | EMPTY |
| **net** | 2 | HTTP requests/responses | EMPTY |
| **supabase_functions** | 2 | Edge functions, hooks | EMPTY |
| **_realtime** | 3 | Realtime extensions, tenants | EMPTY |

### 1.5 System/Extension Schemas

| Schema | Tables | Purpose | Status |
|--------|--------|---------|--------|
| **extensions** | 2 | pg_stat_statements (performance monitoring) | ACTIVE (view) |
| **graphql** | 0 | GraphQL schema | EMPTY |
| **graphql_public** | 0 | Public GraphQL | EMPTY |
| **pgbouncer** | 0 | Connection pooler | EMPTY |
| **public** | 0 | Default public schema | EMPTY |

---

## 2. TABLE INVENTORY BY SCHEMA

### 2.1 fhq_data (9 tables)

| Table | Rows | Size | Primary Key | Purpose |
|-------|------|------|-------------|---------|
| price_series | 720 | 131 KB | NO ❌ | OHLCV data (BTCUSD, 30 days) |
| adjustment_factors | 0 | 8 KB | listing_id + effective_date | Cumulative adjustment factors |
| cash_dividends | 0 | 8 KB | dividend_id | Dividend events |
| corporate_actions | 0 | 8 KB | action_id | Splits, mergers, etc. |
| data_quality_metrics | 0 | 8 KB | metric_id | DQ scoring per vendor |
| fibonacci_levels | 0 | 8 KB | listing_id + analysis_date | Fib retracements |
| indicators | 0 | 8 KB | NO ❌ | Technical indicators |
| macro_indicators | 0 | 8 KB | NO ❌ | FRED macro data |
| price_anomalies | 0 | 8 KB | NO ❌ | Outlier detection |

**ANOMALY:** `price_series` has NO primary key despite 720 rows.

### 2.2 fhq_governance (8 tables)

| Table | Rows | Size | Primary Key | Purpose |
|-------|------|------|-------------|---------|
| executive_roles | 7 | 32 KB | role_id | LARS, STIG, LINE, FINN, VEGA, CODE, CEO |
| task_registry | 5 | 147 KB | task_id | Registered tasks (4 approved, 1 pending) |
| governance_actions_log | 131 | 172 KB | action_id | All governance actions (orchestrator cycles, function executions) |
| production_monitoring | 3 | 32 KB | monitoring_id | VEGA weekly attestation, ADR-012 cost tracking, signature verification |
| model_provider_policy | 5 | 81 KB | policy_id | LLM provider policies per agent |
| canonical_evidence | 1 | 114 KB | evidence_id | Gold baseline (Cycle-1: 75c6040e1e25f939) |
| governance_state | 1 | 32 KB | governance_id | PHASE_2_PRODUCTION_READY, architecture freeze |
| agent_contracts | 0 | 40 KB | contract_id | Agent employment contracts |

### 2.3 fhq_meta (50 tables) - KEY TABLES ONLY

| Table | Rows | Size | Primary Key | Status |
|-------|------|------|-------------|--------|
| **adr_registry** | **0** ❌ | 32 KB | adr_id | **EMPTY - NO ADR DOCUMENTS** |
| **adr_version_history** | **0** ❌ | 32 KB | version_id | **EMPTY** |
| **adr_audit_log** | 1 | 98 KB | audit_id | LINE mandate governance submission |
| **agent_keys** | **0** ❌ | 49 KB | key_id | **EMPTY - NO ED25519 KEYS** |
| **key_archival_log** | **0** ❌ | 40 KB | archival_id | **EMPTY** |
| **vega_attestations** | 10 | 114 KB | attestation_id | Pre-live validation (1 APPROVED, 9 BLOCKED) |
| **function_registry** | 3 | 131 KB | registry_id | 3 Vision-IoS functions registered |
| **data_source_registry** | **0** ❌ | 8 KB | NO PK | **EMPTY - NO DATA SOURCES REGISTERED** |
| **model_registry** | **0** ❌ | 8 KB | NO PK | **EMPTY** |
| **baseline_state** | **0** ❌ | 8 KB | NO PK | **EMPTY - NO RECONCILIATION** |
| **baseline_history** | **0** ❌ | 8 KB | NO PK | **EMPTY** |
| **gate_registry** | **0** ❌ | 8 KB | NO PK | **EMPTY** |
| **gate_status** | **0** ❌ | 8 KB | NO PK | **EMPTY** |
| **pipeline_runs** | **0** ❌ | 8 KB | NO PK | **EMPTY** |
| **validation_checks** | **0** ❌ | 8 KB | NO PK | **EMPTY** |
| **validation_reports** | **0** ❌ | 8 KB | NO PK | **EMPTY** |

**All other fhq_meta tables (instruments, listings, tickers, exchanges, countries, sectors, etc.) = 0 rows**

### 2.4 fhq_monitoring (21 tables) - ALL EMPTY ❌

| Table | Rows | Size | Primary Key |
|-------|------|------|-------------|
| ingestion_log | 0 | 8 KB | NO PK |
| execution_log | 0 | 8 KB | NO PK |
| fhq_audit_log | 0 | 8 KB | NO PK |
| data_lineage | 0 | 8 KB | NO PK |
| data_quality_gates | 0 | 8 KB | NO PK |
| data_quality_issues | 0 | 8 KB | NO PK |
| execution_hash_registry | 0 | 8 KB | NO PK |
| job_queue | 0 | 8 KB | NO PK |
| job_failures | 0 | 8 KB | NO PK |
| model_diagnostics | 0 | 8 KB | NO PK |
| nightly_test_results | 0 | 8 KB | NO PK |
| phase1_3_evidence | 0 | 8 KB | NO PK |
| risk_assessment | 0 | 8 KB | NO PK |
| system_event_log | 0 | 8 KB | NO PK |
| validation_issues | 0 | 8 KB | NO PK |
| validation_results | 0 | 8 KB | NO PK |
| alert_config | 0 | 8 KB | NO PK |
| change_control_index | 0 | 8 KB | NO PK |
| adr_health_history | 0 | 8 KB | NO PK |
| integration_test_log | 0 | 8 KB | NO PK |
| edge_functions | 0 | 8 KB | NO PK |

**CRITICAL:** Despite 131 governance actions and 720 OHLCV ingestions, NO monitoring logs exist.

### 2.5 fhq_research (20 tables) - ALL EMPTY ❌

All backtest, HMM, regime prediction, and strategy signal tables have 0 rows.

### 2.6 fhq_phase3 (1 table)

| Table | Rows | Size | Primary Key | Purpose |
|-------|------|------|-------------|---------|
| cds_weight_locks | 1 | 65 KB | lock_id | G4-LOCK-20251124_220334 (canonical CDS weights) |

### 2.7 vega (6 tables) - ALL EMPTY ❌

| Table | Rows | Size | Primary Key | Purpose |
|-------|------|------|-------------|---------|
| llm_rate_limits | 0 | 98 KB | limit_id | Rate limits per agent/provider |
| llm_cost_limits | 0 | 98 KB | limit_id | Cost ceilings (ADR-012) |
| llm_execution_limits | 0 | 98 KB | limit_id | Execution time limits |
| llm_economic_safety_config | 0 | 65 KB | config_id | Active safety configuration |
| llm_usage_log | 0 | 49 KB | log_id | LLM API call logs |
| llm_violation_events | 0 | 40 KB | violation_id | Safety limit violations |

**ANOMALY:** Economic safety infrastructure exists but has never logged a single LLM call.

### 2.8 Vision-IoS Schemas (13 tables total) - ALL EMPTY ❌

**vision_core (7 tables):**
- economic_safety_gate, execution_state, live_mode_proposals, live_mode_reviews, live_mode_authorizations, live_mode_activations, noise_profile

**vision_signals (2 tables):**
- alpha_signals, signal_baseline

**vision_autonomy (2 tables):**
- governance_decisions, meta_state_sync

**vision_verification (2 tables):**
- hash_chains, operation_signatures

**vision_validation (0 tables):** ⚠️ **SCHEMA EXISTS BUT HAS NO TABLES**

### 2.9 Supabase Infrastructure (39 tables) - ALL EMPTY ❌

**auth schema (18 tables):** users, sessions, identities, mfa_factors, oauth_clients, etc. - all 0 rows
**storage schema (9 tables):** buckets, objects, prefixes, migrations, etc. - all 0 rows
**realtime schema (9 tables):** messages, subscription, schema_migrations, + 6 daily partitions - all 0 rows
**vault, net, supabase_functions:** all empty

---

## 3. PRIMARY KEYS & FOREIGN KEYS

### 3.1 Tables WITHOUT Primary Keys ❌

**CRITICAL OMISSIONS:**
- `fhq_data.price_series` (720 rows, NO PK) ❌
- `fhq_data.indicators` ❌
- `fhq_data.macro_indicators` ❌
- `fhq_data.price_anomalies` ❌
- `fhq_meta.data_source_registry` ❌
- `fhq_meta.baseline_state` ❌
- `fhq_meta.baseline_history` ❌
- All 21 tables in `fhq_monitoring` ❌
- All 20 tables in `fhq_research` have PKs (but 0 rows)

**Total tables without PKs:** ~30 tables (mostly empty)

### 3.2 Foreign Key Relationships

**24 foreign key constraints exist:**

**fhq_governance:**
- `agent_contracts.agent_id` → `executive_roles.role_id`
- `agent_contracts.audit_log_id` → `adr_audit_log.audit_id`
- `model_provider_policy.agent_id` → `executive_roles.role_id`
- `task_registry.vega_attestation_id` → `vega_attestations.attestation_id`

**fhq_meta:**
- `adr_audit_log.adr_id` → `adr_registry.adr_id`
- `adr_audit_log.previous_audit_id` → `adr_audit_log.audit_id` (self-reference chain)
- `adr_registry.superseded_by` → `adr_registry.adr_id` (self-reference)
- `adr_version_history.adr_id` → `adr_registry.adr_id`
- `adr_version_history.audit_log_id` → `adr_audit_log.audit_id`
- `function_registry.task_name` → `task_registry.task_name`
- `key_archival_log.key_id` → `agent_keys.key_id`
- `vega_attestations.governance_log_id` → `governance_actions_log.action_id`

**vega:**
- `llm_rate_limits.agent_id` → `executive_roles.role_id`
- `llm_cost_limits.agent_id` → `executive_roles.role_id`
- `llm_execution_limits.agent_id` → `executive_roles.role_id`

**vision_core:**
- `execution_state.previous_state_id` → `execution_state.state_id` (chain)
- `live_mode_activations.proposal_id` → `live_mode_proposals.proposal_id`
- `live_mode_activations.review_id` → `live_mode_reviews.review_id`
- `live_mode_activations.authorization_id` → `live_mode_authorizations.authorization_id`
- `live_mode_authorizations.proposal_id` → `live_mode_proposals.proposal_id`
- `live_mode_authorizations.review_id` → `live_mode_reviews.review_id`
- `live_mode_reviews.proposal_id` → `live_mode_proposals.proposal_id`

**vision_signals:**
- `alpha_signals.baseline_id` → `signal_baseline.baseline_id`

**vision_verification:**
- `operation_signatures.previous_signature_id` → `operation_signatures.signature_id` (chain)

---

## 4. INDEXES

**Total Indexes:** 327 indexes across all schemas

**Well-indexed tables:**
- `auth` schema: 72 indexes (comprehensive auth/session indexing)
- `storage` schema: 17 indexes (object storage optimized)
- `fhq_governance`: 19 indexes (governance actions, tasks, evidence)
- `fhq_meta`: 36 indexes (ADR audit, function registry, agent keys, VEGA attestations)
- `vega`: 18 indexes (LLM economic safety)
- Vision-IoS schemas: 42 indexes (verification, autonomy, signals)

**Index Types:**
- Primary key indexes (UNIQUE btree)
- Foreign key indexes (btree)
- Timestamp indexes (btree DESC) for historical queries
- Composite indexes for common query patterns
- Partial indexes (e.g., `WHERE is_canonical = true`)
- Hash indexes for exact lookups (e.g., `one_time_tokens.token_hash`)

---

## 5. TRIGGERS

**Total Triggers:** 8 triggers

| Schema | Table | Trigger | Purpose |
|--------|-------|---------|---------|
| realtime | subscription | tr_check_filters | Validate subscription filters |
| storage | buckets | enforce_bucket_name_length_trigger | Bucket name validation |
| storage | objects | objects_insert_create_prefix | Create prefix hierarchy on insert |
| storage | objects | objects_update_create_prefix | Update prefix hierarchy on rename |
| storage | objects | objects_delete_delete_prefix | Clean up prefix hierarchy on delete |
| storage | objects | update_objects_updated_at | Auto-update `updated_at` column |
| storage | prefixes | prefixes_create_hierarchy | Maintain prefix hierarchy |
| storage | prefixes | prefixes_delete_hierarchy | Clean up prefix cascade |

**OBSERVATION:** NO triggers exist on FHQ or Vision-IoS tables. All governance/validation logic is application-level, not database-enforced.

---

## 6. ANOMALIES & STRUCTURAL ISSUES

### 6.1 CRITICAL ANOMALIES ❌

1. **ADR Registry is EMPTY**
   - `fhq_meta.adr_registry`: 0 rows
   - Constitutional documents (ADR-001 to ADR-015) exist in filesystem but NOT in database
   - **Impact:** Governance framework is not database-registered

2. **Ed25519 Key Infrastructure is HOLLOW**
   - `fhq_meta.agent_keys`: 0 rows
   - `fhq_meta.key_archival_log`: 0 rows
   - All VEGA attestations use "STUB_SIGNATURE" (not real signatures)
   - **Impact:** No cryptographic verification capability

3. **Data Source Registry is EMPTY**
   - `fhq_meta.data_source_registry`: 0 rows
   - Despite 720 OHLCV records from "INGEST" vendor
   - No registration of Binance, Alpaca, Yahoo Finance, FRED
   - **Impact:** No vendor accountability or data lineage

4. **Reconciliation Infrastructure is ABSENT**
   - `fhq_meta.baseline_state`: 0 rows
   - `fhq_meta.baseline_history`: 0 rows
   - No reconciliation snapshots, tolerance rules, or field weights
   - **Impact:** No cross-source data validation

5. **Monitoring is NOT OPERATIONAL**
   - All 21 `fhq_monitoring` tables are EMPTY (0 rows)
   - `ingestion_log`, `execution_log`, `fhq_audit_log` = 0 despite active system
   - **Impact:** No audit trail, no observability

6. **VEGA Economic Safety Layer is UNUSED**
   - All 6 `vega` schema tables are EMPTY (0 rows)
   - No LLM usage logs, no rate/cost limit records, no violations
   - ADR-012 safety infrastructure exists but never invoked
   - **Impact:** Economic safety is not enforced or monitored

7. **Price Series Table has NO Primary Key**
   - `fhq_data.price_series`: 720 rows, NO PRIMARY KEY
   - Potential for duplicate OHLCV bars
   - **Impact:** Data integrity risk

### 6.2 MODERATE ANOMALIES ⚠️

8. **Gate Infrastructure is EMPTY**
   - `fhq_meta.gate_registry`: 0 rows
   - `fhq_meta.gate_status`: 0 rows
   - Gates (G0-G4) mentioned in governance logs but not registered
   - **Impact:** Gate framework is conceptual, not enforced

9. **Pipeline Tracking is ABSENT**
   - `fhq_meta.pipeline_runs`: 0 rows
   - No orchestrator cycle history persisted
   - **Impact:** No historical run data for debugging

10. **Validation Infrastructure is EMPTY**
    - `fhq_meta.validation_checks`: 0 rows
    - `fhq_meta.validation_reports`: 0 rows
    - **Impact:** No formal validation enforcement

11. **All Research Tables are EMPTY**
    - 20 tables in `fhq_research` schema: 0 rows
    - No backtest results, HMM models, regime predictions
    - **Impact:** No research/strategy development data

12. **All Vision-IoS Tables are EMPTY**
    - 13 tables across `vision_*` schemas: 0 rows
    - Alpha signals, noise profiles, live mode proposals all missing
    - **Impact:** Vision-IoS is structurally ready but not operationally active

### 6.3 MINOR ANOMALIES ℹ️

13. **Orphan Schema: vision_validation**
    - Schema exists but contains 0 tables
    - **Impact:** Dead schema, should be dropped or populated

14. **Temporary/Staging Tables**
    - `fhq_research.temp_regime_baseline` (0 rows)
    - `fhq_research.temp_strategy_signals` (0 rows)
    - `fhq_research.regime_predictions_staging` (0 rows)
    - **Impact:** Staging tables exist but never used

15. **Realtime Message Partitions**
    - 6 daily partitions: `messages_2025_11_22` through `messages_2025_11_27`
    - All EMPTY (0 rows)
    - **Impact:** Partitioning overhead for unused feature

16. **Supabase Infrastructure Unused**
    - 39 tables across auth/storage/realtime/vault/net schemas
    - ALL EMPTY (0 rows)
    - **Impact:** Full Supabase stack deployed but not utilized

### 6.4 POSITIVE OBSERVATIONS ✅

17. **Core Governance is OPERATIONAL**
    - 7 executive roles defined (LARS, STIG, LINE, FINN, VEGA, CODE, CEO)
    - 131 governance actions logged
    - 1 canonical evidence record (Gold Baseline)
    - Production monitoring policies in place

18. **Function Registry is ACTIVE**
    - 3 Vision-IoS functions registered and hash-verified
    - Task registry has 5 tasks (4 approved, 1 pending)

19. **VEGA Attestations are LOGGED**
    - 10 pre-live validation attestations
    - 1 APPROVED for LIVE MODE (2025-11-23)

20. **CDS Weight Lock is CANONICAL**
    - 1 weight lock (G4-LOCK-20251124_220334) with CEO authorization

21. **OHLCV Data Exists**
    - 720 BTCUSD candles (30 days: 2025-10-24 to 2025-11-23)
    - Vendor: "INGEST"

---

## 7. LARGEST TABLES (by total size)

| Table | Schema | Total Size | Rows | Data/Index Ratio |
|-------|--------|------------|------|------------------|
| governance_actions_log | fhq_governance | 172 KB | 131 | 57 KB / 81 KB |
| vision_verification.operation_signatures | vision_verification | 163 KB | 0 | 49 KB / 81 KB |
| task_registry | fhq_governance | 147 KB | 5 | 16 KB / 98 KB |
| price_series | fhq_data | 131 KB | 720 | 98 KB / 0 KB (NO INDEXES ❌) |
| function_registry | fhq_meta | 131 KB | 3 | 8 KB / 114 KB |
| canonical_evidence | fhq_governance | 114 KB | 1 | 8 KB / 81 KB |
| vega_attestations | fhq_meta | 114 KB | 10 | 8 KB / 98 KB |
| users | auth | 98 KB | 0 | 0 KB / 90 KB (empty but indexed) |
| adr_audit_log | fhq_meta | 98 KB | 1 | 8 KB / 81 KB |

**OBSERVATION:** Most large tables are over-indexed relative to data volume (indexes > data).

---

## 8. EMPTY TABLE SUMMARY

**144 out of 178 tables (81%) have ZERO rows:**

- **fhq_data:** 8 out of 9 tables empty (only price_series has data)
- **fhq_monitoring:** 21 out of 21 tables empty (100%)
- **fhq_research:** 20 out of 20 tables empty (100%)
- **fhq_meta:** 43 out of 50 tables empty (86%)
- **vega:** 6 out of 6 tables empty (100%)
- **vision_*:** 13 out of 13 tables empty (100%)
- **auth:** 18 out of 18 tables empty (100%)
- **storage:** 9 out of 9 tables empty (100%)
- **realtime:** 9 out of 9 tables empty (100%)
- **vault, net, supabase_functions:** all empty

**Tables with data (34 total):**
1. fhq_data.price_series (720 rows)
2. fhq_governance.executive_roles (7 rows)
3. fhq_governance.task_registry (5 rows)
4. fhq_governance.governance_actions_log (131 rows)
5. fhq_governance.production_monitoring (3 rows)
6. fhq_governance.model_provider_policy (5 rows)
7. fhq_governance.canonical_evidence (1 row)
8. fhq_governance.governance_state (1 row)
9. fhq_meta.adr_audit_log (1 row)
10. fhq_meta.vega_attestations (10 rows)
11. fhq_meta.function_registry (3 rows)
12. fhq_phase3.cds_weight_locks (1 row)
13. Plus 22 Supabase schema_migrations tables (1 row each)

**Total data rows:** ~900 rows (including schema metadata)

---

## 9. MISSING EXPECTED TABLES

**Based on governance documents and ADR references, these tables are EXPECTED but MISSING:**

1. **reconciliation_snapshots** (mentioned in ADR-010, does not exist)
2. **reconciliation_evidence** (mentioned in ADR-010, does not exist)
3. **reconciliation_field_weights** (mentioned in ADR-010, does not exist)
4. **model_certifications** (mentioned in ADR-012, does not exist)
5. **vega_sovereignty_log** (implied by VEGA governance role, does not exist)
6. **data_lineage_log** (mentioned in ADR specs, does not exist)
7. **role_prompts** (expected in fhq_governance, does not exist)
8. **authority_matrix** (expected in fhq_governance, does not exist)
9. **agent_suspension_requests** (expected in fhq_governance, does not exist)

---

## 10. JSON INVENTORY SUMMARY

```json
{
  "database": "postgres @ 127.0.0.1:54322",
  "timestamp": "2025-11-25",
  "generated_by": "STIG",
  "summary": {
    "total_schemas": 24,
    "total_tables": 178,
    "total_rows_estimated": 900,
    "total_storage_mb": 7.8,
    "tables_with_data": 34,
    "empty_tables": 144,
    "empty_table_percentage": 81,
    "tables_without_primary_keys": 30,
    "total_foreign_keys": 24,
    "total_indexes": 327,
    "total_triggers": 8
  },
  "schemas": {
    "fhq_data": {
      "tables": 9,
      "rows": 720,
      "purpose": "OHLCV, indicators, corporate actions",
      "status": "MINIMAL",
      "largest_table": "price_series (720 rows, 131 KB)"
    },
    "fhq_governance": {
      "tables": 8,
      "rows": 153,
      "purpose": "Executive roles, contracts, actions log",
      "status": "ACTIVE",
      "largest_table": "governance_actions_log (131 rows, 172 KB)"
    },
    "fhq_meta": {
      "tables": 50,
      "rows": 14,
      "purpose": "ADR registry, function registry, agent keys",
      "status": "SKELETON",
      "largest_table": "vega_attestations (10 rows, 114 KB)"
    },
    "fhq_monitoring": {
      "tables": 21,
      "rows": 0,
      "purpose": "Ingestion logs, execution logs, validation",
      "status": "EMPTY",
      "critical_issue": "NO MONITORING DESPITE ACTIVE SYSTEM"
    },
    "fhq_research": {
      "tables": 20,
      "rows": 0,
      "purpose": "Backtests, HMM models, regime predictions",
      "status": "EMPTY"
    },
    "fhq_phase3": {
      "tables": 1,
      "rows": 1,
      "purpose": "CDS weight locks",
      "status": "ACTIVE"
    },
    "vega": {
      "tables": 6,
      "rows": 0,
      "purpose": "LLM economic safety (ADR-012)",
      "status": "EMPTY",
      "critical_issue": "ECONOMIC SAFETY LAYER NOT OPERATIONAL"
    },
    "vision_core": {
      "tables": 7,
      "rows": 0,
      "purpose": "Economic safety, execution state, live mode",
      "status": "EMPTY"
    },
    "vision_signals": {
      "tables": 2,
      "rows": 0,
      "purpose": "Alpha signals, signal baseline",
      "status": "EMPTY"
    },
    "vision_autonomy": {
      "tables": 2,
      "rows": 0,
      "purpose": "Governance decisions, meta-state sync",
      "status": "EMPTY"
    },
    "vision_verification": {
      "tables": 2,
      "rows": 0,
      "purpose": "Hash chains, operation signatures",
      "status": "EMPTY"
    },
    "vision_validation": {
      "tables": 0,
      "rows": 0,
      "purpose": "UNKNOWN",
      "status": "ORPHAN SCHEMA"
    },
    "auth": {
      "tables": 18,
      "rows": 0,
      "purpose": "Authentication, sessions, MFA",
      "status": "EMPTY"
    },
    "storage": {
      "tables": 9,
      "rows": 0,
      "purpose": "Object storage, buckets",
      "status": "EMPTY"
    },
    "realtime": {
      "tables": 9,
      "rows": 0,
      "purpose": "Realtime subscriptions, messages",
      "status": "EMPTY"
    },
    "_realtime": {
      "tables": 3,
      "rows": 0,
      "purpose": "Realtime extensions, tenants",
      "status": "EMPTY"
    },
    "vault": {
      "tables": 1,
      "rows": 0,
      "purpose": "Secrets management",
      "status": "EMPTY"
    },
    "net": {
      "tables": 2,
      "rows": 0,
      "purpose": "HTTP requests/responses",
      "status": "EMPTY"
    },
    "supabase_functions": {
      "tables": 2,
      "rows": 0,
      "purpose": "Edge functions, hooks",
      "status": "EMPTY"
    },
    "extensions": {
      "tables": 2,
      "rows": 0,
      "purpose": "pg_stat_statements (view)",
      "status": "ACTIVE"
    },
    "graphql": {
      "tables": 0,
      "rows": 0,
      "purpose": "GraphQL schema",
      "status": "EMPTY"
    },
    "graphql_public": {
      "tables": 0,
      "rows": 0,
      "purpose": "Public GraphQL",
      "status": "EMPTY"
    },
    "pgbouncer": {
      "tables": 0,
      "rows": 0,
      "purpose": "Connection pooler",
      "status": "EMPTY"
    },
    "public": {
      "tables": 0,
      "rows": 0,
      "purpose": "Default public schema",
      "status": "EMPTY"
    }
  },
  "anomalies": [
    {
      "severity": "CRITICAL",
      "category": "GOVERNANCE",
      "issue": "ADR registry is EMPTY (0 constitutional documents)",
      "impact": "Constitution not database-registered",
      "table": "fhq_meta.adr_registry"
    },
    {
      "severity": "CRITICAL",
      "category": "SECURITY",
      "issue": "Ed25519 key infrastructure is HOLLOW (0 keys)",
      "impact": "No cryptographic verification capability",
      "table": "fhq_meta.agent_keys"
    },
    {
      "severity": "CRITICAL",
      "category": "DATA_GOVERNANCE",
      "issue": "Data source registry is EMPTY",
      "impact": "No vendor accountability",
      "table": "fhq_meta.data_source_registry"
    },
    {
      "severity": "CRITICAL",
      "category": "DATA_QUALITY",
      "issue": "Reconciliation infrastructure is ABSENT",
      "impact": "No cross-source validation",
      "tables": ["fhq_meta.baseline_state", "fhq_meta.baseline_history"]
    },
    {
      "severity": "CRITICAL",
      "category": "OBSERVABILITY",
      "issue": "ALL monitoring tables are EMPTY (21 tables)",
      "impact": "No audit trail, no observability",
      "schema": "fhq_monitoring"
    },
    {
      "severity": "CRITICAL",
      "category": "ECONOMIC_SAFETY",
      "issue": "VEGA economic safety layer is UNUSED",
      "impact": "ADR-012 not enforced",
      "schema": "vega"
    },
    {
      "severity": "HIGH",
      "category": "DATA_INTEGRITY",
      "issue": "price_series table has NO primary key (720 rows)",
      "impact": "Potential duplicate OHLCV bars",
      "table": "fhq_data.price_series"
    },
    {
      "severity": "MEDIUM",
      "category": "GOVERNANCE",
      "issue": "Gate infrastructure is EMPTY",
      "impact": "Gates not enforced",
      "tables": ["fhq_meta.gate_registry", "fhq_meta.gate_status"]
    },
    {
      "severity": "LOW",
      "category": "SCHEMA_HEALTH",
      "issue": "Orphan schema: vision_validation (0 tables)",
      "impact": "Dead schema",
      "schema": "vision_validation"
    }
  ],
  "missing_expected_tables": [
    "reconciliation_snapshots",
    "reconciliation_evidence",
    "reconciliation_field_weights",
    "model_certifications",
    "vega_sovereignty_log",
    "data_lineage_log",
    "role_prompts",
    "authority_matrix",
    "agent_suspension_requests"
  ],
  "largest_tables": [
    {
      "table": "fhq_governance.governance_actions_log",
      "size_kb": 168,
      "rows": 131
    },
    {
      "table": "vision_verification.operation_signatures",
      "size_kb": 160,
      "rows": 0
    },
    {
      "table": "fhq_governance.task_registry",
      "size_kb": 144,
      "rows": 5
    },
    {
      "table": "fhq_data.price_series",
      "size_kb": 128,
      "rows": 720
    },
    {
      "table": "fhq_meta.function_registry",
      "size_kb": 128,
      "rows": 3
    }
  ]
}
```

---

## 11. RECOMMENDATIONS

### 11.1 IMMEDIATE ACTIONS (CRITICAL)

1. **Ingest ADR documents into adr_registry**
   - Run ADR ingestion script to populate `fhq_meta.adr_registry`
   - Register ADR-001 through ADR-015

2. **Implement Ed25519 key infrastructure**
   - Generate Ed25519 keypairs for all 7 executive agents
   - Insert into `fhq_meta.agent_keys`
   - Replace "STUB_SIGNATURE" with real cryptographic signatures

3. **Add PRIMARY KEY to price_series**
   - Define composite PK: `(listing_id, timestamp, vendor_id, frequency)`
   - Prevents duplicate OHLCV bars

4. **Populate data_source_registry**
   - Register Binance, Alpaca, Yahoo Finance, FRED
   - Link to vendor_id in price_series

5. **Activate monitoring infrastructure**
   - Enable logging in all `fhq_monitoring` tables
   - Log ingestion events, execution events, audit trail

### 11.2 HIGH PRIORITY

6. **Build reconciliation framework**
   - Implement baseline snapshots in `fhq_meta.baseline_state`
   - Define tolerance rules
   - Create reconciliation weights

7. **Activate VEGA economic safety layer**
   - Populate `vega.llm_economic_safety_config`
   - Start logging LLM usage in `vega.llm_usage_log`
   - Enforce ADR-012 cost ceilings

8. **Register gates in gate_registry**
   - Define G0 through G4 gates
   - Track gate status in `gate_status`

### 11.3 MEDIUM PRIORITY

9. **Populate Vision-IoS infrastructure**
   - Generate noise profiles
   - Create signal baselines
   - Enable live mode proposals/reviews

10. **Clean up orphan schema**
    - Drop `vision_validation` schema OR populate with tables

11. **Optimize empty tables**
    - Consider dropping unused Supabase tables (auth, storage, realtime) if not planned
    - Drop temp/staging tables if not in use

---

## 12. CONCLUSION

**Database Status: SKELETON INFRASTRUCTURE WITH CRITICAL GAPS**

The database at postgres @ 127.0.0.1:54322 represents a **well-architected but minimally populated foundation**. Core governance (executive roles, task registry, governance actions) is operational, but critical subsystems remain empty:

✅ **OPERATIONAL:**
- Governance framework (7 roles, 131 actions, 1 canonical evidence)
- Function registry (3 functions)
- CDS weight lock (1 canonical lock)
- OHLCV data (720 rows, 30 days)

❌ **CRITICAL GAPS:**
- ADR registry (0 documents)
- Ed25519 key infrastructure (0 keys)
- Data source registry (0 sources)
- Reconciliation infrastructure (absent)
- Monitoring (0 logs)
- Economic safety layer (unused)

**Next Steps:**
1. Ingest ADR documents
2. Generate Ed25519 keys
3. Fix price_series primary key
4. Activate monitoring
5. Build reconciliation framework

**Assessment:** Database is **PRODUCTION-READY IN STRUCTURE**, but **NOT PRODUCTION-READY IN CONTENT**. Infrastructure exists; data ingestion and validation pipelines need activation.

---

**END OF REPORT**

*Generated by STIG (System for Technical Implementation & Governance)*
*Report ID: DB-INV-2025-11-25-FULL*
*Authority: CTO Technical Audit Directive*
