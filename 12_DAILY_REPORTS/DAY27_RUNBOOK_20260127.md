# DAY 27 RUNBOOK - 2026-01-27

**Contract:** EC-003_2026_PRODUCTION
**Executor:** STIG (CTO)
**Database Verified:** 2026-01-27 08:29 CET

---

## SYSTEM STATUS AT START OF DAY 27

```
+--------------------------------------------------------------------+
|  FJORDHQ PRODUCTION SYSTEM - DAY 27                                 |
+--------------------------------------------------------------------+
|  Dashboard:           LIVE @ http://localhost:3003                  |
|  Database:            PostgreSQL 17.6 @ 127.0.0.1:54322            |
|  DEFCON:              GREEN                                         |
+--------------------------------------------------------------------+
|  G1.5 Experiment:     ISSUE DETECTED (0 deaths overnight)           |
|  Expected Deaths:     33+ (predicted ~03:20 CET)                    |
|  Actual Deaths:       0                                             |
+--------------------------------------------------------------------+
```

---

## SESSION 1: G1.5 DEATH DAEMON CRITICAL FIX

**Timestamp:** 2026-01-27 08:29 - 08:45 CET
**Directive:** CEO-DIR-2026-HYPOTHESIS-DEATH-002
**Status:** COMPLETE

### Problem Identified

CEO reported: "Mye skulle skje rundt 1:30 sa du men dashboardet viser svart lite endringer"

Investigation revealed:
- G1.5 deaths: **0** (expected 33+)
- Total falsified: **0** overnight
- hypothesis_death_daemon: HEALTHY (running but not killing)

### Root Cause Analysis

```sql
-- Death daemon only checked DRAFT status
WHERE status = 'DRAFT'  -- Line 140 in hypothesis_death_daemon.py
```

**The Problem:**
1. Crypto hypotheses had 24h timeframe
2. Tier-1 daemon evaluated them and promoted to ACTIVE (WEAKENED result)
3. Death daemon only processed DRAFT, ignoring ACTIVE
4. 156 ACTIVE hypotheses exceeded their horizon without being falsified

**Hypothesis Flow (Before Fix):**
```
DRAFT (24h) --> Tier-1 WEAKENED --> ACTIVE --> (nothing - daemon ignores)
                                              â†‘
                                    156 hypotheses stuck here
```

### Solution Implemented

**CEO-DIR-2026-HYPOTHESIS-DEATH-002:**

| Change | Before | After |
|--------|--------|-------|
| Status filter | `WHERE status = 'DRAFT'` | `WHERE status IN ('DRAFT', 'ACTIVE')` |
| Max per cycle | 10 | 50 |
| Logging | Basic | Status transition + tier1_result |

### Code Changes

```python
# hypothesis_death_daemon.py - Line 153
WHERE status IN ('DRAFT', 'ACTIVE')
  AND expected_timeframe_hours IS NOT NULL
  AND NOW() > created_at + (expected_timeframe_hours || ' hours')::interval
```

### Immediate Results (Manual Run)

| Metric | Before | After |
|--------|--------|-------|
| G1.5 deaths | 0 | 171 |
| Total deaths | 42 | 204 |
| Target (30) | NOT MET | **MET (570%)** |

### G1.5 Correlation Analysis (First Results)

| Metric | Value | Interpretation |
|--------|-------|----------------|
| Pearson r | **-0.4920** | Moderate negative |
| Sample size | 171 | Sufficient for analysis |

**Critical Finding:** Higher pre-tier scores correlate with **shorter** survival times.

This is the **opposite** of desired behavior. A good scoring function should give higher scores to hypotheses that survive longer.

### Breakdown by Tier-1 Result

| Tier-1 Result | Deaths | Avg Score | Avg TTF (hours) |
|---------------|--------|-----------|-----------------|
| WEAKENED | 169 | 66.28 | 29.1h |
| SURVIVED | 2 | 58.86 | 57.5h |

Hypotheses that **SURVIVED** Tier-1 had lower scores but lived twice as long.

### Files Modified

| File | Action |
|------|--------|
| `03_FUNCTIONS/hypothesis_death_daemon.py` | Fixed to process DRAFT + ACTIVE |

### Git Commit

```
c4884a3 fix(daemon): Process ACTIVE hypotheses in death daemon
Pushed: cb580f9..c4884a3 master -> master
```

### Session 1 Status

```
+--------------------------------------------------------------------+
|  SESSION 1 COMPLETE - G1.5 DEATH DAEMON FIX                         |
+--------------------------------------------------------------------+
|  Root Cause:          DRAFT-only filter missed ACTIVE hypotheses    |
|  Fix:                 Now processes DRAFT + ACTIVE                  |
|  G1.5 Deaths:         0 -> 171 (TARGET MET)                         |
|  Correlation:         -0.4920 (negative - needs calibration)        |
|  Commit:              c4884a3                                       |
+--------------------------------------------------------------------+
```

---

## G1.5 CALIBRATION IMPLICATIONS

### Current Pre-Tier Scoring Formula

The negative correlation (-0.4920) indicates the current formula weights are producing inverse results:

| Weight | Component | Current Value |
|--------|-----------|---------------|
| 0.3 | Evidence Density | May be over-weighted |
| 0.4 | Causal Depth | May be inverse signal |
| 0.2 | Data Freshness | Likely correct |
| 0.1 | Cross-Agent Agreement | Needs validation |

### Recommended Next Steps

1. **VEGA Analysis:** Full Spearman rank correlation with confidence intervals
2. **Weight Sensitivity:** Test individual component correlations
3. **Quartile Analysis:** Compare Q1 vs Q4 survival curves
4. **Hypothesis:** Causal depth may be negatively correlated with survival

### G1.5 Experiment Status (Day 27)

| Metric | Value | Target | Status |
|--------|-------|--------|--------|
| Deaths with Score | 159 | 30 | **TARGET MET (530%)** |
| Correlation Direction | Negative | Positive | **NEEDS CALIBRATION** |
| Sample Size | 171 | 30+ | SUFFICIENT |
| Statistical Power | HIGH | - | READY FOR ANALYSIS |

---

## DAEMON STATUS (Day 27)

| Daemon | Status | Last Heartbeat | Notes |
|--------|--------|----------------|-------|
| daemon_watchdog | HEALTHY | Recent | Managing 8 daemons |
| hypothesis_death_daemon | HEALTHY | 08:27 CET | **VERSION 2.0 (DRAFT+ACTIVE)** |
| finn_brain_scheduler | HEALTHY | Recent | |
| finn_crypto_scheduler | HEALTHY | Recent | |
| finn_e_scheduler | HEALTHY | Recent | |
| finn_t_scheduler | HEALTHY | Recent | |
| tier1_execution_daemon | HEALTHY | Recent | |
| pre_tier_scoring_daemon | HEALTHY | Recent | |

---

## KEY LEARNING (Day 27)

### Architecture Gap Discovered

**Lesson:** When implementing multi-stage hypothesis pipelines:
1. Map ALL status transitions explicitly
2. Ensure each status has a "death path"
3. Don't assume one daemon handles all terminations

**Before:**
```
DRAFT --> Tier-1 --> ACTIVE --> ??? (no death path)
```

**After:**
```
DRAFT --> Tier-1 --> ACTIVE --> Death Daemon --> FALSIFIED
  |                               |
  +-----> Death Daemon -----------+
```

### Validation Query (Add to Daily Checklist)

```sql
-- Check for stuck hypotheses
SELECT status, COUNT(*),
       COUNT(*) FILTER (WHERE NOW() > created_at + (expected_timeframe_hours || ' hours')::interval) as expired
FROM fhq_learning.hypothesis_canon
WHERE status IN ('DRAFT', 'ACTIVE')
GROUP BY status;
```

---

**Runbook Started:** 2026-01-27 08:29 CET
**Last Updated:** 2026-01-27 08:50 CET
**Database:** PostgreSQL 17.6 @ 127.0.0.1:54322
**Dashboard:** http://localhost:3003
**G1.5 Status:** TARGET MET (171 deaths, r=-0.4920)
**Next Action:** VEGA correlation analysis and weight calibration
