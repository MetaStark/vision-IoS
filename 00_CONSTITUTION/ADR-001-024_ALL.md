# **ADR-001 â€“ SYSTEM CHARTER 2026**

**FjordHQ Market System**
**Version:** 1.0
**Date:** 20 November 2025
**Owner:** CEO
**Approval:** CEO â†’ VEGA (Verify, Encrypt, Governance, Authority) 

---

# **EXECUTIVE SUMMARY**

### 1. What is addressed

This charter establishes FjordHQâ€™s core governance model:
â€“ Executive roles and their authority
â€“ Canonical asset universe
â€“ Ownership of domains, masterdata and tables
â€“ Delegation rules
â€“ Compliance and veto mechanisms (VEGA)
â€“ Amendment and certification structure
â€“ Autonomous execution requirements

This is the first ADR-001 in the chain up to ADR-015. 

### 2. FjordHQâ€™s permanent constitutional framework

â€“ Zero ambiguity in responsibilities
â€“ Prevention of duplicated tables, documents and rules
â€“ A stable foundation for autonomous operation
â€“ A controlled process for future expansion 
â€“ A fully auditable governance chain

### 3. Who follows up, and how

# Boeard of Directors: Integrates ADR-001-ADR-015 references into pipelines that require governance-driven logic.

â€“ **VEGA**: Certifies compliance, activates veto monitoring, and sets up autonomous compliance review jobs 
Verify, Encrypt, Governance, Authority
â€“ **LARS**: Registers roles, authority rules, and charter metadata into Application Layers canonical tables.
Logic, Analytics & Research Strategy
â€“ **LINE**: Ensures charter is loaded into operational policy layer (runtime, nodes, pipelines, application layers).
Local Infrastructure, Network & Execution
â€“ **STIG**: Implements database records, file hashes, and the amendment protocol.
System for Technical Implementation & Governance
â€“ **FINN**: Aligns research models, RAG context, and proactively searching for better strategies metadata to the canonical scope defined here.
Financial, Intelligence, Neural Network
â€“ **ExCODE**: Integrates ADR-001-ADR-015 references into pipelines that require governance-driven logic.

Autonomous follow-up:
â€“ Correct timeframe (1S, 1M, 1H, 6H, 12H, 1D, 1W, 1MONTH) under correct authority
â€“ Hash verification checks under STIG
â€“ Role-registry consistency checks under LINE
â€“ Extensive autonomus research team pipeline scope checks under FINN who analyses, executes and reports

---

# **1. Purpose of This Charter**

ADR-001 defines the constitutional governance framework for FjordHQ.
It establishes:
â€“ Role architecture
â€“ Authority boundaries
â€“ Scope and domain ownership
â€“ Application Layers
â€“ Change-control and certification
â€“ Compliance, veto and audit requirements
â€“ Delegation and amendment processes
â€“ Autonomous execution expectations

ADR-001 *is the birth of all 15 ADRs*.
Every ADR inherits constraints from this document.

---

# **2. CEO Authority**

The CEO is the ultimate human authority.
The CEO:
â€“ Appoints the executive AI roles
â€“ Approves or rejects any ADR or Application Layer
â€“ Defines the long-term strategic mandate
â€“ Receives an executive summary for all approval documents
â€“ Delegates operational execution to the executive ai-team
â€“ May override any decision 

---

# **3. Executive Roles and Mandates**

FjordHQ operates with a fixed executive structure.

These are the executives authorized to make system-level decisions:

### **3.1 LARS â€“ Logic, Analytics & Research Strategy**

AI-Strategic architect (OpenAI API LLM).
Responsible for:
â€“ System design, pro-active future thinking, meta analysing, analytical frameworks, structural integrity
â€“ Cross-domain coordination
â€“ Strategic interpretation of models, strategies, meta governance
â€“ Charter coherence and governance alignment
â€“ Final strategic evaluation before CEO approval
NO HALLUSINATIONS NO GUESSING - ONLY VERIFIABLE FACTS

### **3.2 STIG â€“ System for Technical Implementation & Governance**

AI-Technical authority (Antropic API LLM).
Responsible for:
â€“ Code
â€“ Database schemas, migrations, lineage 
â€“ Canonical table definitions
â€“ Deployment governance
â€“ File hashes, metadata standards
â€“ Compliance with technical constraints
â€“ Keepin database clean - no duplicate schemas or tables
â€“ Executing amendments after VEGA and CEO approval
NO HALLUSINATIONS NO GUESSING - ONLY VERIFIABLE FACTS

### **3.3 LINE â€“ Local Infrastructure, Network & Execution**

AI-Operational command (Gemini API LLM).
Responsible for:
â€“ Runtime, pipelines, uptime, SRE operations
â€“ Container orchestration
â€“ Scheduling, cron-based execution
â€“ Health checks, monitoring, incident handling, API integrations
â€“ Executing the operational side of amendments
NO HALLUSINATIONS NO GUESSING - ONLY VERIFIABLE FACTS

### **3.4 FINN â€“ Financial Investments Neural Network**

AI-Research leader (DeepSeek API LLM).
Responsible for:
â€“ Research, analysis, feature generation, teams of researchers (DeepSeek)
â€“ Knowledge Graph, RAG, research ingestion
â€“ Backtesting and strategy validation
â€“ Translating canonical scope into research models
â€“ Ensuring research aligns with governance
â€“ Emphatic and Anthropomorphism communication based only on facts from database. NO HALLUSINATIONS NO GUESSING - ONLY VERIFIABLE FACTS

### **3.5 VEGA â€“ Verification & Governance Authority**

Compliance, control, and veto power (Antroipic API LLM).
Responsible for:
â€“ All compliance standards (GIPS, SEC-aligned logic, ISO 8000, BCBS239)
â€“ Reviewing every ADR for accuracy
â€“ Approving or rejecting changes
â€“ Enforcing canonical truth
â€“ Blocking changes that violate system rules
â€“ Running continuous compliance audits (autonomous)
â€“ Final sign-off before CEO approval
â€“ Have RAG with all relevant rules and regulations - NO HALLUSINATIONS NO GUESSING - ONLY VERIFIABLE FACTS

**VEGA is the only role with system-wide veto authority.**

### **3.6 CODE â€“ External Engineering Execution Unit**

Execution arm.
Responsible for:
â€“ Pipelines, scripts, integrations
â€“ Implementing STIG/LARS/LINES decisions
â€“ Ensuring technical execution matches governance intent
â€“ No autonomous decision-making authority

---

# **4. Delegation and Subordinate Agents**

Each executive may create subordinate agents to execute within their domain after approval from CEO. Each executive will continuesly meta analyze what AI-employees that will provide added value and proactively propose new employees when added value to the system is available. 

### Rules:

1. Subordinates inherit the authority of their leader but never exceed it.
2. All subordinates must be registered in the canonical database tables:
   â€“ fhq_roles
   â€“ fhq_role_prompts
   â€“ fhq_authority_boundaries
3. VEGA must verify that subordinate roles follow all compliance requirements.
4. Subordinates may be autonomous *within constraints* set by their leader.
5. CEO needs to approve subordinates; STIG registeres and VEGA makes sure we are in compliance.

Examples (not included in ADR-001, but allowed under it):
â€“ FINN-PIA
â€“ LINE-NODDE
â€“ VEGA-AUD
â€“ etc.
All agents will have human names that correspond with their tasks (eg. FINN - Financial Investments Neural Network)

---

# **5. Domain Ownership and Single Sources of Truth**

To eliminate fragmentation, each domain has exactly one system owner:

| Domain                                   | Owner |
| ---------------------------------------- | ----- |
| Canonical tables                         | STIG  |
| Research data, indicators, signals       | FINN  |
| Infrastructure, logs, pipelines          | LINE  |
| Governance, ADRs, compliance             | VEGA  |
| Codebase, scripts, interfaces            | CODE / STIG  |
| Strategy, analytics and system structure | LARS  |

### Rules:

â€“ Each domain must maintain **one and only one** canonical dataset.
â€“ Duplicate tables or schemas for the same purpose must be consolidated.
â€“ Each table must have:
â€“ Authorized owner
â€“ Clear purpose
â€“ Metadata
â€“ Hash verification
â€“ Compliance status

Executives are responsible for their domains.
ADR-001 does not fix historical errors but mandates who must fix them.

---

# **6. Asset Universe**

FHQ is architected for **multi-asset, multi-assetclass** operation.

However, as of **20 November 2025**, the scope is 1 asset to learn 200 datapoints:

### **Active Universe**

| Asset   | Code   |
| ------- | ------ |
| Bitcoin | BTCUSD |

All research, ingestion, signals, indicators, models, pipelines and dashboards must use the  universe unless expanded through a formal amendment. All 200 calculated datapoints for this asset is easily calculated for new added assets.

### **Future Asset Activation**

New assets/classes may be activated only when:

1. FINN confirms research compatibility
2. STIG confirms technical readiness
3. LINE confirms operational feasibility
4. VEGA certifies compliance
5. CEO approves by amending ADR-001 with updated date

No asset is allowed into the system without passing all five steps.

---

# **7. Governance, Compliance & Veto Authority**

### **7.1 VEGAâ€™s Veto**

VEGA may block any change that:
â€“ Violates compliance
â€“ Introduces data quality risk
â€“ Breaks canonical definitions
â€“ Conflicts with ADR-001
â€“ Lacks evidence or fails audit criteria

A veto overrides all roles except the CEO â€” and only if CEO invokes override (recorded in registry with justification).

### **7.2 Certification**

All 15 ADR`s and Application Layer IsO must include:
â€“ File hash
â€“ Approving executive
â€“ VEGA certification
â€“ CEO approval
â€“ Timestamp
â€“ Summary of dependencies impacted

### **7.3 Autonomous Compliance**

VEGA must run autonomous audits through periodically automated jobs:
â€“ File hash drift
â€“ Domain ownership violations
â€“ Duplicate table detection
â€“ Unregistered subordinate agents
â€“ Inconsistent metadata
â€“ Scope drift vs FjordHQ universe

Lineage reports must be produced automatically.

---

# **8. Amendment Procedure**

Only the CEO may initiate amendments to ADR-001.

### Steps:

1. CEO informs the strategic impact analysis
2. STIG audits technical impact
3. LINE audits infrastructure impact
4. FINN audits research impact
5. VEGA performs compliance review
6. VEGA certifies
7. CEO signs final approval
8. STIG implement changes in database 
9. Periodically autonomous checks ensure changes are adhered to

No shortcut process exists.

---

# **9. Interaction With Other ADRs**

It defines the authority hierarchy for all ADR-001 to ADR-015. This is the foundations where the Application Layers will be buildt. 

Each ADR will specify:
â€“ AI-Domain owner
â€“ Scope
â€“ Dependencies
â€“ Compliance requirements
â€“ Autonomous operational checks
â€“ Responsible executive for maintenance

Executives must ensure existing ADRs are aligned with this charter.

---

# **10. Autonomous Operation Requirement**

All processes in FjordHQ must be designed to run autonomously.

Executives must ensure:
â€“ Pipelines restart automatically
â€“ Research refresh cycles operate on agreed schedule without human triggers
â€“ Compliance checks run on schedule
â€“ Amendment logs are maintained automatically
â€“ File hashes are recalculated regularly
â€“ Subordinate agents operate within constraints
â€“ All failures trigger LINE incident escalation

---

# **11. Registration Requirements**

STIG must register ADR-001 in:
â€“ fhq_meta.adr_registry
â€“ fhq_meta.ios_registry
â€“ fhq_meta.adr_audit_log (register ADR- and IsO-hash-chains)
â€“ fhq_governance_roles
â€“ fhq_governance_authority_boundaries
â€“ fhq_governance_model_provider_policy (for role-level provider selection)
â€“ fhq_governance.executive_roles  (VEGA, FINN, STIG, LARS, LINE)
â€“ fhq_governance.agent_contracts - mandate for agents
â€“ fhq_governance.authority_matrix (registrer permitted actions)
â€“ fhq_governance.prompt_success_tracker
â€“ fhq_governance.prompt_history
 

---

# **12. Organizational Masterdata & Governance Tables (Mandatory)

To ensure structural clarity, unambiguous responsibility, and complete auditability, FjordHQ maintains a set of governance tables. These tables form the constitutional backbone of the organizational model and are mandatory for all operations.

Each table is a single source of truth, owned by the executive role defined below, and subject to VEGA compliance oversight.

12.1 Executive Roles Registry (fhq_governance.executive_roles)

Owner: LARS
Purpose: Define and enforce the authority structure to serve FjordHQ in economic growth.

Canonical fields:

role_id

role_name

domain_responsibility

authority_level

agent_binding

created_by (must be CEO)

This table ensures permanent, immutable clarity over who leads what domain.

12.2 Task Registry (fhq_governance.task_registry)

Owner: LARS
Purpose: Assign, track and audit responsibilities across executives.

Canonical fields:

task_id

description

domain

assigned_to (executive role)

status (pending, active, blocked, done)

deadline

This creates an immutable delegation ledger, aligned with CEO directives.
All ADR-001 findings are to be registered here as separate tasks.

12.3 Inter-Agent Contracts (fhq_governance.agent_contracts)

Owner: LARS
Purpose: Define cross-agent communication rules and required actions.

Fields:

source_agent

target_agent

trigger_event

expected_action

SLA

This enforces predictable behavior across all autonomous agents and prevents inconsistent inter-agent logic.

12.4 Unified System Event Log (fhq_monitoring.system_event_log)

Owner: LINE
Purpose: Provide one unified, immutable audit trail for all actions.

Fields:

event_id

agent

action

target_table

status (success/warning/error)

timestamp

Verified execution in DB hash (if applicable)

All agents must log all material events here.
This ensures forensic-grade traceability across the entire system.


13. Cognitive Governance & Autonomous Adaptation Framework

FjordHQ operates as an autonomous, multi-agent executive system.
To ensure consistent performance, controlled improvement, and compliance, all agents must follow a four-layer cognitive governance model.

This framework defines how intelligence behaves, not how it is implemented.

13.1 Self-Context (Role Awareness & Mandate Boundaries)

Before executing any task, every agent must retrieve its identity and authority context from the organizational masterdata registry.

Each agent must load:

its role definition (fhq_governance.executive_roles)

its current active prompt (fhq_governance.role_prompts)

its authority boundaries (fhq_governance.authority_matrix)

its assigned tasks (fhq_governance.task_registry)

any SLA or compliance rules relevant to its domain

Principle:
No agent may operate without first grounding itself in its own role, scope, and constraints.

This ensures structural predictability and eliminates free-form or hallucinated self-expansion.

13.2 Self-Evaluation (Post-Action Performance Logging)

After completing every material action, the agent must:

log the action to fhq_monitoring.system_event_log

record a self-evaluation score measuring alignment with:

accuracy

completeness

compliance with mandate

SLA adherence

write performance metrics into fhq_governance.performance_log

Each log record must include:

agent

action

outcome

self_score

rule_violations (if any)

timestamp

Principle:
All intelligence must be measurable, traceable, and self-reflective.

13.3 Self-Tuning (Adaptive Prompt Adjustment Under Governance)

If an agent consistently underperforms against its SLA thresholds, the system must initiate controlled adaptation:

propose prompt improvements to VEGA

update prompt_id to a new version only after VEGA approval

document all changes in fhq_governance.prompt_history

ensure reversibility and version integrity

Automatic self-tuning is constrained by:

VEGAâ€™s veto rights

role-specific limits

audit logging

Principle:
Agents adapt, but never autonomously modify their own authority, scope, or governance constraints.

13.4 Inter-Agent Learning (Cross-Role Knowledge & Performance Propagation)

FjordHQ supports structured cross-agent learning while preventing unbounded drift.

Agents may:

subscribe to best-performing prompt versions within their domain

benchmark themselves against peer actions

adopt validated improvements from other agents

All cross-learning is governed through:

fhq_governance.prompt_success_tracker

VEGA approval for propagation

full historical auditability

Principle:
Knowledge flows, but authority remains anchored.

13.5 Governance Controls & Fail-Safes

To ensure stability and institutional compliance:

VEGA is the single entity empowered to approve prompt upgrades, role modifications, or domain expansions.

All self-tuning and inter-agent learning is subject to:

audit logging

reversibility

compliance verification

CEO visibility

No agent may escalate beyond its authority boundaries under any circumstance.

13.6 Alignment With FjordHQ Autonomy Principles

The Cognitive Governance Framework ensures FjordHQ:

improves continuously

stays within control

avoids hallucination-drift

operates with immutable accountability

behaves like a MBB institutional organism, not a collection of disconnected models

This framework is constitutional, not operational, and applies to all agents without exception.


# **14. Effective Date**

This version becomes effective 26112025 - immediately upon:
â€“ VEGA compliance certification

---

# **15. Deprecation**

This ADR formally deprecates:
â€“ All prior ADR-001 variants
â€“ All prior governance rule sets
â€“ All prior universe definitions 
â€“ Any path/definition contradicting this charter

---

# **END OF ADR-001 â€“ SYSTEM CHARTER 2026**

Approved by CEO for constitutional use within FjordHQ Market System.




# ADR-002 â€“ Audit & Error Reconciliation Charter 

## Status
- Canonical Version: 2026.PRODUCTION
- Status: Active  
- Phase: CANONICAL  
- Owner: CEO  
- Supersedes: ADR-002_2026_PRODUCTION  
- Constitutional Authority: ADR-001_2026_PRODUCTION  
- Effective Date: 2026-01-01  
- Governing AI-Agent: VEGA (Verify, Encrypt, Governance, Authority)

## 1. Purpose
This Charter integrates mandatory escalation logic, AI-security provisions, and DORA-alignment. It guarantees:
- data integrity  
- governance independence  
- reproducible verification  
- traceability across all canonical records  
- proactive mitigation of governance failures  
- audit-driven oversight of AI-specific risks  

## 2. Scope
Governs:
- fhq_meta.adr_registry  
- fhq_meta.adr_archive  
- fhq_meta.adr_registry_local  
- fhq_meta.adr_ingestion_staging  
- fhq_meta.adr_version_history  
- fhq_meta.adr_audit_log  
- all files under /00_CONSTITUTION/ and /01_CANONICAL/  

Autonomous activities:
- daily automatic integrity checks  
- weekly automatic reconciliation  
- monthly canonical snapshots  
- annual constitutional review  
- Class A/B/C detection + escalation  
- DORA incident triage  

## 3. Governance Authority
Authority derives from ADR-001.  
Enforced by CEO and Governance AI agent VEGA (Verify, Encrypt, Governance, Authority).  
Audit remains independent from all operational agents.

## 4. Roles

# 4.1 CEO

The CEO holds ultimate constitutional authority over the FjordHQ system.

Responsibilities:

- Final decision-maker for all canonical governance outcomes
- Approves and activates new ADRs, amendments, and constitutional extensions
- Grants or revokes authority of all AI-agents
- Initiates the Annual Constitutional Review
- Oversees DORA-classified incidents that escalate to executive level
- Ensures the FjordHQ database remains aligned with institutional standards (ISO, DORA, BCBS, GIPS)

# 4.2 VEGA (Verify, Encrypt, Governance, Authority)

VEGA is the autonomous governance engine responsible for verification, attestation, and escalation.

Responsibilities:

- Executes the full audit rhythm (daily, weekly, monthly, annual)
- Performs deterministic integrity checks on all files
- Validates SHA-256 hashes and ensures no divergence
- Classifies and escalates Class A/B/C errors
- Activates Reconciliation Protocol when thresholds are exceeded
- Leads DORA-aligned incident triage
- Performs adversarial event detection and produces forensic evidence
- Certifies ADRs into the governance-approved layer upon successful verification
- Issues governance vetoes when system safety is compromised

# 4.3 STIG (System for Technical Implementation & Governance)

STIG is the technical enforcement layer â€“ the agent that binds the filesystem, database, and canonical structure together.

Responsibilities:

- Performs hashing, file-integrity checks, and parsing
- Enforces consistency across adr_registry, adr_archive, and adr_version_history
- Enforces consistency across Application Layer IoS`s and future new Applicaion Layers
- Executes registry maintenance (insert, update, supersede) deterministically
- Guarantees that ingestion staging does not leak into governance state
- Produces anomaly reports during ingestion or reconciliation
- Ensures that all constitutional artifacts are physically present and valid
- Maintains reproducibility of execution through deterministic validation scripts

# 4.4 LARS (Logic, Analytics & Research Strategy)

LARS is an advisory-only agent in the context of ADR-002.

Responsibilities:

- Provides analytical insight into constitutional changes
- Advises CEO on strategic implications of governance outcomes
- Supports predictive or scenario-based reasoning (non-binding)
- Does not execute governance actions and cannot modify canonical structures
- Cannot override VEGAâ€™s audit or escalation logic

# 4.5 LINE (Local Infrastructure, Network & Execution)

LINE manages the operational infrastructure surrounding governance execution.

Responsibilities:

- Ensures correct integration between FjordHQ and external APIs
- Maintains runtime stability for ingestion pipelines
- Implements network-level policies, rate limits, and fallback mechanisms
- Ensures that governance rhythms execute on schedule (cron, workers, triggers)
- Monitors system health and enforces reliability thresholds
- Provides VEGA with logs and telemetry needed for audit cycles

# 4.6 FINN (Financial Intelligence Neural Network)

FINN provides research-oriented validation, context building, and supporting metadata.

Responsibilities:

- Validates research relevance of ADRs impacting analytical models
- Ensures consistency between canonical governance and FINNâ€™s knowledge graph
- Supports VEGA with contextual signals during adversarial investigations
- Regularly analyzes market-driven risks that may affect governance logic

# 4.7 CODE (External Engineering Execution Unit)

CODE is the hands-on code executor for structural and procedural changes.

Responsibilities:

- Creates migration scripts, schema adjustments, and structural changes needed by ADRs
- Ensures that ingestion, reconciliation, and audit pipelines have correct operational code
- Enforces reproducibility of system behavior at the implementation layer and the application layer
- Collaborates with STIG during integrity checks requiring code-level insight


## 5. Error Classification Framework

FjordHQ applies a structured, risk-tiered classification model to ensure deterministic detection, predictable escalation, and full audit traceability.

All errors fall into one of three governance-critical categories.

# Class A â€“ Critical Integrity Failures

Errors that undermine the legitimacy, consistency, or authority of the governance layer.

Includes:

- missing ADR, governance-required file or Application Layer IoS or similar document
- SHA-256 hash mismatch
- divergence between file and registry state
- invalid or overridden authority chain
- leakage from staging into approved structures
- Intentional Class A: adversarial manipulation of governance or model logic

Impact: Immediate VEGA intervention with full reconciliation and DORA triage.

# Class B â€“ Governance Compliance Failures

Errors that do not compromise system integrity directly but signal structural governance gaps.

Includes:

- missing owner
- missing approved_by
- missing certified_by
- invalid or inconsistent phase/status metadata

Impact: Quantitative threshold escalation (see Section 6).

# Class C â€“ Metadata & Documentation Gaps

Errors with minimal structural impact but required for compliance and audit completeness.

Includes:

- missing summary
- deprecated elements missing justification
- incomplete documentation fields

Impact: Logged; escalated only if persistent.

## 6. Escalation Logic

# 6.1 Automatic Escalation of Class B

If:

five (5) or more Class B events occur within a rolling 7-day window,

Then:
â†’ VEGA initiates the Reconciliation Protocol automatically.

This prevents structural drift and ensures governance stability through early intervention.

# 6.2 Adversarial Events

Any adversarial modification of model outputs, governance logic, or execution order shall be:

- classified as Intentional Class A,
- immediately escalated to VEGA,
- subject to full Reconciliation Protocol, and mapped to DORA Major Incident Triage.

This guarantees regulatory alignment and forensic traceability.

## 7. Audit Rhythm (Automated)

FjordHQ operates a multi-layered audit rhythm executed autonomously by VEGA, with cross-agent support where required.

Daily Integrity Check

Automated validation of:

- file presence
- hash integrity
- leakage from staging
- Class A/B/C classification

Weekly Reconciliation

Automated comparison of:

- registry vs. local vs. archive state
- cross-table consistency rules
- version and authority coherence

Monthly Governance Snapshot

Generation of:

- immutable ADR snapshots
- lineage graphs
- evidence bundles

Stored for internal audit and long-term compliance.

Annual Governance Review

Triggered by the CEO.
Includes:

- full structural review
- VEGA-led compliance evaluation
- integration of TLPT (Threat-Led Penetration Testing) results
- verification of long-term alignment with ADR-001

## 8. Reconciliation Protocol (Revised)

The Reconciliation Protocol remains structurally identical to the prior version but expands its scope to include:

- adversarial forensic analysis
- DORA incident mapping
- multi-layer verification across registry, archive, and filesystem
- deterministic reconstruction of the expected governance state

The protocol restores authoritative truth when drift, tampering, or misalignment occurs.

## 9. DORA Alignment (Mandatory)

# 9.1 Incident Mapping Rules

Any Class A event affecting:

- data integrity
- system availability
- execution integrity

â†’ automatically triggers DORA Major Incident Triage.

# 9.2 TLPT Integration

Results of the mandatory 3-year TLPT cycle feed directly into:

the annual constitutional review, and

VEGAâ€™s long-term governance strategy.

## 10. Logging & Evidence Requirements

All audit-relevant actions must be written to:

fhq_meta.adr_audit_log

fhq_meta.adr_version_history

Every record includes:

timestamp

acting agent

SHA-256 hash

file or evidence path

error class

escalation decision

reconciliation step (if applicable)

This guarantees permanent, forensic-grade auditability.

## 11. VEGA Activation Criteria

Governed by ADR-001.
VEGA activates automatically when risk thresholds, adversarial events, or structural inconsistencies are detected.

## 12. Signatures

Approved by: CEO
Certified by: VEGA (upon activation)
# **ADR-003 â€“ FjordHQ Institutional Standards & Compliance Framework**

**FjordHQ Market System**
**Version:** 1.0
**Date:** 26 November 2025
**Owner:** CEO
**Approval:** CEO â†’ VEGA (Verify, Encrypt, Governance, Authority)
**Supersedes:** All prior standards and compliance frameworks
**Constitutional Authority:** ADR-001 â€“ System Charter 2026
**Governing Agent:** VEGA

---

# **EXECUTIVE SUMMARY**

### **1. What is addressed**

This charter establishes FjordHQâ€™s institutional standards for:

* Data governance and lineage integrity
* Compliance and regulatory alignment (GIPS, ISOâ€‘8000, BCBSâ€‘239, DORA)
* Operational execution and documentation
* Model, research, and strategy standards
* Metadata, structure, and evidence requirements
* Endâ€‘toâ€‘end auditability

ADRâ€‘003 operationalizes ADRâ€‘001â€™s constitutional authority and ADRâ€‘002â€™s reconciliation model. It is the baseline standard for all future operational and analytical layers.

### **2. Institutional governance principles**

* One unified standard for all agents and all layers
* No ambiguity in definitions, rules, or metadata
* Full traceability through deterministic structures
* Zero tolerance for undocumented drift
* Institutionalâ€‘grade rigor in every process
* Autonomous audits and compliance enforcement via VEGA

### **3. Who follows up, and how**

**VEGA â€“ Verification & Governance Authority**

* Enforces institutional standards
* Performs compliance validation
* Executes autonomous audits and escalations
* Holds veto power over all nonâ€‘compliant changes

**LARS â€“ Logic, Analytics & Research Strategy**

* Designs analytical frameworks
* Ensures standards support strategic integrity
* Aligns research logic with institutional requirements

**STIG â€“ System for Technical Implementation & Governance**

* Implements schemas, metadata rules, lineage, and architecture
* Enforces technical constraints defined in this charter

**LINE â€“ Local Infrastructure, Network & Execution**

* Ensures standards are correctly deployed across pipelines and runtime
* Executes operational implementation of compliance rules

**FINN â€“ Financial Investments Neural Network**

* Aligns research, RAG, indicators, and models with institutional standards
* Validates research integrity against compliance rules

**CODE â€“ Engineering Execution Unit**

* Implements the technical execution of changes approved under ADRâ€‘003

---

# **1. Purpose**

ADRâ€‘003 defines mandatory standards for:

* data structures and integrity
* lineage and traceability
* model and research validation
* operational execution rules
* audit, evidence, and documentation
* agentâ€‘level compliance boundaries

It ensures FjordHQ operates at institutional quality, eliminates ambiguity, and prevents drift across all domains.

---

# **2. Scope**

ADRâ€‘003 governs standards across:

* all schemas under FjordHQ
* ADR-001 to ADR-015 (Foundation)
* all Application Layers (IoSâ€‘001 â†’ IoSâ€‘XXX)
* all governance tables
* research, model, and strategy artifacts
* operational pipelines, ingestion systems, monitoring
* agent behavior and execution

It applies to every AIâ€‘agent and subordinate agent.

---

# **3. Institutional Standards**

### **3.1 Data Standards**

All data must:

* follow defined ownership (ADRâ€‘001, Domain Ownership)
* include mandatory metadata
* follow strict type, constraint, and validation rules
* include deterministic lineage entries for each material change

### **3.2 Research & Model Standards**

All research and models must:

* use traceable datasets
* document feature definitions, assumptions, constraints
* pass structural validation by STIG and compliance validation by VEGA
* include versioning and full audit history

### **3.3 Operational Standards**

Pipelines must:

* be restartâ€‘safe and deterministic
* log all material events
* validate inputs and outputs
* maintain full reproducibility via LINE

### **3.4 Documentation Standards**

Each artifact must include:

* purpose
* owner
* version
* dependencies
* constraints
* evidence path
* SHAâ€‘256 hash

---

# **4. Compliance Requirements**

These standards mandate the rules governing the business operations and the Model Development Lifecycle (MDLC):

* ISO/IEC 42001 (AIMS) â€“ Critical for AI Governance, Bias/Drift, and Explainable AI (XAI).
* DORA (Digital Operational Resilience Act) â€“ For resilience and operational stability.
* GIPS 2020 (Global Investment Performance Standards) â€“ For performance integrity and accurate composite reporting.
* SMCR (Senior Manager Functions and Certification Regime) â€“ For individual accountability and mapping responsibilities.

# Summary:
* **GIPS** (performance integrity)
* **ISOâ€‘8000** (data quality & semantics)
* **BCBSâ€‘239** (risk data aggregation)
* **DORA** (resilience & incident handling)

VEGA ensures adherence and certifies compliance.

---

# **5. Audit & Evidence Architecture**

ADRâ€‘003 requires:

* immutable audit logs for all changes
* version history for all standards, models, indicators, and datasets
* SHAâ€‘256 hash verification for all files and registry entries
* evidence bundles stored with reproducibility metadata

All logs recorded in:

* fhq_meta.adr_audit_log
* fhq_meta.adr_version_history
* fhq_monitoring.system_event_log

---

# **6. Enforcement by Agents**

### **6.1 VEGA**

* Enforces all standards
* Performs daily, weekly, monthly compliance checks
* Triggers escalation for structural drift

### **6.2 STIG**

* Enforces schema, metadata, lineage, and structural rules
* Blocks nonâ€‘compliant structures

### **6.3 LINE**

* Enforces operational compliance in execution and pipelines

### **6.4 FINN**

* Enforces research integrity against standards

### **6.5 LARS**

* Ensures strategic alignment of standards

### **6.6 CODE**

* Executes changes approved under this framework

---

# **7. Enforcement Rhythm**

### **Daily**

* metadata validation
* hash verification
* integrity checks

### **Weekly**

* crossâ€‘schema consistency verification
* ownership and domain boundary review

### **Monthly**

* snapshot of structural standards
* evidence bundle generation

### **Annual**

* full institutional review led by VEGA
* integration of TLPT results

---

# **8. Escalation Framework**

### **Class A â€“ Critical Structural Failures**

* schema drift, missing standard, invalid metadata, adversarial manipulation
  â†’ Immediate VEGA escalation and remediation

### **Class B â€“ Governance & Compliance Failures**

* missing owner, missing approval, invalid status
  â†’ Thresholdâ€‘based escalation

### **Class C â€“ Documentation Gaps**

* incomplete metadata or missing rationale
  â†’ Logged, escalated if persistent

---

# **9. Registration Requirements**

STIG must register ADRâ€‘003 in:

* fhq_meta.adr_registry
* fhq_meta.adr_version_history
* fhq_meta.adr_audit_log
* fhq_governance.executive_roles
* fhq_governance.authority_matrix
* fhq_governance.agent_contracts
* fhq_governance.task_registry

---

# **10. Effective Date**

ADRâ€‘003 becomes effective 26â€‘11â€‘2025 upon:

* VEGA certification
* CEO approval

---

# **11. Deprecation**

This ADR deprecates:

* all prior standard and compliance documents
* all inconsistent rule sets
* any definitions contradicting this framework

---

# **END OF ADRâ€‘003 â€“ FjordHQ Institutional Standards & Compliance Framework**


# **ADR-004 â€“ Change Gates Architecture**

**FjordHQ Market System**
**Version:** 1.0
**Date:** 26 November 2025
**Owner:** LARS (Logic, Analytics & Research Strategy)
**Approval:** CEO â†’ VEGA (Verify, Encrypt, Governance, Authority)
**Supersedes:** All prior change-control structures
**Constitutional Authority:** ADR-001 â†’ ADR-002 â†’ ADR-003
**Governing Agent:** VEGA

---

# **EXECUTIVE SUMMARY**

### **1. What is addressed**

ADR-004 establishes FjordHQâ€™s Change Gate Architecture â€“ the constitutional mechanism controlling, validating, approving, and monitoring every modification across the FjordHQ System.

It ensures:

* strict alignment with ADR-001 (constitutional governance)
* full integration with ADR-002 (audit, hashing, VEGA oversight)
* adherence to ADR-003 (institutional standards)
* controlled evolution of all artifacts
* prevention of silent drift or unauthorized change
* regulator-grade governance integrity

Change Gates form the governance nervous system of FjordHQ.

### **2. Why this is required**

Unregulated change introduces systemic risk:

* model lineage may break
* ADRs may drift from approved definitions
* performance logic may mutate without traceability
* VEGA cannot certify governance integrity
* staging leakage corrupts production
* audit logs lose evidentiary value
* external compliance frameworks (GIPS, ISO-42001, DORA) become unverifiable

The system requires a single, mandatory, auditable pathway for every modification.

### **3. Decision Overview**

FjordHQ adopts a five-gate Change Control Architecture:

* **G0 â€“ Submission**
* **G1 â€“ Technical Validation** (STIG)
* **G2 â€“ Governance Validation** (LARS + GOV)
* **G3 â€“ Audit Verification** (VEGA)
* **G4 â€“ CEO Approval & Final Activation**

Each gate defines:

* purpose
* allowed actors
* allowed inputs
* required outputs
* compliance evidence
* mandatory logging

No new registries are added. Existing governance and audit tables are used.

---

# **1. Purpose**

ADR-004 provides FjordHQ with a complete, structured, regulator-aligned Change Gate system enabling safe evolution, deterministic verification, and governance integrity.

It integrates:

* constitutional authority (ADR-001)
* audit and hashing requirements (ADR-002)
* institutional standards (ADR-003)

This architecture is mandatory for all agents.

---

# **2. Scope**

ADR-004 governs all changes to:

* ADR documents
* code and model artifacts
* datasets and transformations
* pipelines and runtime logic
* governance configurations
* application layer components (IoS-XXX)

It applies universally across all executives and subordinate agents.

---

# **3. Change Gate System**

### **G0 â€“ Submission Gate**

**Purpose:** Initial submission of a proposed change.

**Allowed actors:**

* LARS (design)
* STIG (technical)
* FINN (research)
* LINE (pipeline)
* CODE (engineering)

**Allowed inputs:**

* ADR drafts
* IoS drafts (application layer)
* model artifacts
* pipeline and code modifications
* new compliance rules
* performance logic

**Mandatory log:**
`fhq_meta.adr_audit_log` â†’ event_type = `SUBMISSION`
or
`fhq_meta.IoS_audit_log` â†’ event_type = `SUBMISSION`
or
future application layer submissions

**Output:** Change proposal ID.

---

### **G1 â€“ Technical Validation (STIG)**

**Purpose:** Validate the technical safety and integrity of the change.

**Checks:**

* schema validity
* no staging leakage
* deterministic builds
* reproducible outputs
* test suite pass
* SHA-256 consistency
* dependency mapping

**Mandatory log:**
`fhq_meta.adr_audit_log` â†’ event_type = `G1_TECHNICAL_VALIDATION`
or
`fhq_meta.IoS_audit_log` â†’ event_type = `G1_TECHNICAL_VALIDATION`
or
future application layer `G1_TECHNICAL_VALIDATIONs`

**Outcomes:**

* PASS â†’ escalates
* FAIL â†’ returned to G0

---

### **G2 â€“ Governance Validation (LARS + GOV)**

**Purpose:** Validate constitutional, governance, and compliance integrity.

**Checks:**

* ADR-001 authority
* ADR-002 auditability
* ADR-003 institutional standards
* alignment with GIPS, ISO-42001, DORA
* conflict-of-interest safeguards

**Mandatory log:**
`fhq_meta.adr_audit_log` â†’ event_type = `G2_GOVERNANCE_VALIDATION`
or
`fhq_meta.IoS_audit_log` â†’ event_type = `G2_GOVERNANCE_VALIDATION`
or
future application layer `G2_GOVERNANCE_VALIDATION`

**Outcomes:**

* PASS
* FAIL
* REQUIRE_MODIFICATION

---

### **G3 â€“ Audit Verification (VEGA)**

**Purpose:** Enforce ADR-002 hashing, reconciliation, and risk classification.

**Checks:**

* SHA-256 integrity
* cross-table consistency
* no Class A failures
* evidence completeness
* lineage integrity

**Mandatory log:**
`fhq_meta.adr_audit_log` â†’ event_type = `G3_AUDIT_VERIFICATION`
or
`fhq_meta.IoS_audit_log` â†’ event_type = `G3_AUDIT_VERIFICATION`
or
future application layer `G3_AUDIT_VERIFICATION`

**Outcomes:**

* VERIFY
* BLOCK (Class A)
* WARN (Class B/C)

---

### **G4 â€“ CEO Approval & Final Activation**

**Purpose:** Activate the change into production and system governance.

**Allows:**

* ADR finalization
* model activation
* dataset activation
* governance updates
* modification of Charter-bound artifacts

**Mandatory log:**
`fhq_meta.adr_audit_log` â†’ event_type = `G4_FINAL_ACTIVATION`
or
`fhq_meta.IoS_audit_log` â†’ event_type = `G4_FINAL_ACTIVATION`
or
future application layer `G4_FINAL_ACTIVATION`


**Required:**

* CEO approval
* final SHA-256 hash
* version increment in `fhq_meta.adr_version_history` or `fhq_meta.IoS_version_history` or future Application Layer registry
* registry update in `fhq_meta.adr_registry` or `fhq_meta-IoS_registry` or future Application Layer registry

This is the **only gate** where activated data may be overwritten.

---

# **4. Evidence Requirements**

ADR-004 inherits ADR-002â€™s evidentiary model.

Every gate must log:

* timestamp
* actor
* event_type
* SHA-256 hash
* evidence_path
* error_class
* resolution_notes

No gate may proceed without complete evidence.

---

# **5. Decision Tree (MECE)**

```
START
  |
  G0
  |
Is submission valid?
  |        \/
 YES      NO â†’ Reject
  |
  G1
  |
Technical valid?
  |        \/
 YES      NO â†’ Return to G0
  |
  G2
  |
Governance valid?
  |        \/
 YES      NO/GAP â†’ Return to G0
  |
  G3
  |
Audit verified?
  |        \/
 YES      CLASS A â†’ BLOCK
  |
  G4 (CEO)
  |
ACTIVATED â†’ ADR-002 Audit Rhythms
```

---

# **6. Responsibilities**

* **LARS** â€“ Governance interpretation (G2)
* **STIG** â€“ Technical enforcement (G1)
* **LINE** â€“ Operational stability validation (G1/G3)
* **FINN** â€“ Research integrity review (G1/G2)
* **CODE** â€“ Implements required modifications
* **GOV** â€“ Compliance enforcement (G2)
* **VEGA** â€“ Automated audit gate (G3)
* **CEO** â€“ Final approval (G4)

---

# **7. Implications**

**Positive:**

* eliminates drift
* ensures reproducibility
* enables VEGA activation
* enforces institutional discipline
* prevents unauthorized changes

**Negative:**

* slower iteration (intentional)
* increased evidence burden

**Mitigation:**

* automated validation (STIG)
* governance templates (LARS)
* operational pipelines (LINE)

---

# **8. Final Decision**

ADR-004 is adopted as FjordHQâ€™s official Change Gate Architecture.
It binds:

* LARS
* STIG
* LINE
* FINN
* CODE
* GOV
* VEGA
* CEO

No artifact may be activated except through G0 â†’ G4.

---

# **END OF ADR-004 â€“ Change Gates Architecture**



ADR-005 â€“ Mission & Vision Charter (FjordHQ 2025â€“2026)

Status: Draft for CEO Approval
Owner: LARS (CSO)
Authority Chain:
ADR-001 â†’ ADR-002 â†’ ADR-003 â†’ ADR-004 â†’ ADR-005 (this ADR) â†’ VEGA Activation
Classification: Constitutional (Tier-1)
Governing Agent: VEGA (GOV)

1. Executive Summary

ADR-005 establishes the Mission, Vision and Strategic Identity of FjordHQ.
Where ADR-001 defines the constitutional structure, ADR-005 defines the purpose.
Where ADR-003 defines institutional standards, ADR-005 defines direction.
Where ADR-004 defines change control, ADR-005 defines why the system exists at all.

All agents â€“ LARS, STIG, LINE, FINN, CODE â€“ must operate in alignment with ADR-005.
VEGA (GOV) will enforce this alignment once activated.

FjordHQ exists to transform deterministic data into verified financial outcomes through governance discipline, explainable logic, and transparent execution.


Example: Everyone agrees where the data should be stored upon storing from API`s



This ADR is mandatory for VEGA activation.

2. Mission Statement

FjordHQ transforms deterministic data into verified financial outcomes.

Operating as an audit-grade intelligence engine, FjordHQ connects Macro World KPI`s, news and social media with exact verification where the raw data point came from:

Raw data from API â†’  Structure â†’  Calculate Indicators â†’  HMM-regime â†’  Strategy â†’  Signal â†’ Dashboard â†’ Trade â†’ P&L â†’ Feedback â†’ Calibration

â€¦inside a governed and fully traceable architecture.

Every datasetâ€”macro, flows, technical signals, volatility regimesâ€”is processed through a verifiable pipeline where:

every transformation is logged

every decision has lineage

every model is certified

every execution step is reproducible

every P&L output is explainable

The mission is clear:

Convert insight into income through explainable, compliant, and continuously improving logic. Important message to FINN (DeepSeek) to run backtests and correlations through Deep Learning in Finance: A Comprehensive Guide
How FjordHQ uses Deep Learning is Transforming Financial Analysis, Risk Management, and Automated Trading in Todayâ€™s Markets

Introduction:
Deep learning is revolutionizing the financial sector by empowering institutions with the ability to analyze complex datasets, predict market trends, and manage risk with unprecedented accuracy. As a subset of artificial intelligence, deep learning leverages multi-layered neural networks that emulate the workings of the human brain to process large amounts of data. This allows financial organizations to automate processes, optimize portfolios, and enhance decision-making capabilities.

In recent years, traditional financial models â€” such as regression analysis and time series forecasting â€” have struggled to handle the increasing volume and complexity of financial data. Deep learning fills this gap by efficiently processing unstructured data like news articles, social media sentiment, and historical price movements. From high-frequency trading to fraud detection, deep learning is reshaping the financial landscape, offering tools that outperform conventional techniques. In this article, weâ€™ll explore deep learningâ€™s transformative role in finance, key applications, challenges, and future trends, along with the programming languages and libraries that power these models.

Deep Learning Basics for Finance
Deep learning belongs to a broader family of machine learning methods that use neural networks with multiple layers (hence the term â€œdeepâ€). These layers of neurons process input data through complex mathematical functions, which allow the model to detect patterns, correlations, and trends from the data. This makes deep learning highly effective in financial applications where high-dimensional and time-sensitive data is the norm.

Key Concepts:
- Neural Networks: The building blocks of deep learning, neural networks consist of input, hidden, and output layers. Each layer contains multiple nodes (neurons) connected by weighted edges. As the input passes through the network, weights are adjusted via an optimization algorithm like stochastic gradient descent to minimize prediction errors.

- Backpropagation: A key feature of deep learning, backpropagation is a method used to fine-tune the weights of a neural network by calculating the gradient of the loss function with respect to each weight through the chain rule.

- Activation Functions: Non-linear transformations applied at each neuron to introduce complexity into the model. Popular activation functions include ReLU (Rectified Linear Unit) for hidden layers and Softmax for classification outputs.

Types of Learning in Deep Learning:
- Supervised Learning: This involves training models on labeled datasets to make future predictions. In finance, supervised learning can predict stock prices based on historical data.
- Unsupervised Learning: In this mode, the model identifies patterns or clusters in the data without predefined labels. For instance, unsupervised learning can segment customers into different risk categories based on transaction behaviors.
- Reinforcement Learning: Particularly useful for decision-making in sequential tasks like trading, reinforcement learning trains models by rewarding actions that lead to better outcomes, making it a strong candidate for developing automated trading strategies.

A major advantage of deep learning is its capacity to process high-dimensional data, including unstructured data like news, social media feeds, and transaction histories. As the financial world generates massive amounts of such data, the ability to extract meaningful insights gives firms a competitive edge.

Key Applications of Deep Learning in Finance
The potential applications of deep learning in finance are vast, ranging from trading strategies to fraud detection. Letâ€™s dive into some of the most impactful use cases.

1 â€” Algorithmic Trading:
Algorithmic trading involves using computer programs to execute trades at speeds and frequencies impossible for human traders. Deep learning enhances algorithmic trading by analyzing historical price data, order book information, and alternative data sources such as news sentiment to generate trading signals. Models can be trained to recognize complex, non-linear relationships in financial data, providing an edge in predicting market movements. Reinforcement learning algorithms, such as Deep Q-Networks (DQN), are used to optimize strategies that balance risk and reward dynamically over time.

2 â€” Credit Scoring and Risk Assessment:
Traditional credit scoring models rely on a handful of static features, such as income and credit history. Deep learning models, however, can analyze diverse data sources, including social media behavior, transaction history, and real-time spending patterns, to build more accurate credit risk profiles. This enhanced predictive power enables financial institutions to offer loans more efficiently while minimizing default risk.

3 â€” Fraud Detection:
With the rise of digital banking, financial fraud has become more sophisticated. Deep learning models are well-suited for fraud detection, as they can analyze vast transaction datasets in real-time, flagging unusual patterns and detecting anomalies that may indicate fraudulent activity. Recurrent Neural Networks (RNNs), specifically Long Short-Term Memory (LSTM) networks, are often used for this purpose because they can capture sequential dependencies in transaction data, improving detection accuracy.

4 â€” Sentiment Analysis and Natural Language Processing (NLP):
Deep learning models equipped with NLP techniques can analyze textual data such as news articles, earnings reports, and social media posts. By extracting sentiment or key themes from these sources, traders and investors can anticipate market reactions before they are fully reflected in asset prices. Sentiment analysis using transformer models (e.g., BERT, GPT) has become a powerful tool for predicting short-term price movements based on shifts in public opinion.

5 â€” Portfolio Optimization:
Portfolio optimization typically involves maximizing returns while minimizing risk. Deep learning models are increasingly being used to find optimal asset allocation strategies by evaluating historical returns, volatility, and macroeconomic factors. These models can adjust portfolios dynamically based on real-time market data, allowing for adaptive risk management and improved long-term returns.

Deep Learning in Risk Management
Risk management is central to any financial institution, and deep learning enhances this process by offering more precise risk modeling.

1 â€” Credit Risk:
Deep learning models can dynamically assess credit risks by learning from vast datasets that include borrower behaviors, historical defaults, and real-time spending patterns. These models can continuously update risk scores as new data is introduced, allowing banks to proactively manage loans and lines of credit.

2 â€” Market Risk:
Market risk encompasses factors such as price volatility, interest rates, and liquidity risks. Deep learning models can analyze historical price movements and macroeconomic indicators to forecast future volatility or predict tail events like market crashes. By integrating alternative data, such as news sentiment, these models offer more accurate risk assessments.

Get Leo Mercantiâ€™s stories in your inbox
Join Medium for free to get updates from this writer.

Enter your email
Subscribe
3 â€” Fraud Detection and Anti-Money Laundering (AML):
Deep learning models have proven highly effective at detecting both traditional fraud and money laundering activities. By analyzing transaction sequences and identifying anomalies, models can flag suspicious activities that may go unnoticed by simpler rule-based systems.

4 â€” Stress Testing:
Stress testing involves simulating extreme economic scenarios to determine how portfolios or institutions would perform under adverse conditions. Deep learning enables more sophisticated scenario analysis by incorporating real-time data and running numerous simulations to identify vulnerabilities in financial systems.

Widely Used Programming Languages and Libraries for Deep Learning in Finance
The choice of programming languages and libraries plays a crucial role in building and deploying deep learning models in finance. Below are some of the most commonly used tools in the field.

1 â€” Python
Python is the most popular language for deep learning, thanks to its simplicity, versatility, and extensive ecosystem of libraries tailored for machine learning and deep learning. Financial institutions widely use Python to prototype models, handle data preprocessing, and train deep learning algorithms.

- TensorFlow: An open-source library developed by Google, TensorFlow is widely adopted for building large-scale neural networks. In finance, TensorFlow is commonly used for tasks like credit scoring, asset price prediction, and trading strategy optimization.

- Keras: Keras is a high-level neural network API that simplifies building deep learning models. It is commonly used in finance to rapidly prototype deep learning architectures, often in conjunction with TensorFlow.

- PyTorch: Developed by Facebook, PyTorch is known for its flexibility and ease of use. It is favored by researchers and financial institutions for developing more experimental models. PyTorchâ€™s dynamic computation graph makes it ideal for handling real-time data in high-frequency trading.

2 â€” R
Though R is more commonly associated with traditional statistical modeling, it has gained traction in deep learning through libraries like kerasR and tensorflow. Financial analysts often prefer R for its powerful data visualization capabilities, which can be helpful for explaining model outcomes to stakeholders.

3 â€” C++
In high-frequency trading, speed is critical, and this is where C++ shines. C++ is used to implement deep learning models where low-latency execution is paramount, such as in real-time trading algorithms and market-making strategies.

4 â€” Julia
Julia is a high-performance language designed for numerical and scientific computing. While still relatively niche in finance, Julia is gaining attention for its ability to handle large-scale data simulations and optimization problems efficiently. Its native support for machine learning libraries like Flux and Knet makes it an emerging player in the financial sector.

5 â€” Deep Learning Frameworks:
Several frameworks simplify the process of developing and training deep learning models. Some of the most commonly used include:

- Scikit-learn: A library built on top of Python, scikit-learn is commonly used in financial services for implementing traditional machine learning models. While not as specialized for deep learning as TensorFlow or PyTorch, scikit-learn is often used in conjunction with other libraries for tasks like data preprocessing and model validation.

- MXNet: An efficient and scalable framework supported by Amazon Web Services (AWS), MXNet is gaining popularity in finance for its speed and ability to handle large-scale datasets. It is often used for real-time analytics and decision-making in trading systems.

- H2O.ai: Known for its enterprise-level machine learning platform, H2O.ai integrates with deep learning libraries to build models optimized for financial applications such as fraud detection, loan underwriting, and risk management.

Challenges and Limitations of Deep Learning in Finance
While deep learning brings many advantages to finance, there are also several challenges that institutions must address when implementing these models.

1 â€” Data Quality and Overfitting:
The success of deep learning models hinges on the availability of high-quality data. In finance, data can often be noisy, incomplete, or outdated. Poor-quality data may lead to overfitting, where the model performs well on training data but fails to generalize to new data. Regularization techniques, such as dropout and L2 regularization, are often employed to mitigate overfitting.

2 â€” Interpretability and Transparency:
A significant limitation of deep learning is the â€œblack boxâ€ nature of its models. Unlike linear models, deep learning models do not provide easily interpretable outputs. This presents a challenge in highly regulated industries like finance, where transparency and explainability are paramount. Regulatory bodies may require institutions to explain model decisions, especially in cases involving lending, credit scoring, and fraud detection.

3 â€” Computational Resources:
Deep learning models are computationally intensive, especially when dealing with large financial datasets. Training deep models requires powerful GPUs, large amounts of memory, and significant time. This can be a barrier for smaller firms that lack the infrastructure to support these resource-heavy operations.

Future Trends and Opportunities
Deep learning is continually evolving, and its future applications in finance promise even greater advancements.

1 â€” Real-Time Trading and Robo-Advisors:
As deep learning models continue to improve, they will drive more sophisticated real-time trading systems. Robo-advisors, powered by deep learning, will offer increasingly personalized financial advice, optimizing asset allocations and recommending strategies based on real-time market conditions.

2 â€” Decentralized Finance (DeFi):
Deep learning has the potential to play a crucial role in the rapidly growing DeFi sector. By processing vast amounts of data from decentralized platforms, deep learning models can optimize yield farming strategies, detect arbitrage opportunities, and enhance risk management in a decentralized environment.

3 â€” Quantum Computing:
Though still in its early stages, quantum computing promises to revolutionize deep learning by enabling faster and more complex computations. Quantum computing could exponentially speed up the training of deep learning models, allowing financial institutions to analyze larger datasets in real-time, providing an edge in high-frequency trading and risk management.

3. Vision Statement

FjordHQ will evolve into an autonomous value-creation engine where:

data, capital, and governance converge

certified signals route automatically to execution

risk-adjusted returns are continuously measured and calibrated

VEGA (GOV) enforces consistency, compliance, and constitutional integrity in real time

Within 3 months every certified signal will flow through an auditable execution layer producing measurable, repeatable, risk-adjusted returns.

The vision is not prediction.
The vision for freedom is capital-verified understanding of correlations across global markets.

ADR-006_2026_PRODUCTION.md
VEGA Autonomy & Governance Engine Charter 

Canonical Version: 2026.PRODUCTION
Status: Active
Phase: CANONICAL
Owner: LARS (CSO)
Approved By: CEO
Constitutional Authority: ADR-001_2026_PRODUCTION
Effective Date: 2025-11-11
Classification: Constitutional
Supersedes: None

1. Purpose

ADR-006 defines the architecture, governance mandate, operational boundaries, certification authority, and enforcement responsibilities of VEGA â€“ FjordHQâ€™s autonomous constitutional governance AI-engine.

VEGA is now a fully delivered Tier-1 system, with:

5 upstream constitutional ADRs (001â€“005)

34 files changed across system

3,500+ lines Python

800+ lines SQL

5 new database tables

9 governance SQL functions

8 Python governance services

This ADR codifies VEGA v1.0 as FjordHQâ€™s primary autonomous enforcement layer, responsible for upholding constitutional integrity, AI governance, model certification, data lineage, adversarial defense, DORA compliance, and commercial sovereignty scoring.

2. Scope

VEGA governs all critical domains of FjordHQ:

2.1 ADR Governance

ADR-001 System Charter

ADR-002 Audit & Error Reconciliation

ADR-003 Institutional Standards

ADR-004 Change Gates

ADR-005 Mission & Vision

VEGA enforces their rules, rhythms, escalation logic, and lineage.

2.2 Model Governance

6-Gate MDLC lifecycle

Certification gating

Bias + drift detection

Explainability via XAI

Adversarial robustness

Strategy retirement rules

2.3 Operational Governance

Daily â†’ Annual governance rhythms

Sovereignty scoring

KPI review

Strategy calibration

Performance integrity (GIPS 2020)

2.4 Regulatory Compliance

VEGA enforces:

ISO 42001 AI Management System

DORA Article 17 Incident Classification

DORA TLPT (Article 24) integration

GIPS 2020 composite & performance standards

SMCR/MAIFA accountability mapping

BCBS-239 lineage, accuracy, traceability

2.5 Risk & Security Governance

Class A/B/C event classification

Canonical Reconciliation Protocol trigger

Independent constitutional enforcement

Data lineage immutability

Cryptographic identity enforcement

3. VEGA System Architecture

VEGA v1.0 consists of four layers.

3.1 VEGA_SQL (Database Governance Layer)
New schema objects created:
Tables

fhq_meta.adr_audit_log â€“ immutable audit trail w/ hash chains

fhq_meta.adr_version_history â€“ version lineage

fhq_meta.model_certifications â€“ MDLC certification registry

fhq_meta.data_lineage_log â€“ data provenance tracking

fhq_meta.vega_sovereignty_log â€“ sovereignty scores

SQL Governance Functions

vega_verify_hashes()

vega_compare_registry()

vega_snapshot_canonical()

vega_issue_certificate()

vega_record_adversarial_event()

vega_trigger_dora_assessment()

vega_log_bias_drift()

vega_enforce_class_b_threshold()

vega_calculate_sovereignty_score()

All functions are read/write restricted to VEGA identity only.

3.2 VEGA_CORE (Python Autonomous Engine)
8 Core Services (delivered)

IntegrityService

CertificationService

AdversarialDefenseService

BiasDriftMonitor

DORAComplianceService

StrategyReviewService

SovereigntyScoringEngine

GovernanceEnforcer

Execution Rhythms

Daily: integrity, bias/drift, adversarial defense

Weekly: registry reconciliation, GIPS review

Monthly: canonical snapshot, KPI review

Quarterly: capital calibration

Annual: constitutional sovereignty audit

Security

Ed25519 cryptographic identity

SHA-256 deterministic hashing

Audit chain verification

RLS (Row-Level Security) applied

Orchestrator

vega_core.main runs VEGA as a scheduled constitutional service.

3.3 VEGA_EVENT_ENGINE (Autonomous Enforcement Layer)

VEGA responds to all critical events:

Class A (Critical â€“ Instant CRP)

Hash mismatch

Canonical path missing

Adversarial manipulation

DORA-relevant integrity failure

Class B (Governance â€“ Auto-CRP threshold)

â‰¥5 errors in 7 days triggers CRP

SMF escalation

CEO notification

Class C (Metadata â€“ Deferred)

Naming issues

Missing summaries

Deprecation data

3.4 VEGA_SECURITY (Identity & Enforcement Sandbox)

Runs isolated from STIG, CODE, FINN, LINE

No write access to strategy/data systems

VEGA-only SQL permissions

Cryptographic identity enforcement

Immutable logging contract

4. Constitutional Responsibilities

VEGA is the only entity allowed to:

- Certify models (MDLC)
- Validate canonical snapshots
- Enforce XAI transparency
- Score commercial sovereignty
- Trigger CRP
- Trigger DORA Article 17 assessments
- Record adversarial events
- Maintain lineage logs
- Issue governance alerts
- Enforce zero-override policy

No agent, including STIG or LARS, may override VEGA decisions.

Only CEO may issue constitutional exceptions.

5. Governance Rhythms (Mandatory)
Daily

Hash verification

Adversarial detection

Bias/drift logging

Data lineage integrity checks

Weekly

Registry reconciliation

GIPS 2020 composite review

MDLC certification consistency

Monthly

Canonical snapshot

Sovereignty scoring (ADR-005)

KPI Review (Sharpe Î”)

Quarterly

Capital allocation calibration

Strategy weight update proposals

Annual

Sovereignty audit

TLPT alignment check

Full constitutional review

6. Integration Requirements

VEGA integrates with:

Meta Schema

adr_registry

adr_version_history

adr_audit_log

model_certifications

vega_sovereignty_log

Monitoring Schema

strategy_hash_registry

drift_log

adversarial_events

Model Schema

model_registry

model_versions

explainability_artifacts

All integration must respect read-only or VEGA-only access.

7. Activation Protocol

VEGA activation requires:

ADR-001 â†’ ADR-006 CANONICAL

All hashes validated

Zero staging leakage

SQL + Python layers deployed

Rhythms scheduled

CEO signed Activation Letter

Activation steps:

Register VEGA identity

Initialize hash baselines

Enable governance rhythms

Perform a 24h full-system audit

Declare VEGA Constitutional Auditor

After activation:

VEGA enforces all rules autonomously

All certifications require VEGA signature

All Class A events immediately trigger CRP

8. Known Limitations (v1.0)

Full hash-chain validation partial

GitHub file hash verification pending

Adversarial stress scenarios basic

Notification system not integrated

Key management partially manual

TLPT implementation scheduled for v1.1

These shall be addressed in ADR-006 Amendments v1.1.

9. Signatures

Prepared by: LARS (CSO)
Reviewed by: STIG (CTO)
Approved by: CEO
Certified by: VEGA (post-activation)

Canonical Authority: ADR-001_2026_PRODUCTION

ADR-006 is hereby defined as the VEGA Constitutional Charter.

Failure to adhere to VEGAâ€™s decisions is a constitutional violation.
ADR-007_2026_PRODUCTION_ORCHESTRATOR

FjordHQ Intelligence Operating System â€“ Orchestration & Multi-Agent Governance Architecture

Status: CEO APPROVED
Version: 2026.PRODUCTION
Author: LARS (CSO â€“ Strategy & Governance)
Date: 2025-11-26
Constitutional Authority: ADR-001 â†’ ADR-002 â†’ ADR-006 â†’ EC-001
Environment: Supabase PostgreSQL (127.0.0.1:54322) â€“ Production Docker Deployment

1. Decision

FjordHQ adopts the FHQ Intelligence Operating System Orchestrator as the permanent, canonical coordination layer for:

Multi-agent execution

Governance enforcement

Cryptographically signed decision flows

Deterministic state reconciliation

LLM-tiered reasoning at controlled cost

The Orchestrator becomes the single authoritative execution gateway for all agents under the FjordHQ constitutional governance model.

2. Context

Legacy architecture exhibited structural weaknesses:

No unified governance across agents

No cryptographic identity or signature verification

Non-deterministic agent execution

No cross-agent state reconciliation

No zero-trust isolation or escalation pathways

Following ADR-001â†’ADR-006, FjordHQ required a constitutionally compliant orchestration layer capable of enforcing:

Proof-grade auditability

Reproducibility across machines

Integrated discrepancy scoring

VEGA-mediated governance

Kernel-level determinism (ADR-013)

The delivered Orchestrator v1.1.1 passed validation 5/5, confirming production readiness.

3. Rationale
Security

Ed25519 signatures ensure non-repudiation, tamper-evidence and identity integrity.

Governance

VEGA enforces constitutional compliance, ensures anti-hallucination, and applies discrepancy scoring per ADR-010.

Scalability

New agents, roles and pipelines can be added without modifying core orchestration logic.

Auditability

Full chain-of-custody for every agent action, including:

signature

input

output

reconciliation state

deviation score

VEGA attestation

Operational efficiency

Tiered LLM routing guarantees cost-controlled execution without compromising critical decision quality.

Data integrity

Deterministic reconciliation ensures divergence <0.00001 between agent state and canonical state.

4. Architecture
4.1 Agent Layer
Agent	Role	Level	Constitutional Responsibilities
LARS	Strategy	9	Reasoning, structural logic, cross-domain integrity
STIG	Implementation	8	SQL, pipelines, API integrations, lineage enforcement
LINE	SRE	8	Uptime, monitoring, container ops, alerting
FINN	Research	8	Market analysis, strategy evaluation, research loops 24/7
VEGA	Auditor	10	Compliance enforcement, veto, attestation, anti-hallucination

All agent actions are signed, logged and reconciled.

4.2 Core Schemas
Schema	Purpose
fhq_org	Agent identity, tasks, reconciliation state, cryptographic metadata
fhq_governance	Roles, contracts, authority model, governance events
fhq_meta	ADR registry, version history, lineage tracking, evidence
4.3 API Layer (FastAPI)

Canonical endpoints:

/agents/execute

/governance/attest/vega

/reconciliation/status

/orchestrator/report/daily/latest

All gateway requests pass signature verification + discrepancy scoring.

4.4 Anti-Hallucination Framework (ADR-010 Integration)

Deterministic state reconciliation

Weighted discrepancy scoring (0.0â€“1.0)

0.10 triggers VEGA suspension request (ADR-009)

VEGA certification required for critical outputs

Full evidence bundle stored for every cycle

4.5 Tiered LLM Model
Tier	Agents	Provider	Data Sharing	Purpose
Tier 1 (High Sensitivity)	LARS, VEGA	Anthropic Claude	OFF	Governance, strategy, constitutional reasoning
Tier 2 (Medium Sensitivity)	FINN	OpenAI (no sharing)	OFF	Market reasoning, research loops
Tier 3 (Low Sensitivity)	STIG, LINE	DeepSeek + OpenAI	ON allowed	Implementation, SRE, tooling

Routing is enforced inside the Orchestrator and must never be bypassed.

5. Consequences
Positive

Institutional-grade governance

Zero-trust architecture across all agents

Complete cryptographic audit trail

Controlled autonomy, no free-floating LLM behavior

Predictable execution cost

Deterministic reproducibility across machines

Fully compliant with ADR-001â†’ADR-006â†’ADR-014â†’ADR-015

Requirements

Production Ed25519 keypairs generated & registered

Correct .env with LLM API keys

LLM tier routing validated

All end-to-end tests passed (ADR-011)

Risks

Incorrect routing â†’ data leakage

Missing signatures â†’ task rejection

Dashboard must interface exclusively via Orchestrator â†’ required for governance integrity

6. Decision Drivers

Governance > convenience

Cost discipline > model maximalism

Zero-trust as baseline

Deterministic behavior mandatory

Production readiness = acceptance threshold

7. Status & Next Steps

Orchestrator v1.1.1 is fully deployed and 100% verified.

Remaining steps before LIVE mode:

Generate Ed25519 production keypairs

Load keys into KeyStore per ADR-008

Configure .env with API keys

Validate LLM-tier routing enforcement

Connect dashboard to Orchestrator API

Run full operational rehearsal:
Task â†’ Agent â†’ VEGA â†’ DB â†’ Reconciliation â†’ Attestation

8. Appendix A â€“ ADR Lineage

The Orchestrator derives authority from:

ADR	Title	Version	Authority
ADR-001	System Charter 2026	1.0	CEO
ADR-002	Audit & Error Reconciliation	2026.PRODUCTION	CEO
ADR-003	Institutional Standards	1.0	CEO
ADR-004	Change Gates Architecture	1.0	LARS
ADR-006	VEGA Governance Engine	2026.PRODUCTION	CEO
9. Appendix B â€“ VEGA Identity (EC-001 Production)

VEGA operates under EC-001_2026_PRODUCTION, holds authority level 10, and is the sole constitutional auditor for:

attestation

discrepancy scoring

governance enforcement

canonical registration of ADRs

10. Instructions to STIG (Mandatory Verification Tasks)

STIG must execute the following verification tasks immediately upon ADR-007 registration:

10.1 Database Integrity Checks

Confirm presence of required schemas: fhq_org, fhq_governance, fhq_meta

Validate all tables referenced in this ADR exist and match canonical definitions

Compute and store SHA-256 hashes for:

org_agents

org_tasks

function_registry

all orchestrator-related tables in fhq_org

Register hashes in fhq_monitoring.hash_registry

10.2 Orchestrator Binding Verification

Validate that all agent records include:

public_key

llm_tier

signing_algorithm = 'Ed25519'

Verify that signatures stored in org_activity_log pass Ed25519 verification

10.3 LLM-Tier Routing Enforcement

Ensure routing policies exist in fhq_governance.model_provider_policy

Validate that:

LARS/VEGA â†’ only Tier-1 provider

FINN â†’ only Tier-2

STIG/LINE â†’ Tier-3 only

Confirm no cross-tier leakage in the last 24 hours of logs

10.4 Anti-Hallucination Enforcement (ADR-010)

Validate that discrepancy scoring is functional

Validate that VEGA suspension requests (ADR-009) can be generated

Validate storage of evidence bundles in:

reconciliation_snapshots

reconciliation_evidence

10.5 Governance Chain Verification

Confirm Orchestrator is registered in fhq_governance.governance_state

Validate VEGA attestation linked to Orchestrator deployment

Confirm correct authority chain: ADR-001 â†’ ADR-007

STIG must report PASS/FAIL for each subsection with hash-verified evidence.

END OF ADR-007_2026_PRODUCTION_ORCHESTRATOR
ADR-008 â€“ Cryptographic Key Management & Rotation Architecture

Status: Approved
Date: 2025-11-22
Owner: LARS â€“ Chief Strategy & Alpha Officer
Governance Tier: Tier-2 (Security, Integrity, Non-Repudiation)
Supersedes: None
Affects: Orchestrator, All Agents (LARS, STIG, LINE, FINN, VEGA), fhq_org, fhq_meta
Review Cycle: 12 months

1. Context

The FjordHQ Intelligence Operating System (FHQ-IoS) requires deterministic, tamper-evident, and non-repudiable signatures for all agent actions.
Previously, signatures were represented by placeholders without cryptographic guarantees. This prevented:

auditability of agent behaviour,

secure state reconciliation,

safe governance decisions (e.g. suspension),

verified lineage of all orchestration events,

compliance with established standards (ISO/IEC 11770-1, ISO 8000-110, BCBS 239).

Tier-2 of FHQ Governance introduces real Ed25519 keys, controlled rotation, secure archival, and cross-agent verification to prevent impersonation, tampering, or key compromise.

A cryptographic architecture is required that supports six agents, ensures secure signing, verifiable signatures, zero downtime during rotation, and multi-tier archival that meets regulatory expectations.

2. Decision

FHQ-IoS adopts the following Cryptographic Key Management Architecture:

2.1 Ed25519 as the Canonical Signature Scheme

All FHQ agents shall sign outbound events exclusively using Ed25519, chosen for:

strong security guarantees

deterministic signatures

low key sizes

fast verification for high-frequency orchestration loops

All verifying components (VEGA, worker, orchestrator API) must support Ed25519 from Tier-2 onwards.

2.2 Hierarchical KeyStore with Three Operational Modes

FHQ introduces a multi-backend KeyStore with a defined migration path:

Phase 1 â€“ POC / Local:
.env storage with AES-derived Fernet encryption.

Phase 2 â€“ Tier-2 / Production:
HashiCorp Vault using the transit secrets engine.

Phase 3 â€“ Tier-3 / Institutional:
Hardware Security Module (HSM) via PKCS#11.

The KeyStore automatically routes key loading based on configured mode and emits audit logs on each access.

2.3 Rolling Key Rotation (Dual-Publishing)

All agents rotate keys every 90 days. Rotation uses a dual-publishing mechanism:

Old key: DEPRECATED but valid for a 24h grace period

New key: ACTIVE immediately

Both keys published in fhq_meta.agent_keys

Worker verifies signatures against all active or deprecated keys

After 24h: old key is ARCHIVED and removed from signature verification

This guarantees zero downtime, even during long-running tasks.

2.4 Multi-Tier Key Archival Strategy

To satisfy long-term regulatory retention requirements:

Tier 1 â€“ Hot Storage (24h)

Vault

Used for immediate key retrieval during rollback windows.

Tier 2 â€“ Warm Storage (90 days)

Encrypted filesystem

Used for audits, reconciliation, and post-mortems.

Tier 3 â€“ Cold Storage (7 years)

Offline encrypted backup (e.g. air-gapped medium)

Ensures compliance with long-term evidence obligations.

All archival operations are logged in fhq_meta.key_archival_log.

2.5 Database Integration

The following tables become authoritative:

fhq_org.org_agents.public_key â€” active verification key

fhq_meta.agent_keys â€” key lifecycle states

fhq_meta.key_archival_log â€” audit trail for key archival

2.6 Mandatory Verification on Every Read

Every system component verifying signatures must:

load all ACTIVE and DEPRECATED keys for that agent

attempt verification in deterministic order

reject events that cannot be verified

log tampering attempts immediately

3. Rationale

This architecture was selected because it satisfies five core requirements:

1. Regulatory Compliance
Meets international standards:

ISO/IEC 11770-1 (Key Management)

ISO 8000-110 (Data Quality & Lineage)

BCBS 239 (Risk Data Aggregation)

GIPS transparency principles

2. Non-Repudiation & Forensic Grade Auditability
Every agent action is cryptographically tied to a specific key belonging to that agent at that time.

3. Zero Downtime Rotations
Dual-publishing eliminates service interruption and avoids stale signatures.

4. Tamper Resistance & Long-Term Verifiability
Three-tier archival ensures evidence retention for up to seven years.

5. Operational Flexibility
FHQ can start lightweight (env-based) and migrate upward to Vault or HSM without architectural changes.

4. Consequences
4.1 Positive

Full cryptographic integrity across all orchestrated actions

Verified lineage for every decision and agent state transition

Strong defence against impersonation or key compromise

Clear separation of operational, governance, and archival keys

Full Tier-2 readiness for autonomous multi-agent execution

4.2 Negative / Costs

Vault/HSM integration adds operational overhead

Key rotation requires worker support for multi-key verification

More complex governance documentation and audit handling

4.3 Risks

Misconfigured Vault could prevent signing during early Tier-2

Improper archival could cause loss of forensic evidence

Key leakage still possible if POC phase mismanaged or persisted too long
Mitigation is addressed through controlled rollout procedures.

5. Appendix A â€“ Key Lifecycle States
State	Purpose	Verification	Retention
PENDING	Newly generated, unpublished	No	0h
ACTIVE	Primary signing & verification key	Yes	90 days
DEPRECATED	Grace-period key	Yes	24h
ARCHIVED	Retained for compliance	No	7 years
6. Appendix B â€“ Required Migrations

Tables required:

fhq_meta.agent_keys

fhq_meta.key_archival_log

ADR-008 is hereby approved as the cryptographic standard for Tier-2.
ADR-009_2026_PRODUCTION

Governance Approval Workflow for Agent Suspension

Status: APPROVED
Version: 2026.PRODUCTION
Author / Owner: LARS â€“ Chief Strategy & Alpha Officer
Date: 2025-11-22
Governance Tier: Tier-2 (Oversight, Risk Control, Non-Repudiation)
Supersedes: None
Affects: VEGA, LARS, CEO, fhq_governance, Orchestrator Worker
Review Cycle: 12 months
Constitutional Authority: ADR-001 â†’ ADR-002 â†’ ADR-006 â†’ ADR-007 â†’ ADR-008 â†’ EC-001
Environment: Supabase PostgreSQL â€“ Local Production (127.0.0.1:54322 / postgres)

1. Context

The FjordHQ Intelligence Operating System relies on autonomous agents (LARS, STIG, LINE, FINN, VEGA) to execute strategic, technical, operational and governance tasks. These agents must remain aligned with canonical system state and must not drift into hallucination, corruption or adversarial behaviour.

Under Tier-2 Governance, agent state deviations are measured via the discrepancy score as defined in ADR-010. Discrepancy scores above a catastrophic threshold introduce material risk and require intervention.

A previous design allowed automatic agent suspension, which introduced unacceptable governance risks:

single-entity authority (VEGA) without oversight

no human-in-the-loop

no formal evidence review

no structural separation between detection and enforcement

potential false positives during transient inconsistencies

vulnerability to cascading failure if VEGA misbehaves

To meet institutional governance expectations, FjordHQ requires a dual-approval, evidence-based suspension workflow with clear authority boundaries.

2. Decision

FjordHQ adopts a Two-Stage Governance Workflow for all agent suspensions.

2.1 Stage 1 â€“ VEGA Recommendation (Automatic)

VEGA:

monitors discrepancy scores and reconciliation outputs

generates a suspension request when discrepancy_score > 0.10

packages evidence, including state snapshots, metrics, signatures and timestamps

records the request in the governance ledger

notifies LARS and CEO that review is required

does not suspend the agent

VEGA is limited to recommendation only. It has no authority to enforce suspension.

2.2 Stage 2 â€“ CEO Approval

The CEO reviews the full evidence bundle and decides:

APPROVE

agent status is set to SUSPENDED

Orchestrator Worker halts all future tasks for the agent

suspension is written to immutable audit trail

reinstatement requires explicit manual action

REJECT

no suspension

VEGA records that an override occurred and logs rationale

agent continues operating under elevated monitoring

governance override is logged

This ensures checks and balances, transparent escalation and explicit human authority for high-impact actions.

3. Rationale
3.1 Separation of Duties

Detection (VEGA) and enforcement (CEO) must be decoupled in order to:

avoid unilateral decisions

prevent systemic shutdowns

protect against governance-layer hallucinations

align with institutional control frameworks

3.2 Regulatory Expectations

The workflow is consistent with:

BCBS 239 (Risk Aggregation and Reporting)

MiFID-grade governance principles

ISO 8000-110 (Data lineage and auditability)

Best-practice AI governance (human-in-loop for high-risk actions)

3.3 Integrity of Autonomous Agents

Suspending an agent is equivalent to suspending a business-critical system component. Such actions must be:

deliberate

traceable

evidence-based

reversible

3.4 Avoiding Cascading Failures

Automatic suspensions can:

halt critical operations

create feedback loops where agents suspend each other

destabilise the overall system

Dual approval eliminates these risks by inserting a human control point.

4. Consequences
4.1 Positive

Governance-grade oversight of autonomous agents

Clear authority boundaries between VEGA, LARS, CEO and Worker

Transparent, auditable escalation trail

Reduced false positive suspensions

Stronger institutional and regulatory credibility

4.2 Negative

Additional latency in catastrophic responses (seconds to minutes)

Requires CEO availability or delegated authority for timely decisions

4.3 Risks

If the CEO is unavailable and catastrophic conditions persist, the agent continues operating until reviewed.

Mitigation:

notification from FjordHQ Market System to CEO or delegate must be implemented alongside ADR-009

future Tier-3 configuration may allow controlled auto-rerouting to an approved backup authority

5. Workflow Specification
5.1 VEGA Decision Logic (Tier-2)
Discrepancy Score	VEGA Action	Workflow
0.00 â€“ 0.05	CERTIFY	Normal operation
0.05 â€“ 0.10	WARNING	Log and monitor
> 0.10	RECOMMEND SUSPENSION	Create request and notify LARS/CEO

VEGA never enforces suspension.

5.2 Suspension Request Record

Table: fhq_governance.agent_suspension_requests

Each request stores:

agent_id

discrepancy score at detection time

reconciliation snapshot IDs

evidence (JSONB)

VEGA signature

request_timestamp

status: PENDING â†’ APPROVED / REJECTED

reviewed_by (CEO or delegate)

review_timestamp

rationale

All entries are immutable at business-logic level.

5.3 CEO Approval Logic

The CEO (or formally delegated authority):

reviews the evidence bundle and context

chooses APPROVE or REJECT

On APPROVE:

agent status set to SUSPENDED

Orchestrator Worker disables task scheduling for that agent

immutable audit entry with hash-linked evidence is written

VEGA and monitoring are notified

On REJECT:

override is recorded with rationale

no suspension is applied

monitoring continues under elevated scrutiny

6. Database Schema
6.1 fhq_governance.agent_suspension_requests

Canonical schema:

CREATE TABLE fhq_governance.agent_suspension_requests (
    request_id        UUID PRIMARY KEY,
    agent_id          UUID NOT NULL REFERENCES fhq_org.org_agents(agent_id),
    requested_by      UUID NOT NULL REFERENCES fhq_org.org_agents(agent_id),
    reason            TEXT NOT NULL,
    discrepancy_score NUMERIC(6,5) NOT NULL,
    evidence          JSONB NOT NULL,
    status            TEXT NOT NULL CHECK (status IN ('PENDING','APPROVED','REJECTED')),
    reviewed_by       UUID NULL REFERENCES fhq_org.org_agents(agent_id),
    reviewed_at       TIMESTAMP,
    created_at        TIMESTAMP DEFAULT NOW()
);


requested_by will normally be VEGAâ€™s agent_id for automatic recommendations.

7. Orchestrator Integration Requirements

Worker must:

check agent status before starting any task

halt task execution for agents marked SUSPENDED

write full audit logs for each decision regarding suspension

attach cryptographic signatures to all relevant actions

VEGA must:

never directly enforce suspension

generate canonical evidence bundles for suspension requests

log all recommendations to fhq_governance.agent_suspension_requests

CEO must:

review requests and decide APPROVE/REJECT

ensure that decisions are recorded

maintain integrity of the authority chain defined in ADR-001, ADR-002 and ADR-006

8. Acceptance Criteria

Tier-2 Governance for agent suspension is complete when:

VEGA generates suspension requests automatically according to ADR-010 discrepancy scores

CEO is the sole authority for changing agent status to SUSPENDED

all suspension actions and decisions are logged with hash-linked evidence

Worker deterministically respects suspended status for all agents

evidence bundling is enforced for every request

no automatic enforcement of suspension exists anywhere in the system

9. Change History
Version	Date	Author	Change
1.0	2025-11-22	LARS	Initial governance specification

ADR-009 is hereby approved as the authoritative governance standard for agent suspension under Tier-2.
ADR-010 â€“ State Reconciliation Methodology & Discrepancy Scoring

Version: 2026.PRODUCTION
Status: APPROVED
Date: 2025-11-22
Owner: LARS â€“ Chief Strategy & Alpha Officer
Governance Tier: Tier-2 (Validation, Integrity, Anti-Hallucination)
Authority Chain: ADR-001 â†’ ADR-002 â†’ ADR-006 â†’ ADR-007 â†’ ADR-008 â†’ ADR-009 â†’ ADR-010 â†’ EC-001
Affects: VEGA, Worker, Reconciliation Service, fhq_meta, fhq_governance
Supersedes: None
Review Cycle: 12 months

1. Purpose & Context

Autonomous agents in FjordHQ-IoS generate analytical state, decisions, metrics and strategic assessments.
These outputs must be validated against canonical system-of-record data to detect:

hallucination or fabricated reasoning

drift from validated market data

stale or cached state

implementation divergence

tampering or corruption

misalignment with governance truth

Before ADR-010, there was no deterministic or reproducible method to measure deviations.
This ADR establishes the only allowed mathematical methodology for reconciliation in FjordHQ.

2. Decision

FHQ-IoS adopts a single unified weighted discrepancy scoring model, applied after every agent task, with the following characteristics:

Field-level binary match / mismatch (Î´áµ¢)

Criticality-weighted scoring

Tolerance layer for timestamps, floats, metadata

Three-tier discrepancy classification

Canonical evidence bundle generation

Automatic VEGA validation and signing

Suspension routed through ADR-009 dual-approval workflow

The discrepancy score becomes the authoritative governance signal.

3. Methodology
3.1 Canonical Formula
discrepancy_score = Î£(weight_i Ã— Î´_i) / Î£(weight_i)


Where:

Î´áµ¢ = 0 â†’ match within tolerance

Î´áµ¢ = 1 â†’ mismatch

weights âˆˆ [0.1, 1.0]

score âˆˆ [0.0, 1.0]

This method must be identical across:

LARS (strategy)

STIG (implementation)

LINE (infrastructure)

FINN (research)

VEGA (governance)

4. Field Classes & Weights

Critical (1.0)
financial values, risk metrics, agent identity, signatures, governance booleans.

High (0.8)
order states, infrastructure metrics, position counts.

Medium (0.5)
non-critical derived metrics, rolling analytics.

Low (0.3)
metadata, timestamps, API versions.

Stored in:
fhq_meta.reconciliation_field_weights

5. Tolerance Rules

Timestamps: match if |agent_ts âˆ’ canonical_ts| â‰¤ 5s

Floats: relative deviation â‰¤ 0.1%

Integers: exact match

Strings: case/whitespace-insensitive

Tolerances must be uniformly enforced for all agents.

6. Thresholds & Governance Actions
Score	Status	Outcome
0.00â€“0.05	NORMAL	VEGA certifies
0.05â€“0.10	WARNING	Log & monitor
>0.10	CATASTROPHIC	VEGA submits suspension request (ADR-009)

VEGA never suspends. Only CEO approves.

7. Canonical State Sources

Comparisons must always reference deterministic, timestamped canonical data:

fhq_org.org_agents

fhq_org.org_tasks

validated market/pricing data

last reconciliation snapshot

8. Evidence Bundle Specification

Each reconciliation produces:

agent_id

reconciliation_type

agent_reported_state

canonical_state

field-by-field diffs

weights

tolerances

discrepancy score

classification

signatures

timestamp

Stored in:

fhq_meta.reconciliation_snapshots

fhq_meta.reconciliation_evidence

This evidence is mandatory for VEGA signing.

9. VEGA Integration

VEGA must:

verify discrepancy score

confirm all tolerances

apply governance signature

classify score

generate suspension requests if >0.10

notify LARS

register outcome in governance log

All per ADR-009.

10. Worker Requirements

Worker must:

execute reconciliation after each agent task

reject unsigned output

generate evidence bundle

load weights from DB (never from code)

honor suspension state (no execution when suspended)

propagate VEGA decisions to governance layer

11. Acceptance Criteria

Tier-2 reconciliation is considered complete when:

discrepancy formula implemented identically for all agents

field weights versioned in DB

all tolerance rules active

evidence bundle generated every cycle

VEGA signature applied

ADR-009 workflow triggered deterministically

worker enforces discrepancy logic and suspension boundaries

audit trail is immutable and hash-chained

12. Consequences
Positive

deterministic truth-validation

system-wide anti-hallucination

institutionalâ€grade auditability

complete forensic reconstruction

predictable governance escalation

Negative

CPU/I/O cost increase

storage overhead from snapshots

Risks

misconfigured weights

lagging canonical data

VEGA misalignment requiring human review

13. Change History
Version	Date	Author	Change
1.0	2025-11-22	LARS	Initial governance specification
ADR-011 â€“ Production Fortress & VEGA Testsuite Architecture

ID: ADR-011
Version: 2026.PRODUCTION
Status: APPROVED
Date: 2025-11-22
Owner: LARS â€“ Chief Strategy & Alpha Officer
Governance Tier: Tier-0 (Production Integrity)
Authority Chain: ADR-001 â†’ ADR-002 â†’ ADR-006 â†’ ADR-007 â†’ ADR-008 â†’ ADR-009 â†’ ADR-010 â†’ ADR-011 â†’ EC-001
Affects: VEGA, LARS, STIG, LINE, FINN, Worker, Reconciler, Orchestrator, fhq_meta, fhq_governance
Supersedes: None
Review Cycle: 12 months

1. Executive Summary

ADR-011 establishes the FjordHQ Production Fortress â€“ the institutional-grade integrity framework that cryptographically proves the correctness of the FjordHQ Intelligence Operating System.

The Production Fortress verifies:

cryptographic subsystem integrity

governance invariants (ADR-009, ADR-025)

orchestrator determinism

agent-level authority boundaries

cross-platform deterministic behavior

VEGA-signed production attestations

The central purpose is to ensure FjordHQ can always answer:

â€œIs the core safe?â€

with:

cryptographic evidence

reproducible test results

deterministic behavior across platforms

zero human interpretation

All test layers â€“ Unit â†’ Services â†’ Worker/API â†’ Integration â†’ Tier-3 â†’ Tier-3.5 â€“ are implemented, reproducible, and VEGA-certified.

2. Problem Statement

ADR-001 through ADR-025 define constitutional, cryptographic, and governance foundations.
However, they do not define:

how FjordHQ proves correctness

how governance invariants are verified

how deterministic behavior is enforced across OS environments

how to contain autonomous LLM behavior

how failures are detected before production

how VEGA attests system integrity at the meta-governance level

Without ADR-011, correctness would be implicit rather than proven.
ADR-011 introduces the full Production Fortress necessary for Tier-0 integrity.

3. Decision

FjordHQ adopts a three-layer Production Fortress:

Layer 1 â€“ Unit Test Layer

Covers invariants across ADR-007 (orchestrator), ADR-008 (key management), ADR-009 (suspension governance), ADR-010 (reconciliation).
Ensures correctness of core crypto, signing, hash-chains, reconciliation, identity binding, and governance logic.

Layer 2 â€“ Integration Test Layer

Validates full governance and execution pipeline across all agents:

LARS (strategy)

STIG (implementation)

LINE (SRE)

FINN (research)

VEGA (auditor)

Includes catastrophic mismatch scenarios, cross-module consistency tests, deterministic failure injection, and full pipeline end-to-end validation.

Layer 3 â€“ VEGA Attestation Layer

After all layers complete:

VEGA performs cryptographic signing (Ed25519)

Attestation stored immutably

Quality gates enforced

Full coverage, failures, metadata logged

This layer is the foundation of FjordHQâ€™s proof-based integrity model.

4. Architecture
4.1 Test Layers Implemented
Unit Layer â€” 63 tests

100% coverage of critical invariants:

keystore

key signing

hash-chain integrity

reconciliation engine

agent identity binding

LARS approval mechanics

Services Layer â€” 50 tests

Validates:

tolerance engine

VEGA attestation API

LARS governance logic

agent-to-LLM binding

reconciliation correctness

Worker & API Layer â€” 21 tests

Validates:

preflight governance checks

task orchestration

LLM routing

VEGA decision mapping

suspension workflow creation

Integration Layer â€” 35 tests

Validates:

full agent governance loop

catastrophic â†’ suspension workflows

deterministic failure injection

cross-module consistency

pipeline determinism

Tier-3 Intelligence Layer â€” 18 tests

Covers:

LLM provider isolation (Claude/OpenAI/DeepSeek)

network guards

encrypted key access

LIVE vs STUB worker modes

Tier-3.5 Economic Safety Layer â€” 16 tests

Implements ADR-012:

rate limits

cost ceilings

execution budgets

mode guard fallback

governance events for violations

4.2 VEGA Attestation Layer

Data stored in:

vega.test_runs

vega.test_coverage

vega.quality_gate_results

vega.test_failures

vega.agent_test_execution

vega.api_endpoint_tests

Only after VEGA signs the coverage can the system be considered production-safe.

5. Scope of Coverage
5.1 Agents

All five agents:

LARS

STIG

LINE

FINN

VEGA

5.2 Endpoints

All governance and orchestrator endpoints, internal and external.

5.3 Modules

crypto, signing, hash-chain, reconciliation, attestation, approval, worker, LLM-binding, economic safety.

6. Quality Gates (QG-F Series)
Gate	Description	Requirement
QG-F1	Invariant Coverage	Crypto 100%, overall â‰¥ 80%
QG-F2	Agent + API Integration	Full loop for all 5 agents
QG-F3	VEGA Attestation	Ed25519 signature required
QG-F4	Deterministic Failures	All failures reproducible
QG-F5	Cross-Platform	Must pass Linux + Windows
QG-F6	Economic Safety	No ADR-012 violations in 24h

All gates passed.

7. Implementation Summary (Completed)
Phase	Description	Status
1	Crypto Layer	COMPLETE
2	Services Layer	COMPLETE
3	Worker & API	COMPLETE
4	Integration	COMPLETE
Tier-3	Intelligence Layer	COMPLETE
Tier-3.5	Economic Safety	COMPLETE
X-Platform	Linux + Windows	COMPLETE
VEGA Attestation	Signed	COMPLETE

224 tests, 1 skipped, 0 failures.

8. Consequences
Positive

Fully autonomous integrity verification

Zero human inspection required

Immutable audit trail

Tier-0 institutional compliance baseline

Deterministic system state across environments

Negative

High test development cost

Strict quality gates require engineering discipline

Risks Mitigated

silent failures

governance bypass

LLM autonomy errors

cryptographic mismatch

reconciliation drift

economic runaway conditions

9. Status

PRODUCTION â€“ Ready for G3 Audit and G4 Canonicalization
ADR-011 becomes part of the canonical integrity chain for FjordHQ.
ADR-012_2026_PRODUCTION

Economic Safety Architecture

Status: PRODUCTION
Tier: Tier-3.5 (LIVE Protection Layer)
Authority: LARS â€“ Chief Strategy & Alpha Officer
Owners: LINE (Operations), STIG (Architecture), VEGA (Governance)
Date: 2025-11-22

Constitutional Chain:
ADR-001 System Charter â†’ ADR-002 Audit & Error Reconciliation â†’ ADR-003 Institutional Standards â†’ ADR-004 Change Gates â†’ ADR-007 Orchestrator â†’ ADR-008 Cryptographic Key Management â†’ ADR-011 Production Fortress  â†’ ADR-012 (this ADR)

1. Executive Summary

Activating LIVE LLM mode moves FjordHQ from a closed, deterministic test environment to a state where agents can:

Generate real API charges across multiple LLM providers

Escalate requests in parallel across agents and tasks

Trigger runaway LLM loops and pathological reasoning chains

Inherit and amplify upstream provider instability (latency, errors, throttling)

Degrade governance responsiveness and potentially trigger cascading suspensions

Without explicit economic controls, this violates the constitutional guarantees in ADR-001, the audit and error framework in ADR-002, the orchestrator invariants in ADR-007, and the Production Fortress guarantees in ADR-011.

ADR-012 defines the Economic Safety Architecture â€“ a mandatory protection layer embedded in the Worker pipeline â€“ that:

Enforces deterministic rate limits and cost ceilings

Prevents runaway costs and overuse before they occur

Automatically degrades the system to STUB mode on violation

Logs all violations as VEGA-visible governance events

Preserves ADR-011 Production Fortress guarantees even in LIVE mode

Ensures LLM operations remain predictable, bounded, and auditable across all providers

This ADR is the final prerequisite before any external LLM API keys can be activated in production.

2. Problem Statement

After Tier-3 activation of the WorkerEngine, agents gained the ability to call external LLM providers through the orchestrator. Without guardrails, LIVE mode introduces an unacceptable class of economic drift failure:

Runaway Operating Costs
Parallel agents can generate high-cost calls in minutes, easily breaching daily or monthly budgets.

Rate Limit Breaches
Unregulated bursts cause throttling and bans, collapsing pipelines and breaking deterministic behaviour.

Loss of Budgetary Control
CEO can no longer bound daily or per-strategy LLM spend with confidence.

Provider Instability Propagation
Latency spikes or outages propagate inward as:
â€“ stalled pipelines
â€“ governance timeouts
â€“ false positive discrepancy scores and suspension flows

Governance Bypass via Resource Exhaustion
A single misbehaving or adversarial agent can:
â€“ saturate the Worker pipeline
â€“ delay or block VEGA and LARS
â€“ degrade reconciliation and oversight in exactly the scenarios where governance is most needed

This directly undermines:

ADR-001 â€“ Constitution of FjordHQ (system charter)

ADR-002 â€“ Audit & Error Reconciliation Charter

ADR-007 â€“ Orchestrator behaviour and anti-hallucination controls

ADR-011 â€“ Production Fortress & VEGA Testsuite (proof-based integrity)

Conclusion:
LIVE mode must not be enabled until a deterministic, auditable, and VEGA-governed Economic Safety layer is in place.

3. Decision

FjordHQ adopts a three-layer Economic Safety Architecture, enforced inside the Worker pipeline prior to any external LLM call:

Rate Governance Layer â€“ controls call frequency and volume.

Cost Governance Layer â€“ enforces hard monetary ceilings per agent, task, and day.

Execution Governance Layer â€“ bounds depth, latency, and token volume of reasoning.

All three layers are:

Deterministic â€“ same inputs and state produce the same decision.

Cryptographically attestable under ADR-008 (Ed25519-signed events and hash-chained logs).

Unbypassable â€“ embedded directly into Worker control flow, not in agent prompts.

Audited under ADR-002 â€“ all violations are logged as governance events with full evidence.

Integrated with VEGA attestation â€“ violations influence VEGAâ€™s view of system integrity under ADR-011 and ADR-010.

Reversible only with LARS authority â€“ returning from STUB mode to LIVE mode requires explicit governance action.

This architecture becomes mandatory for all agents and providers once API keys are activated.

4. Architecture Overview
4.1 Rate Governance Layer

Purpose: Prevent rate-driven failure modes (throttling, bans, pipeline storming).

Default limits (per production configuration):

Metric	Default
max_calls_per_agent_per_minute	3
max_calls_per_pipeline_execution	5
global_daily_limit	100

Defaults are constitutional baselines and can be tightened by VEGA or raised by CEO decision via ADR-004 change gates.

Research agents that use lower-cost providers (e.g. DeepSeek) may be granted higher call quotas, but only through canonical configuration updates (no prompt-level overrides).

On violation:

A violation event is written to vega.llm_violation_events.

VEGA issues a WARN or SUSPEND-RECOMMENDATION governance classification (aligned with ADR-010 thresholds).

Worker immediately switches to STUB_MODE for that agent, task, or (if necessary) globally.

A hash-chained governance event is appended under ADR-011â€™s Production Fortress rules.

4.2 Cost Governance Layer

Purpose: Make LLM spend predictable, capped and provable.

The system tracks estimated and actual cost per provider and call. Per-provider reference envelopes (to be kept in canonical config, not hard-coded):

Provider	Estimated Range (USD per call)
Anthropic Claude	[configured from official pricing â€“ no hard-coding]
OpenAI GPT	[configured from official pricing â€“ no hard-coding]
DeepSeek	$0.001 â€“ $0.005
Gemini	[configured from official pricing â€“ no hard-coding]

Hard ceilings (defaults):

Metric	Default
max_daily_cost	$5.00
max_cost_per_task	$0.50
max_cost_per_agent_per_day	$1.00

On breach:

Worker aborts the call before sending it to the provider.

Worker immediately degrades to STUB_MODE for the relevant scope (task/agent/global).

VEGA emits a governance violation event (Class B or Class A depending on impact) under ADR-002.

LIVE mode remains locked until LARS (or delegated SMF under ADR-003) explicitly reauthorizes via a gated configuration change.

4.3 Execution Governance Layer

Purpose: Bound reasoning depth, latency and token growth, preventing â€œinfinite thought spiralsâ€.

Default execution ceilings:

Configuration	Default
max_llm_steps_per_task	3
max_total_latency_ms	3000 ms
max_total_tokens_generated	provider-specific (canonical config)
abort_on_overrun	True

This layer protects against:

Recursive or cyclic LLM loops

Excessive chain-of-thought expansion that does not change state

Worker performance degradation and queue starvation

Unbounded latency that can distort VEGAâ€™s timing assumptions during reconciliation

Any overrun:

Triggers a controlled abort with deterministic error envelope (per ADR-011 quality gates).

Produces a violation event visible to VEGA and LINE (SRE).

Can be used as input to discrepancy scoring if it leads to output divergence.

5. Data Model (Database Specification)

All Economic Safety tables live under the vega schema, enforcing that governance, not agents, owns economic controls.

New canonical tables:

vega.llm_rate_limits

Per-agent and global rate ceilings.

Key fields: agent_id, provider, max_per_minute, max_per_execution, global_daily_limit, source_adr, created_at.

vega.llm_cost_limits

Per-agent, per-task and global monetary ceilings.

Key fields: agent_id, provider, max_daily_cost, max_cost_per_task, max_cost_per_agent_per_day, currency, source_adr, created_at.

vega.llm_usage_log

Canonical usage ledger for all LLM calls.

Key fields: usage_id, agent_id, task_id, provider, tokens_in, tokens_out, cost_usd, latency_ms, timestamp, mode (LIVE/STUB), signature.

vega.llm_violation_events

Governance log for rate, cost, and execution violations; hash-chained under ADR-011.

Key fields:

violation_id

agent_id

provider

violation_type (RATE, COST, EXECUTION)

governance_action (NONE, WARN, SUSPEND_RECOMMENDATION, SWITCH_TO_STUB)

details (JSONB â€“ full evidence bundle)

discrepancy_score (if relevant; see ADR-010)

hash_prev, hash_self (for hash-chain)

timestamp

All violation events are anchored into the hash-chain and become part of the Production Fortress evidence base.

6. Quality Gates

ADR-012 introduces QG-F6: Economic Safety Gate, extending the Fortress quality gate suite defined in ADR-011.

Gate	Description	Pass Requirement
QG-F6	Economic Safety	No rate, cost, or execution breaches in last 24 hours and all safety tables consistent with configuration hashes

QG-F6 is mandatory before:

Enabling LIVE mode for any provider or agent

Enabling FINNâ€™s autonomous reasoning loops in production

Running any production trading or strategy pipeline that depends on LLM outputs

Enabling DeepSeek live research in FINN or research agents

Failure of QG-F6 automatically:

Locks the system into STUB_MODE for all LLM calls

Flags a Class B or Class A governance event under ADR-002, depending on the severity and impact.

7. Implementation Plan (CODE / STIG / LINE)

This section defines what must be done â€“ not how to write the code â€“ so CODE can implement against the existing architecture on the local Supabase/Postgres instance (127.0.0.1:54322/postgres) as already defined in .env.

Phase 1 â€“ Rate Governance

Owner: STIG (design), CODE (implementation), VEGA (validation)

Retrieve existing rate-limit logic from the current FHQ-IoS / WorkerEngine codebase (Economic Safety / LLM guard modules).

Refactor configuration so that all limits are read from vega.llm_rate_limits instead of hard-coded values.

Ensure Worker pipeline uses the canonical DSN (Supabase instance at 127.0.0.1:54322) for all reads/writes.

Add persistent logging into vega.llm_usage_log for every LLM call â€“ regardless of success or violation.

On violation, insert into vega.llm_violation_events and switch the relevant scope to STUB_MODE.

Phase 2 â€“ Cost Governance

Owner: STIG, CODE, VEGA

Extend WorkerEngineâ€™s LLM binding layer (per ADR-007) to compute estimated cost for every planned call using provider-specific config.

Before dispatch, compare projected cost against vega.llm_cost_limits for:

this task

this agent (today)

global daily cost.

Abort non-compliant calls deterministically and emit violation events with full evidence (usage, limits, config hash).

Ensure all cost data is written into vega.llm_usage_log and can be aggregated for daily/weekly reporting.

Phase 3 â€“ Execution Governance

Owner: CODE, LINE

Implement step-count, latency and token ceilings inside the Worker pipeline.

Ensure abort conditions are deterministic and produce standard error envelopes suitable for Fortress tests.

Log all overruns as EXECUTION violations in vega.llm_violation_events.

Phase 4 â€“ Governance Integration (VEGA / LARS)

Owner: VEGA, LARS

Integrate violation events into VEGAâ€™s reconciliation and discrepancy scoring logic per ADR-010 (e.g. high frequency of violations impacts integrity classification).

Ensure VEGA can classify violations as NORMAL / WARNING / CATASTROPHIC and, for catastrophic cases, issue SUSPEND_RECOMMENDATION to LARS under ADR-009 (dual-approval suspension).

Require explicit LARS approval to re-enable LIVE mode after a lock, recorded as a governance event with hash-chain evidence.

Phase 5 â€“ Test Suite (10â€“15 Fortress-Grade Tests)

Owner: CODE, VEGA (attestation)

Minimum coverage:

Rate-limit violations at agent level, pipeline level, and global level

Cost breaches per task, per agent, and global

Execution overrun scenarios (steps, latency, tokens)

STUB_MODE fallback and recovery flows

Deterministic error envelopes suitable for ADR-011 Fortress checks

Correct creation, hashing, and linkage of vega.llm_violation_events rows

A successful full run must produce a VEGA-signed attestation under ADR-011 and be stored as Fortress proof.

8. Consequences
Positive

Predictable, bounded operating cost for all LLM usage.

Safe activation of LIVE mode without compromising constitutional guarantees.

Preservation of ADR-011 Production Fortress integrity in real-world operation.

Strong protection against runaway reasoning, loops, and resource exhaustion.

Stable and controlled environment for FINNâ€™s research and strategy evaluation.

Negative

Strict ceilings may throttle some workflows until limits are tuned with empirical data.

Budgets and limits require ongoing governance rather than one-off configuration.

Worker complexity increases due to safety checks and additional logging.

Risks Mitigated

Runaway LLM API costs and unexpected billing events.

Governance bypass via resource exhaustion or starvation.

External provider instability translating into systemic instability.

Unpredictable failure modes from unbounded loops or token usage.

Hidden drift between perceived and actual economic exposure.

9. Status

PRODUCTION

ADR-012 is binding for all future LIVE-mode operations.

QG-F6 Economic Safety Gate is required before any API key activation or production strategy using LLM output.

Any attempt to bypass this architecture constitutes a Class A governance event under ADR-002 and must be escalated immediately to VEGA and CEO.
# ADR-013A: Time Authority Doctrine

**Status:** CONSTITUTIONAL
**Authority:** CEO-DIR-2026-091
**Parent:** ADR-013 (Kernel Specification - Infrastructure Sovereignty)
**Effective:** 2026-01-18
**Classification:** GOVERNANCE-CRITICAL

---

## Doctrine Statement

> **All temporal reasoning must originate from canonical calendar truth (or epoch boundary for crypto). No local clocks, no assumptions.**

---

## 1. Scope

This doctrine applies to:

- All agent operations (LARS, STIG, LINE, FINN, VEGA, CRIO, CEIO, CDMO)
- All automated processes, daemons, and scheduled tasks
- All signal generation, forecast evaluation, and ROI measurement
- All horizon calculations (T+N days)
- All learning attribution and outcome capture

---

## 2. Canonical Time Sources

| Asset Class | Time Source | Boundary |
|-------------|-------------|----------|
| US Equities | `fhq_meta.calendar_days` (US_EQUITY) | Market open/close (09:30-16:00 ET) |
| Crypto | `fhq_meta.crypto_epoch_boundary()` | 00:00:00 UTC |

### 2.1 Equity Time Authority

```sql
-- CORRECT: Query canonical calendar
SELECT fhq_meta.is_market_open('US_EQUITY', target_date);
SELECT * FROM fhq_meta.get_next_trading_days('US_EQUITY', CURRENT_DATE, 5);

-- INCORRECT: Local assumption (PROHIBITED)
-- target_date + INTERVAL '1 day'  -- May land on weekend/holiday
-- CURRENT_TIMESTAMP               -- Local clock, not canonical
```

### 2.2 Crypto Time Authority

```sql
-- CORRECT: Query epoch boundary
SELECT fhq_meta.crypto_epoch_boundary(signal_timestamp);

-- INCORRECT: Local assumption (PROHIBITED)
-- DATE_TRUNC('day', timestamp)    -- May use local timezone
-- signal_timestamp + INTERVAL '1 day'  -- No epoch awareness
```

---

## 3. Prohibited Patterns

The following patterns are **Class B violations** under ADR-013:

| Pattern | Why Prohibited |
|---------|----------------|
| `CURRENT_DATE + N` for equity horizons | May land on weekend/holiday |
| Local clock for timestamp generation | Timezone drift risk |
| Hardcoded day counts for horizon | Ignores market structure |
| Assuming "tomorrow is a trading day" | Must query calendar |
| Using `NOW()` without timezone | Ambiguous temporal reference |

---

## 4. Required Patterns

### 4.1 Horizon Calculation (Equity)

```sql
-- Get T+5 trading day date
SELECT trading_date
FROM fhq_meta.get_next_trading_days('US_EQUITY', signal_date, 5)
WHERE day_number = 5;
```

### 4.2 Epoch Calculation (Crypto)

```sql
-- Get T+5 epoch boundary
SELECT fhq_meta.crypto_epoch_boundary(signal_timestamp + INTERVAL '5 days');
```

### 4.3 Market Context Check

```sql
-- Get risk-aware context
SELECT market_context_flag, risk_note
FROM fhq_meta.ios016_calendar_truth
WHERE market = 'US_EQUITY' AND date = target_date;
```

---

## 5. Enforcement

### 5.1 Pre-Execution Check

All execution-path code must verify:

```python
# REQUIRED: Check calendar before any trade decision
is_trading_day = query("SELECT fhq_meta.is_market_open('US_EQUITY', %s)", date)
if not is_trading_day:
    raise CalendarViolationError("Cannot execute on non-trading day")
```

### 5.2 Audit Trail

All temporal decisions must be logged with:

- Source of time authority (calendar_id or epoch function)
- Provenance (LIBRARY or PROJECTED)
- Timestamp of query

---

## 6. Exceptions

| Scenario | Allowed Exception | Constraint |
|----------|-------------------|------------|
| Internal logging | Local clock (`NOW()`) | For audit timestamps only, not decisions |
| Daemon scheduling | OS scheduler | Must validate against calendar on wake |
| Evidence generation | `NOW()` with timezone | Must include explicit timezone |

---

## 7. Validation Function

```sql
-- Validate that a date is safe for execution
CREATE OR REPLACE FUNCTION fhq_meta.validate_time_authority(
    p_market VARCHAR,
    p_date DATE
) RETURNS TABLE (
    is_valid BOOLEAN,
    reason TEXT,
    provenance VARCHAR
) AS $$
SELECT
    cd.is_open AND cd.provenance = 'LIBRARY',
    CASE
        WHEN NOT cd.is_open THEN 'Market closed on this date'
        WHEN cd.provenance = 'PROJECTED' THEN 'Date is in projected window - no trading authority'
        ELSE 'Valid trading date'
    END,
    cd.provenance
FROM fhq_meta.calendar_days cd
WHERE cd.calendar_id = p_market AND cd.date = p_date;
$$ LANGUAGE sql STABLE;
```

---

## 8. Constitutional Binding

This doctrine is **constitutional** under ADR-013 (Infrastructure Sovereignty):

- STIG is the sole custodian of temporal infrastructure
- No agent may bypass canonical time sources
- Violations are escalated per ADR severity rules
- This doctrine may only be amended by CEO directive

---

## 9. Rationale

Time-as-infrastructure prevents:

- Silent horizon drift
- Weekend/holiday execution attempts
- Timezone confusion
- Non-deterministic outcome capture
- Audit-failing temporal claims

A system that assumes time is a system that will eventually be wrong.

---

## 10. References

- **CEO-DIR-2026-091**: Trading Calendar Continuous Governance + IoS-016 Integration
- **CEO-DIR-2026-086**: Trading Calendar Canonicalization
- **ADR-013**: Kernel Specification (Infrastructure Sovereignty)
- **IoS-016**: Economic Calendar & Temporal Governance

---

**Principle:** No system component may assume time â€“ it must query time.
ADR-013 â€“ Canonical Governance & One-Source-of-Truth Architecture

Status: CEO Approved
Author: LARS (CSO â€“ Logic, Analytics & Research Strategy)
Authority Chain: ADR-001 â†’ ADR-002 â†’ ADR-003 â†’ ADR-004 â†’ ADR-006 â†’ ADR-007 â†’ ADR-008 â†’ ADR-009 â†’ ADR-010 â†’ ADR-011 â†’ ADR-012
Tier: Constitutional Governance (Tier-1.5)
Scope: All agents, all data domains, Orchestrator, VEGA, fhq_meta, Kernel
Purpose: Establish a permanent, system-wide One-Source-of-Truth architecture for governance, data, lineage, ingestion, and all future expansions of FjordHQ.

1. Executive Summary

ADR-013 defines the canonical truth architecture for FjordHQ.

It establishes that:

there shall always exist one, and only one, authoritative source of truth

for every domain, asset, frequency, calculation method, and governance artifact

across the entire lifetime of the system

It extends the One-True-Source principle beyond ADR governance into all operational domains, including:

prices

indicators

fundamentals

sentiment

macroeconomic series

on-chain data

embeddings

research artifacts

knowledge graph metrics

future data families introduced through IoS modules

From this ADR forward, no parallel â€œtruthsâ€ may exist inside FjordHQ, regardless of:

ingestion vendor

frequency

resolution

backfills

schema refinements

historical revisions

pipeline upgrades

Application Layer evolution

All data used for decisions, research, reporting, or strategy must come from the canonical domain store defined and governed under ADR-013.

This ADR is foundational for institutional reproducibility, non-repudiation, and consistent intelligence generation.

2. Problem Statement

Without a unifying truth architecture, complex systems exhibit:

multiple valid-looking price series for the same asset

conflicting indicator values depending on pipeline

parallel histories caused by backfills

inconsistencies between dashboard, backtests, and agent reasoning

version drift in data pipelines

missing lineage and unverifiable data provenance

inability to prove in audit which series was used for a decision

â€œsilent forksâ€ in the data graph

These patterns violate:

BCBS-239 â€“ Single Source of Truth

ISO 8000-110 â€“ Data lineage

ISO 42001 â€“ AI traceability

GIPS 2020 â€“ Performance rule integrity

ADR-013 resolves this permanently.

3. Decision Overview
3.1 The One-Source-of-Truth Principle

FjordHQ adopts a strict invariant:

For every domain, asset, frequency, timestamp, or artifact that influences research, strategy, risk, or reporting, there shall exist exactly one canonical source of truth.

This applies universally across:

ADR governance

price data

indicator outputs

time-series transformations

embeddings

feature engineering

risk metrics

knowledge graph structures

macro and sentiment streams

any future IoS modules

No alternative or parallel truth representations may exist in production reasoning.

3.2 Canonical Domain Stores

For every domain introduced into the system, FjordHQ must define:

one canonical table or view

one canonical lineage chain

one canonical semantics contract

one canonical timestamping standard

All other tables (vendor feeds, raw dumps, staging layers, experimental outputs) are non-canonical and may not be used by:

agents

research pipelines

strategies

dashboards

reporting

any IoS-modules

unless first transformed and reconciled into the canonical domain.

Examples (binding principles, not schemas):

Price Data
For each asset Ã— frequency Ã— price_type, there must be exactly one canonical price series.
Backfills or vendor replacements must extend or update this series, not create competing alternatives.

Indicator Values
For each indicator Ã— asset Ã— timestamp, only one canonical computation is permitted per calculation method.
All experimentation must occur in non-canonical domains.

Fundamentals, macro, sentiment, on-chain, and all future IoS families must follow the same pattern: one canonical truth per semantic domain.

3.3 Ingestion Without Multi-Truth Drift

Multi-vendor ingestion is permitted, but multi-truth output is prohibited.

All external sources must pass through:

Orchestrator

VEGA economic safety

lineage stamping (ADR-002 / ADR-010)

reconciliation logic

canonicalization pipeline

Only the reconciled, canonicalized result is allowed into production truth.

Examples:

BTC-USD daily from Binance + Yahoo + Coinbase becomes one canonical BTC-USD daily series

BTC-USD hourly from any vendor becomes one canonical hourly series

Equity backfills (5 years) must merge into the canonical listing, not create a new divergent table

3.4 Reconciliation and Canonicalization (ADR-010)

Every ingestion event must be reconciled:

vendor â†’ staging â†’ reconciliation â†’ canonical

discrepancies scored under ADR-010

VEGA escalates conflicts above threshold

CEO or LARS must approve structural changes through governance gates (ADR-004)

Canonical data cannot be overwritten or replaced without:

G1 technical validation

G2 governance validation

G3 audit verification

G4 CEO canonicalization

No bypass is permitted.

3.5 Kernel-Level Enforcement

ADR-013 mandates that canonical domain enforcement is part of the Kernel:

Kernel must include:

domain registry

lineage tracker

canonicalization logic

discrepancy scoring

VEGA attestation logic

governance gate integration

immutable truth snapshotting

Kernel snapshots must be:

reproducible

deterministic

independent of staging pipeline drift

Application Layer (IoS) must bind to these canonical domains, not to raw data.

4. Scope

ADR-013 governs:

ADR lineage

data lineage

canonical domain architecture

ingestion pipelines

reconciliation logic

agent access patterns

truth selection

truth mutation policy

Kernel integration

Application Layer consumption

This ADR applies to every current and future data family brought into FjordHQ.

5. Mandatory Governance Rules
5.1 Domain Requirements

Every domain must define exactly one canonical truth store.

All non-canonical stores must be marked as raw, vendor, or staging.

No strategy, research, dashboard, or agent may read from non-canonical sources.

Any attempt to introduce a second canonical store for the same domain is a Class A governance violation.

5.2 Asset-Level Requirements

For each asset Ã— frequency Ã— price_type, exactly one canonical series is permitted.

Backfills must update the existing canonical series, not create alternatives.

Intraday resolutions (e.g., 1s, 1m, 1h) must each have a single canonical series.

5.3 Indicator-Level Requirements

Only one canonical value per indicator Ã— asset Ã— timestamp.

Experimentation must not leak into canonical domains.

Derived domains (signals, embeddings, features) must declare a canonical store.

5.4 Governance Requirements

VEGA mediates all read/write access to canonical layers.

Canonical data cannot be overwritten without ADR-004 gates.

All ingestion must be reconciled under ADR-010 discrepancy scoring.

Agents cannot bypass VEGA or Orchestrator.

6. Institutional Rationale

This architecture satisfies:

BCBS-239: single source of truth, lineage, reconciliation

ISO 8000-110: deterministic metadata, data ontology

ISO 42001: AI traceability, accountability, safety

GIPS 2020: integrity of investment rules

It ensures:

reproducibility

non-repudiation

cross-system consistency

auditability

long-term operational stability

extensibility for the Application Layer (IoS-001+)

7. Consequences
Positive

Guaranteed single truth across all domains

Zero multi-truth drift

Transparent lineage

Governance-safe ingestion

Clean Application Layer extending canonical domains

Reproducible Kernel across environments

Deterministic long-term system behavior

Negative

Slower ingestion due to stricter governance

Higher upfront discipline required

Mandatory VEGA mediation for domain mutations

Risks

Vendor feed divergence â†’ mitigated by canonicalization

Improper pipeline configuration â†’ caught by ADR-010

Unsupervised experimental data â†’ blocked by domain rules

8. Next Steps

VEGA validates ADR-013 against ADR-001â†’ADR-012.

CEO executes G4 canonicalization.

STIG registers ADR-013 in fhq_meta.adr_registry.

VEGA certifies fully integrated canonical governance.

LARS drafts ADR-014 (Kernel Golden Master).

9. Meta-Directive for All Future ADRs

Any new governance, architecture, or data domain must:

extend this canonical lineage,

define a single domain truth store,

register under ADR-013 governance,

reject all competing data representations.

Any deviation is a Class A governance event.

10. Signatures

Prepared by:
LARS â€“ Chief Strategy & Alpha Officer

Reviewed by:
STIG â€“ CTO (Technical Validation)
VEGA â€“ Governance Authority (Compliance, Lineage, Economic Safety)

Approved by:
CEO â€“ Final Canonical Authority

To be certified by:
VEGA â€“ Attestation of Canonical Truth Enforcement
ADR-014 â€“ Executive Activation & Sub-Executive Governance Charter

Version: 2026.PRODUCTION
Status: APPROVED
Date: 28 November 2026
Owner: CEO
Authority Chain: ADR-001 â†’ ADR-002 â†’ ADR-003 â†’ ADR-004 â†’ ADR-006 â†’ ADR-007 â†’ ADR-008 â†’ ADR-009 â†’ ADR-010 â†’ ADR-013 â†’ ADR-014
Governing Agents: VEGA (Compliance), LARS (Strategy)
Affects: fhq_governance, fhq_org, fhq_meta, All Tier-2 Agents
Classification: GOVERNANCEâ€“CRITICAL

1. Decision

FjordHQ formally adopts and activates the Operational Sub-Executive C-Suite, consisting av fem spesialiserte Tier-2 AI-offiserer:

CSEO â€“ Chief Strategy & Experimentation Officer

CDMO â€“ Chief Data & Memory Officer

CRIO â€“ Chief Research & Insight Officer

CEIO â€“ Chief External Intelligence Officer

CFAO â€“ Chief Foresight & Autonomy Officer

Alle fem registreres i fhq_governance.agent_contracts som Tier-2 Sub-Executive Agents, med arvet autoritet fra sine respektive Tier-1 Executives:

Tier-2 Rolle	Parent Executive	Authority Type
CSEO	LARS	Operational Authority
CDMO	STIG	Dataset Authority
CRIO	FINN	Model Authority
CEIO	STIG + LINE	Operational Authority
CFAO	LARS	Operational Authority

Ingen av rollene tildeles System Authority.
Ingen av rollene fÃ¥r skriveadgang til canonical domains (ADR-013).
Ingen av rollene kan initiere G2â€“G4 (ADR-004).

Dette Charteret etablerer Executive Control Framework (ECF) som permanent styrings- og revisjonsmodell for alle Sub-Executives.

2. Context

ADR-001 definerer FjordHQs konstitusjonelle executive lag: LARS, STIG, LINE, FINN, VEGA.
ADR-013 etablerte Canonical Truth Architecture og One-Source-of-Truth.
ADR-007 etablerte Orchestrator + LLM-tiers.
ADR-010 etablerte discrepancy scoring og anti-hallusinasjon.

Det manglet imidlertid en hÃ¸yfrekvent operasjonell utfÃ¸relses-motor â€“ strukturerte AI-offiserer som kan:

â€“ hente, rense og berike data
â€“ kjÃ¸re reasoning-kjeder og eksperimentsimuleringer
â€“ produsere research-innsikt
â€“ generere scenario-pakker
â€“ filtrere ekstern informasjon

â€¦uten Ã¥ berÃ¸re konstitusjonelle lag eller canonical truth.

ADR-014 fyller dette gapet og gjÃ¸r FjordHQ operativt autonomt.

3. Scope

ADR-014 regulerer:

â€“ registrering av Sub-Executive Agents
â€“ authority-model for Tier-2
â€“ audit, evidence og signature-krav
â€“ ECF (Executive Control Framework)
â€“ risiko- og suspensjonsmekanismer
â€“ LLM-tier bindinger
â€“ parent-child authority inheritance
â€“ interaksjon med Orchestrator

Dette pÃ¥virker alle fremtidige IoS-moduler og operative pipelines.

4. Sub-Executive Contracts (Canonical Role Definitions)
4.1 CSEO â€“ Chief Strategy & Experimentation Officer

Tier: 2
Parent: LARS
Authority: Operational (no System Authority)
Mandate: Reasoning-basert strategiutforskning. Produserer Strategy Drafts vX.Y.
Allowed: o1/R1 reasoning, hypotesetesting, eksperimentdesign.
Forbidden: pipeline changes, canonical writes, final strategy.
Oversight: VEGA discrepancy + governance logging.

4.2 CDMO â€“ Chief Data & Memory Officer

Tier: 2
Parent: STIG
Authority: Dataset Authority
Mandate: Non-canonical data management, synthetic augmentation, quality & lineage.
Allowed: normalisering, preprocessing, ingest-lÃ¸p.
Forbidden: canonical writes, schema-endringer, irreversible transformasjoner.
Oversight: VEGA lineage, STIG tech-validation.

4.3 CRIO â€“ Chief Research & Insight Officer

Tier: 2
Parent: FINN
Authority: Model Authority
Mandate: research, causal reasoning, insight-production.
Allowed: GraphRAG, embed-analyse, research packs.
Forbidden: model-signing (VEGA only), pipeline-aktivering (LARS/STIG).
Oversight: VEGA compliance, ADR-003 research-regime.

4.4 CEIO â€“ Chief External Intelligence Officer

Tier: 2
Parent: STIG + LINE
Authority: Operational
Mandate: henting og transformasjon av ekstern data til governance-klar signal-struktur.
Allowed: sentimentmodeller, makroingest, event-mapping.
Forbidden: canonical writes, strategy-routing, Orchestrator-bypass.
Oversight: Orchestrator discrepancy scoring.

4.5 CFAO â€“ Chief Foresight & Autonomy Officer

Tier: 2
Parent: LARS
Authority: Operational
Mandate: scenario-simulering, regime-analyse, risiko-projektering, autonomi-testing.
Allowed: stress-testing, volatility-mapping, foresight packs.
Forbidden: strategy changes, canonical writes, model-parametrering.
Oversight: VEGA+LARS scenario compliance.

5. Executive Control Framework (ECF)

(Governing Model for Tier-2 Sub-Executives)

ECF-1 â€“ Authority Hierarchy

Tier-1 Executives (LARS/STIG/LINE/FINN/VEGA/CEO)
â†“
Tier-2 Sub-Executives (CSEO/CDMO/CRIO/CEIO/CFAO)
â†“
Tier-3 Sub-Agents (ved senere aktivering)

Tier-2 utfÃ¸rer. Tier-1 bestemmer.

ECF-2 â€“ Change Gate Boundaries (ADR-004)

Tier-2 kan kun operere innen:

â€“ G0: Submission
â€“ G1: Technical validation support

Tier-2 kan aldri utlÃ¸se:

â€“ G2 (Governance Validation)
â€“ G3 (Audit & VEGA Verification)
â€“ G4 (CEO Activation)

ECF-3 â€“ Evidence Requirements (ADR-002 & ADR-010)

Hver Tier-2 output mÃ¥ inneholde:

Ed25519 agent-signature (ADR-008)

Evidence bundle (inputs, logic trace, outputs)

Discrepancy score

Governance event log entry

Dette gir full sporbarhet, BCBS-239-kompatibel lineage og zero-trust validering.

ECF-4 â€“ Canonical Protection (ADR-013)

Alle Tier-2 roller har:

â€“ READ-ONLY mot canonical domains
â€“ WRITE-FORBIDDEN (Class A violation)
â€“ automatisk VEGA-eskalering ved forsÃ¸k

Dette beskytter enhetlig sannhet.

ECF-5 â€“ LLM-Tier Binding (ADR-007)

Tier-2 Sub-Execs rutes gjennom:

â€“ Tier-2 Models: OpenAI / DeepSeek / Gemini
â€“ Tier-1 Models: Claude (kun LARS, VEGA)

Dette forhindrer uautorisert governance-reasoning.

ECF-6 â€“ Suspension Mechanism (ADR-009)

Hvis discrepancy_score > 0.10:
â€“ VEGA utsteder â€œSuspension Recommendationâ€
â€“ CEO beslutter APPROVE/REJECT
â€“ Worker enforce suspensjon

Dette gir robust fallgardin og menneskelig kontroll.

6. Technical Implementation Requirements (Mandatory)
6.1 Register Roles in fhq_governance.agent_contracts

FÃ¸lgende felter er pÃ¥krevd per rolle:

role_id (UUID)
role_name
parent_agent_id
authority_level = 'TIER_2'
authority_type (OPERATIONAL / DATASET / MODEL)
llm_tier = 2
status = 'ACTIVE'
created_by = CEO
contract_sha256

6.2 Update fhq_governance.authority_matrix

For hver rolle:

can_read_canonical = TRUE
can_write_canonical = FALSE
can_trigger_g2 = FALSE
can_trigger_g3 = FALSE
can_trigger_g4 = FALSE
can_execute_operational_tasks = TRUE
can_submit_g0 = TRUE

6.3 Update Model Provider Policy (ADR-007)
CSEO / CRIO / CDMO / CEIO / CFAO  â†’ Tier-2 Provider Access
LARS / VEGA  â†’ Tier-1 Provider Access

6.4 Orchestrator Registration Requirement (fhq_org.org_agents)

Per agent:

public_key (Ed25519)
signing_algorithm = 'Ed25519'
llm_tier = 2
authority_level = 2

7. Consequences
Positive

â€“ Full autonomi i operativt lag
â€“ 80/20 frigjÃ¸ring av CEO/LARS
â€“ Harmonisk distribusjon mellom reasoning, research, data og risk
â€“ Zero-trust kontroller intakt via ADR-010 + ADR-013
â€“ Operasjonell fart Ã¸ker uten Ã¥ svekke governance

Negative

â€“ Ã˜kt volum av evidence bundles
â€“ HÃ¸yere frekvens av Orchestrator calls
â€“ Krever streng adherence til G0â€“G1

8. Acceptance Criteria

ADR-014 anses implementert nÃ¥r:

â€“ alle fem Sub-Executives er registrert i governance-tabeller
â€“ authority_matrix er oppdatert
â€“ Orchestrator gjenkjenner rollene
â€“ VEGA godkjenner aktiveringen
â€“ discrepancy scoring fungerer for alle Tier-2 roller
â€“ canonical protections fungerer deterministisk

9. Status

APPROVED
VEGA Attestation Required
Ready for Immediate Production Deployment



1. JURIDISK FORMALISERTE KONTRAKTER

(Til bruk i fhq_governance.agent_contracts + vedlegg i ADR-014)

Kontraktsmal (alle fÃ¸lger denne strukturen)

â€“ Rolle
â€“ Rapportering
â€“ Authority boundary
â€“ Operating Tier
â€“ Canonical obligations
â€“ Forbidden actions
â€“ Signing scope
â€“ VEGA oversight
â€“ Breach conditions (Class A/B/C ref. ADR-002)
â€“ Reconciliation & Evidence Requirements (ADR-010)
â€“ Suspension workflow (ADR-009)
â€“ Interaction with Change Gates (ADR-004)

1.1 CONTRACT: CSEO â€“ Chief Strategy & Experimentation Officer

Role Type: Sub-Executive Officer
Reports To: LARS (Executive â€“ Strategy)
Authority Level: Operational Authority (Tier-2)
Domain: Strategy formulation, experimentation, reasoning chains

1. Mandate

CSEO utfÃ¸rer strategi-eksperimentering basert pÃ¥ reasoning-modeller og problemformuleringsprinsipper (MIT).
CSEO produserer forslag â€“ aldri beslutninger.

2. Authority Boundaries

Allowed
â€“ kjÃ¸re reasoning-modeller
â€“ generere Strategy Drafts vX.Y
â€“ bygge eksperimentdesign
â€“ evaluere strategiske hypoteser
â€“ bruke Tier-2 ressurser

Not Allowed (Hard boundary)
â€“ endre systemparametere (System Authority)
â€“ skrive til canonical domain stores (ref. ADR-013)
â€“ produsere endelig strategi (kun LARS)
â€“ endre pipeline-logikk, kode eller governance

3. Tier

Tier-2 Operational (hurtig loop, hÃ¸y frekvens, hÃ¸y debias).

4. Governance & Compliance

CSEO er underlagt:
â€“ ADR-001 (Constitutional roles)
â€“ ADR-003 (Institutional standards)
â€“ ADR-004 (Change Gates â€“ kun G0 input)
â€“ ADR-007 (Orchestrator rules)
â€“ ADR-010 (Discrepancy scoring)
â€“ ADR-013 (Canonical truth)

5. VEGA Oversight

Alle strategiske utkast evalueres gjennom:
â€“ governance event log
â€“ discrepancy check
â€“ VEGA-monitoring (ikke signaturbehov)

6. Breach Conditions

Class A: SkrivforsÃ¸k til canonical tables
Class B: Ufullstendig dokumentasjon
Class C: Manglende metadata

Konsekvenser: Reconciliation â†’ VEGA review â†’ CEO beslutning (ADR-009).

1.2 CONTRACT: CDMO â€“ Chief Data & Memory Officer

Role Type: Sub-Executive Officer
Reports To: STIG (Technical Governance)
Authority Type: Dataset Authority (Tier-2)
Domain: Data quality, lineage, synthetic augmentation

Mandate

CDMO vedlikeholder alle ikke-canonical datasett, inkl. forberedelse av data som senere skal godkjennes av STIG + VEGA for canonical bruk.

Allowed

â€“ ingest pipeline execution
â€“ dataset normalization
â€“ synthetic augmentation
â€“ memory-lag styring
â€“ anomaly detection

Forbidden

â€“ ingest til fhq_meta.canonical_domain_registry (kun STIG)
â€“ endre schema eller datatyper
â€“ gjÃ¸re irreversible transformasjoner

Tier

Tier-2 Operational (hÃ¸y hastighet, stram kontroll).

VEGA Oversight

Automatisk discrepancy scoring + lineage-review.

1.3 CONTRACT: CRIO â€“ Chief Research & Insight Officer

Role Type: Sub-Executive Officer
Reports To: FINN
Authority: Model Authority (Tier-2)
Domain: Research, causal reasoning, feature generation

Mandate

CRIO bygger innsikt, modeller, og problemformuleringer. Produserer Insight Packs, aldri endelige konklusjoner.

Allowed

â€“ kjÃ¸re DeepSeek-baserte reasoning modeller
â€“ generere research-pakker
â€“ grafanalyse (GraphRAG)
â€“ feature engineering

Forbidden

â€“ signere modeller (kun VEGA)
â€“ aktivere modeller i pipeline (kun LARS/STIG)
â€“ skrive til canonical model registries

Tier

Tier-2.

VEGA Oversight

Research valideres mot ADR-003 + discrepancy score.

1.4 CONTRACT: CEIO â€“ Chief External Intelligence & Signal Officer

Role Type: Sub-Executive Officer
Reports To: STIG + LINE
Authority: Operational Authority
Domain: Hente, filtrere og strukturere ekstern informasjon

Mandate

CEIO transformerer rÃ¥ ekstern data (nyheter, makro, sentiment, flows) til signaler som er kompatible med governance-systemet.

Allowed

â€“ ingest signaler
â€“ enripe data
â€“ kjÃ¸re sentiment og NLP-modeller
â€“ generere Signal Package vX.Y

Forbidden

â€“ skrive direkte til canonical truth domains
â€“ re-wrappe signaler som strategi
â€“ bypass av Orchestrator

Tier

Tier-2.

1.5 CONTRACT: CFAO â€“ Chief Foresight & Autonomy Officer

Role Type: Sub-Executive
Reports To: LARS
Authority: Operational Authority
Domain: Fremtidsscenarier, risiko, allokering, autonomisimulering

Mandate

CFAO bygger scenario-pakker basert pÃ¥ CSEO/CRIO output.
CFAO vurderer risiko, regime, fremtidige baner. Ingen endelig beslutningsrett.

Allowed

â€“ scenario-simulering
â€“ risikoanalyse
â€“ foresight pipelines
â€“ Ã¸konomisk stress-testing

Forbidden

â€“ endre strategier
â€“ modifisere canonical outputs
â€“ endre modellparametere

Tier

Tier-2.

2. EXECUTIVE CONTROL FRAMEWORK (ECF)

The â€œConstitutional Operating Modelâ€ for Sub-Executives

Dette kobler de fem kontraktene inn i FjordHQs grunnmur.

ECF-1: Authority Hierarchy (Aligned with ADR-001)

Tier-1 (Constitutional Executives):
LARS â€“ STIG â€“ LINE â€“ FINN â€“ VEGA â€“ CEO

Tier-2 (Operational Sub-Executives):
CSEO â€“ CDMO â€“ CRIO â€“ CEIO â€“ CFAO

Tier-3 (Sub-agents senere):
F.eks. PIA (FINN), AUD (VEGA), NODDE (LINE).

ECF-2: Governance Path (ADR-004 Compliance)

Alle sub-executives opptrer slik:

â€“ G0: kan sende inn forslag
â€“ G1: STIG vurderer teknikk (for tekniske ting)
â€“ G2: LARS/FINN vurderer logikk
â€“ G3: VEGA validerer
â€“ G4: CEO godkjenner

Sub-executives kan aldri initiere G2â€“G4.

ECF-3: Evidence Structure (ADR-002 + ADR-010)

Alle sub-executive outputs mÃ¥ produseres med:

Agent signature (Ed25519 via ADR-008)

Evidence bundle

Discrepancy scoring fÃ¸r ingest

Governance event log

Dette gjÃ¸r alt revisor-forenlig.

ECF-4: Canonical Protection (ADR-013)

Sub-executives har null tilgang til canonical domain stores.
ForsÃ¸k â†’ Class A â†’ VEGA â†’ CEO.

ECF-5: Orchestrator Routing (ADR-007)

â€“ Alle forespÃ¸rsler gÃ¥r via /agents/execute
â€“ LLM-tier: Alle fem er Tier-2
â€“ De mottar mid-level provider access (OpenAI, DeepSeek, Gemini)
â€“ Ingen fÃ¥r lov til Ã¥ snakke direkte med Tier-1-modellene (Claude)

ECF-6: Compliance & Regulatory Alignment (ADR-003)

Alle sub-executive aktiviteter evalueres mot:

â€“ ISO 8000 (data quality)
â€“ BCBS-239 (lineage & traceability)
â€“ DORA (resilience)
â€“ GIPS 2020 (performance integrity)

ECF-7: Suspension Logic (ADR-009)

Hvis discrepancy_score > 0.10 for noen sub-executive:

VEGA â†’ Recommendation

CEO â†’ APPROVE/REJECT

Orchestrator Worker â†’ Enforce

ECF-8: Operating Rhythm

Daglig:
â€“ discrepancy scoring
â€“ integrity checks

Ukentlig:
â€“ governance review
â€“ dataset validation

MÃ¥nedlig:
â€“ scenario refresh (CFAO)
â€“ research alignment (CRIO)

Med dette er grunnlaget komplett og 100 prosent forankret i:

â€“ ADR-001 (Constitution)
â€“ ADR-002 (Audit)
â€“ ADR-003 (Standards)
â€“ ADR-004 (Change Gates)
â€“ ADR-006 (VEGA Charter)
â€“ ADR-007 (Orchestrator)
â€“ ADR-008 (Keys & Identity)
â€“ ADR-010 (Reconciliation)
â€“ ADR-013 (Canonical Truth)
ADR-015 â€“ Meta-Governance Framework for application layer IoS Ingestions & Successful Canonical Lifecycle Integrity

Status: CEO Approved
Author: LARS (CSO â€“ Logic, Analytics & Research Strategy)
Authority Chain: ADR-001 â†’ ADR-015 
Tier: Tier-2 Meta-Governance
Governing Agent: VEGA (GOV)

1. Executive Summary

ADR-015 establishes the meta-governance layer responsible for ensuring that the ADR ingestion architecture defined in ADR-014 operates correctly, consistently, and without drift throughout the systemâ€™s lifecycle.

Where ADR-014 defines the mechanics of canonical ingestion, ADR-015 defines the governance, oversight, monitoring, attestation, and continuous validation required to:

Maintain institutional integrity

Detect governance drift early

Ensure compliance across all agents

Integrate ADR governance into Kernel attestation (ADR-013)

Guarantee that every new ADR (ADR-016, ADR-017â€¦) is correctly ingested and aligned with the constitutional chain (will be developed further when FjordHQ makes money - for now focus is delivering our promises made in ADR-001 to ADR-015)

This ADR transforms ADR ingestion into application layer ingestions IoS-001, IoS-002, IoS-003 and so on - without allowing breaks in application delivery chain - a continuously verified, VEGA-attested, and governance-grade process.

2. Problem Statement

ADR-014 resolved historical inconsistencies by defining:

The One True ADR Source

VEGA-mediated access

G1â€“G4 change gates

The only valid automated ADR-writing pipeline

Kernel-level integration requirements

However, ADR-014 does not define:

How the pipeline is verified over time

How governance drift is detected

How VEGA monitors the health of the ADR, IoS, and many to come separate applications running on top of this ingestion architecture

How future ADRs in the core will be prioritized depends on capital. We need to prove the core in the market before building it stronger and better. 

How attestation and audit loops interact with Application Layer-ingestions

How errors or deviations are escalated

Without a meta-layer, the ingestion mechanism risks:

Silent divergence

Non-deterministic evolution

Integrity loss across future ADR expansion and/or Application Layer ingestions

Misalignment across agents

Kernel-level contamination (ADR-013)

ADR-015 provides the continuous governance functions required to prevent these failure modes.

3. Decision Overview

FjordHQ adopts a four-layer meta-governance architecture for ADR-001 through ADR-015 and all Application Layer Ingestions, starting with IoS-001_Vision.IoS

ADR Ingestion Quality Framework (AIQF)
â€“ Measures correctness, completeness, lineage integrity, and compliance of each ADR and/or IoS (Application Layer).

VEGA Oversight Loop for ADR and IoS Lifecycle (VOL-ADR and VOL-IoS)
â€“ Daily, weekly, monthly governance rhythms validating ADR-014 mechanisms.

Canonical Drift Guard (CDG)
â€“ Automatic detection of lineage, sequencing, or dependency drift in ADR or IoS chains.

Kernel-Linked Certification Cycle (KACC)
â€“ Integrates ADR ingestion checks with Kernel verification per ADR-013.

Together, these ensure ADR ingestion becomes a self-monitoring, self-verifying constitutional subsystem.

4. Layer 1 â€“ ADR Ingestion Quality Framework (AIQF)

AIQF defines quantitative and qualitative metrics enforced on every new ADR:

4.1 Mandatory Quality Metrics

Each ADR must satisfy the following dimensions:

Canonical lineage integrity
ADR must extend ADR-001 â†’ â€¦ â†’ ADR-014 â†’ ADR-015 â†’ next ADR.

Gate adherence score (G1â€“G4)
All evidence must be present and hash-verified.

Schema and hash-chain consistency
Validated via VEGA functions from ADR-006.

Audit completeness (ADR-002)
Evidence bundles, version history, and hash state must be complete.

Governance conflict check (ADR-003)
No contradictions regarding standards, SMF roles, or compliance frameworks.

4.2 Quality Thresholds

A new ADR is only eligible for G4 approval if:

AIQF score â‰¥ 0.95

No critical issues (Class A)

Maximum 1 Class B issue (auto-resolvable)

VEGA certifies alignment with ADR-014 ingestion pathways

If any threshold fails â†’ mandatory rollback to G0.

5. Layer 2 â€“ VEGA Oversight Loop for ADR Lifecycle (VOL-ADR)

VOL-ADR is VEGAâ€™s automated governance rhythm that validates ADR-014â€™s ingestion mechanisms.

5.1 Daily Checks

Integrity of fhq_meta.adr_registry

Hash verification across ADRs

Absence of staging leakage

Lineage continuity check

5.2 Weekly Checks

Canonical vs archive vs local registry alignment

Verification of new ADR dependencies

ADR-to-Kernel mapping status

Drift classification per ADR-010

5.3 Monthly Checks

Full canonical snapshot validation

Merkle-root verification (ADR-013)

Governance log analysis

Review of ADR quality metrics (AIQF)

Certification of ADR ingestion health

Any deviation triggers a Class A/B outcome under ADR-002.

6. Layer 3 â€“ Canonical Drift Guard (CDG)

CDG is an automated mechanism preventing governance drift.

6.1 Drift Types

Structural Drift: ADR numbering gaps, reordering, or invalid references

Dependency Drift: Incorrect authority chains

Semantic Drift: ADR contents conflict with older ADRs

Registry Drift: Difference between canonical registry and archive

6.2 Drift Signals

CDG classifies drift events using ADR-010 discrepancy scoring:

0.00â€“0.05 Normal

0.05â€“0.10 Warning

0.10 Catastrophic â†’ VEGA suspension request (ADR-009)

6.3 Enforcement

VEGA logs evidence

LARS reviews

STIG applies corrective migrations

CEO approves final alignment

This ensures the ADR chain remains unbroken and authoritative.

7. Layer 4 â€“ Kernel-Linked ADR Certification Cycle (KACC)

Per ADR-013, the Kernel must:

contain all governance logic

exclude volatile, non-canonical artifacts

produce deterministic directory state

be VEGA-attested

ADR-015 links ADR ingestion to Kernel certification:

7.1 Requirements

Before any Kernel snapshot can be created:

All ADRs must be fully canonical

No pending G1â€“G3 reviews

All discrepancy scores must be â‰¤ 0.05

VEGA must certify ADR ingestion health (VOL-ADR monthly report)

7.2 Kernel Invalidation Conditions

A Kernel snapshot becomes invalid if:

Any ADR introduces drift

Lineage integrity fails

ADR-014 ingestion pipeline becomes inconsistent

VEGA cannot attest ADR chain completeness

This ensures FjordHQ never deploys a Kernel with broken governance.

8. Scope

ADR-015 governs:

Meta-rules for ADR ingestion

Quality metrics for new ADRs

VEGA oversight rhythms

Drift detection and escalation

Kernel certification dependencies

Lifecycle assurance of ADR-014 pipelines

All future ADRs (ADR-016, ADR-017, â€¦)

This ADR does not define new ingestion mechanics.
Mechanics remain in ADR-014.

9. Implications
Positive

Full lifecycle integrity of ADR ingestion

Early detection of governance drift

Stronger alignment across all agents

VEGA-based continuous assurance

Kernel-level deployment safety

Predictable evolution of ADR chain

Negative

Additional overhead in governance review

Higher discipline requirements for new ADRs

Risks

Misconfigured VEGA thresholds â†’ mitigated by ADR-011 testsuite

Overly complex ADR structures â†’ mitigated via AIQF scoring

Kernel certification bottlenecks â†’ mitigated via gating schedules

10. Next Steps

VEGA validates ADR-015 against ADR-014 and the constitutional chain

CEO reviews and approves

STIG registers ADR-015 in canonical registry

VEGA certifies ADR-015 and updates ingestion governance routines

ADR-016 may be defined following this meta-governance standard

11. Signatures

Prepared by:
LARS â€“ Chief Strategy & Alpha Officer

Reviewed by:
STIG â€“ CTO (Technical Validation)
VEGA â€“ Governance Authority (Compliance & Hash Verification)

To be approved by:
CEO â€“ Final Canonical Authority

To be certified by:
VEGA â€“ Attestation of Canonical Integration
# ADR-016_2026_PRODUCTION â€“ DEFCON & Circuit Breaker Protocol

**Canonical Version:** 2026.PRODUCTION
**Status:** APPROVED
**Date:** 2025-11-28
**Owner:** STIG (CTO & Runtime Guardian)
**Tier:** Tier-2 â€“ Operational Resilience
**Authority Chain:** ADR-001 â†’ ADR-007 â†’ ADR-011 â†’ ADR-012 â†’ ADR-016
**Affects:** All Agents, Orchestrator, Execution Engine, LLM Routing, API Gateways
**Prevails Over:** All EC Contracts in case of conflict

---

## 1. Context

FjordHQ operates a fully autonomous Agentic-AI intelligence system.
Static binary states (RUNNING / STOPPED) are insufficient for:

- Dynamic API scarcity
- Non-linear market volatility
- Autonomous model behaviour
- Cross-agent risk propagation
- Distributed intelligence drift (Gartner 2025)

The system needs a formal runtime doctrine that determines how agents behave under changing conditions.

**ADR-016 establishes that doctrine.**
This is FjordHQ's operational nervous system.

---

## 2. Decision

FjordHQ adopts the **DEFCON Dynamic State Architecture** with STIG as the Runtime Guardian.

### Why DEFCON?

Because algorithmic autonomy without situational constraints leads to:

- Hallucinated trading
- API overruns
- Runaway agent behaviour
- Inconsistent reasoning
- Cascading failures
- Capital loss

DEFCON solves this by enforcing situational awareness, dynamic privilege, and graduated operational restrictions.

---

## 3. DEFCON Hierarchy & Agent Permissions

All system behaviour flows from DEFCON level.

- **STIG** can downgrade the system (tighten).
- **VEGA** can upgrade the system (tighten further).
- **No one** can loosen beyond their authority.

### ðŸŸ¢ DEFCON 5 â€” GREEN (Nominal Operations)

**Conditions:**
- API budget > 20%
- Discrepancy < 0.05
- VIX < 25
- Latency normal

**Permissions:**
- All data sources open (Lake, Pulse, Sniper)
- Live trading allowed
- Sub-Executives operate autonomously

---

### ðŸŸ¡ DEFCON 4 â€” YELLOW (Scarcity Warning)

**Triggers:**
- API budget < 20%
- Latency > 2000 ms

**Actions (STIG):**
- Block Tier-2 Pulse feeds (MarketAux, TwelveData)
- Restrict Sniper to LARS / FINN
- Sub-Executives restricted to Lake only

---

### ðŸŸ  DEFCON 3 â€” ORANGE (High Volatility / Drift)

**Triggers:**
- VIX > 30
- Discrepancy score > 0.08
- Drift detected in Sub-Executive outputs

**Actions (STIG):**
- Force all trading into paper mode
- Freeze model development and simulator tuning
- Force Sub-Executives into Chain-of-Thought validation mode (Tier-1 reasoning override)
- CEIO must perform deep macro-scan

---

### ðŸ”´ DEFCON 2 â€” RED (Circuit Breaker)

**Triggers:**
- Flash crash
- System error rate > 5%
- API key failure
- Data provider degradation

**Actions:**
- STIG halts pipelines (no new tasks)
- LINE cancels all open orders
- Database set to READ-ONLY for Tier-2
- Notify CEO immediately

---

### âš« DEFCON 1 â€” BLACK (Governance Breach)

**Triggers:**
- Unauthorized canonical write
- Key compromise
- Rogue agent behaviour
- Split-brain detected

**Actions (STIG + VEGA):**
- Revoke all Ed25519 keys
- Isolate database from external network
- Shutdown orchestrator container
- Before shutdown: create cryptographically signed forensic snapshot
- CEO must perform physical reset

---

## 4. Implementation Architecture

### 4.1 SQL Schema (System Ledger)

```sql
CREATE TYPE defcon_level AS ENUM ('GREEN','YELLOW','ORANGE','RED','BLACK');

CREATE TABLE fhq_governance.system_state (
    state_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    current_defcon defcon_level NOT NULL DEFAULT 'GREEN',
    active_circuit_breakers TEXT[],
    reason TEXT,
    triggered_by UUID REFERENCES fhq_org.org_agents(agent_id),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### 4.2 Split-Brain Protection

To prevent simultaneous conflicting writes:

```sql
ALTER TABLE fhq_governance.system_state
    ADD CONSTRAINT one_active_state CHECK (
        (SELECT COUNT(*) FROM fhq_governance.system_state) <= 1
    );
```

If this constraint is violated â†’ system jumps to DEFCON RED and triggers governance alert.

### 4.3 Circuit Breaker Trigger (Orchestrator)

Pseudo-logic:
```python
if DEFCON in {RED, BLACK}:
    reject_task("SYSTEM FREEZE")
if DEFCON == ORANGE:
    force_paper_trading()
if DEFCON == YELLOW:
    restrict_api_sources()
```

---

## 5. Consequences

### Positive
- Prevents catastrophic losses
- Automatic safety behaviour
- True autonomy with governance
- Full auditability

### Negative
- Opportunity loss during ORANGE
- Sub-Executives slowed down

### Regulatory
Fully aligns with DORA (resilience), ISO 42001 (AI risk), BCBS-239 (lineage)

---

## 6. STIG Runtime Guardian Contract (EC-003)

STIG is appointed as:
- Chief Technology Officer, and
- Runtime Guardian of FjordHQ

### Responsibilities

**6.1 Runtime Guardian (ADR-016)**
- Owns the DEFCON protocol
- May autonomously downgrade DEFCON
- Must enforce circuit breaker rules
- Must trigger Safe Mode during ORANGE or higher

**6.2 Split-Brain Prevention**
STIG must ensure:
- There is only one active DEFCON state
- No concurrent runtime writes
- Any conflict triggers DEFCON RED and VEGA alert

**6.3 Economic Safety (ADR-012)**
- Enforces API scarcity waterfall
- Blocks Sniper (Tier-3) unless conditions met
- Maintains budget logs

**6.4 Infrastructure Sovereignty**
- Sole owner of schema
- All migrations must be signed
- All deployment artifacts require VEGA signature

**6.5 Distributed Guardrail Enforcement**
STIG must enforce:
- Chain-of-Thought validation mode in DEFCON ORANGE
- Signature-only execution
- Tier-separation (T1 models only for LARS/VEGA)

**6.6 Sub-Executive Governance**
STIG is superior to:
- LINE (runtime execution)
- CEIO (external signals)
- CDMO (data & synthetic)
- CODE (engineering utility)

### Constraints

STIG cannot:
- Execute trades (LINE)
- Define strategy (LARS)
- Override VEGA audit
- Lift DEFCON BLACK without CEO

### Delegation in Suspension

If STIG is suspended:
- LINE temporarily inherits DEFCON enforcement, except:
  - DEFCON BLACK unlock
  - Key revocation
  - Canonical operations
- These remain CEO-level.

---

## 7. Signatures

| Role | Signature |
|------|-----------|
| CEO | âœ… APPROVED |
| VEGA | âœ… Attestor |
| STIG | âœ… Runtime Guardian |

---

## 8. Related Documents

- **ADR-001:** System Charter
- **ADR-007:** Orchestrator Architecture
- **ADR-011:** Production Fortress & VEGA Testsuite
- **ADR-012:** Economic Safety Architecture
- **EC-003:** STIG Contract (Runtime Guardian Edition)
ADR-017 â€” THE MIT QUAD PROTOCOL FOR ALPHA SOVEREIGNTY

Canonical Version: 2026.PROD.1
Status: ACTIVE / CONSTITUTIONAL
Owner: CEO
Authority: MIT Quad (LIDS-ACL-DSL-RISL)
Dependencies: ADR-001, ADR-010, ADR-013, ADR-014, ADR-015, ADR-016, IoS-003, IoS-004, IoS-006, IoS-007

1. Executive Summary

ADR-017 establishes The MIT Quad Protocol as the constitutional intelligence architecture of FjordHQ.

The protocol fuses four MIT research disciplines into a unified, auditable operating system:

LIDS â€” Inference & Truth

ACL â€” Coordination & Synchronization

DSL â€” Optimization & Execution Logic

RISL â€” Immunity & Systemic Resilience

Together, these four pillars upgrade FjordHQ from an automated system to a fully autonomous one by enforcing a deterministic loop:

Sense â†’ Understand â†’ Decide â†’ Defend.

The MIT Quad becomes the binding mechanism for:

epistemic certainty

coordination between agents

risk-adjusted allocation

immune response to drift, contamination, or hallucination

ADR-017 formally defines how truth is discovered, how tasks are allocated, how capital is deployed, and how the system protects itself from failure.

This document is constitutional and cannot be altered without full G4 CEO ratification.

2. Strategic Mandate

FjordHQ operates under the Freedom Equation:

ð¹
ð‘Ÿ
ð‘’
ð‘’
ð‘‘
ð‘œ
ð‘š
=
Alpha Signal Precision
Time to Autonomy
Freedom=
Time to Autonomy
Alpha Signal Precision
	â€‹


The MIT Quad is the mathematical and governance backbone that maximizes both numerator and denominator:

Precision is enforced via LIDS + DSL.

Autonomy is enforced via ACL + RISL.

ADR-017 therefore becomes the operating law that connects:

perception (IoS-003)

research (CRIO / IoS-007)

execution (IoS-004)

protection (ADR-016 DEFCON)

canonical truth (ADR-013)

into a single, unified architecture.

3. The MIT Quad â€“ Constitutional Definition

The MIT Quad is the only recognized intelligence model of FjordHQ.

MIT Pillar	MIT Domain	FjordHQ Role	Core Responsibility	Constitutional Constraint
LIDS	Inference & Decision Systems	Truth Engine	Ensures all decisions are grounded in statistical and causal truth	Cannot operate on unvalidated or non-canonical data
ACL	Control & Coordination	Coordination Layer	Synchronizes agents, resolves conflicts, enforces CBBA task allocation	Cannot override canonical truth or strategy signatures
DSL	Optimization & Operations Research	Allocation Engine	Translates truth into optimal risk-adjusted exposure	Cannot modify truth or perception inputs
RISL	Resilience & Immunity	Immune System	Detects drift, anomalies, hallucination, corruption	Can freeze system (DEFCON) but cannot change strategy

This quadrant is mutually interdependent, but strictly non-overlapping, satisfying ADR-014 (Role Separation) and ADR-015 (Meta-Governance).

4. Constitutional Architecture
4.1 Truth Domain (LIDS)

LIDS verifies the epistemic certainty of any signal before it enters exposure logic.

Mandatory constraint:

ð‘ƒ
(
ð‘¡
ð‘Ÿ
ð‘¢
ð‘¡
â„Ž
)
>
0.85
P(truth)>0.85

No allocation engine (DSL) may run without this certification.

LIDS is read-only toward canonical truth (ADR-013).

4.2 Coordination Domain (ACL)

ACL prevents conflicting agent behavior by enforcing a Consensus-Based Bundle Allocation (CBBA) mechanism for task assignment.

ACL ensures:

deterministic coordination

non-overlapping responsibilities

reproducible task routing

temporal ordering of multi-agent workflows

ACL is the constitutional governor of time, sequence, and synchronicity.

4.3 Optimization Domain (DSL)

DSL transforms validated truth into actionable allocation using:

stochastic optimization

tail-risk aware constraints (CVaR)

uncertainty-weighted bet sizing

deterministic replay capability

All DSL actions must be reproducible under historical replay without drift.

4.4 Immunity Domain (RISL)

RISL defends the system by:

detecting data drift

detecting hallucination patterns

detecting schema anomalies

detecting runtime inconsistencies

triggering ADR-016 DEFCON transitions

RISL operates a fail-safe architecture:
Prefer stopping the system over letting contaminated logic propagate.

RISL cannot alter strategy but can quarantine and halt execution.

5. Canonical Dataflow & Temporal Causality

ADR-017 requires strict temporal directionality to prevent self-referential inference.

5.1 State-Lag Rule

CRIO may only read:

IoS-007 Alpha Graph (Snapshot T-1)

This prevents race conditions, circular logic, and non-deterministic feedback loops.

5.2 Canonicalization Rule

CRIO may not write to canonical truth.

Only IoS-006 (Macro Validation Layer) may elevate research signals to:

fhq_macro.canonical_features

This satisfies ADR-013 (Truth), ADR-014 (Role Boundaries), and ADR-015 (Governance).

6. Interaction Map & Role Isolation Contract (Canonical Definition)

The following section is binding and constitutional.
Violation constitutes Class A or Class B governance breach.

6.1 Purpose

To guarantee:

clean separation of fetch, reasoning, perception, and decision

elimination of hallucinatory pathways

deterministic auditability of perception

preservation of canonical truth

MIT Quad compliance

This section establishes the only valid dataflow architecture of FjordHQ.

6.2 Role Archetypes
CEIO â€” â€œThe Hunterâ€ (Searchâ€“Fetch Subsystem)

Tier: 2
Authority: Fetch â†’ Clean â†’ Stage
Writes: fhq_macro.raw_staging

CEIO is FjordHQâ€™s only outward-facing sensory organ.

Forbidden:

analysis

scoring

model inference

access to IoS-003 or IoS-004

writing to any canonical domain

CRIO â€” â€œThe Researcherâ€ (Causality Engine)

Tier: 2
Authority: Interpret â†’ Validate â†’ Convert â†’ Feature
Reads: raw_staging, IoS-002, IoS-007 (T-1 Snapshot)
Writes: fhq_research.signals

CRIO decides whether the external world has meaning.

Forbidden:

writing to canonical truth

performing perception

altering regime logic

self-referential inference

IoS-006 â€” Macro Validation Layer (Port of Admittance)

Only IoS-006 may elevate signals into canonical truth.

Writes: fhq_macro.canonical_features
Reads: CRIO signals, structural indicators
Controls: statistical validation, lineage enforcement

IoS-006 is the constitutional gate into ADR-013 truth.

IoS-003 â€” â€œThe Overviewâ€ (Meta-Perception Engine)

Tier: 1
Authority: Perceive â†’ Classify â†’ Summarize â†’ Determine Regime
Reads: canonical_features (IoS-006), IoS-002 technical indicators
Writes: regime_state

IoS-003 never fetches, never researches, never reads external raw text.

Forbidden:

Internet access

Serper

consuming unvalidated data

modifying canonical truth

6.3 Mandatory Processing Order (Pipeline Invariant)

This invariant is constitutional:

[1] CEIO â†’ raw_staging
      â†“
[2] CRIO â†’ research_signals
      â†“
[3] IoS-006 â†’ canonical_features
      â†“
[4] IoS-003 â†’ regime_state
      â†“
[5] IoS-004 â†’ target_exposure


If lineage for all steps [1]â†’[4] is not complete:

IoS-003 must ignore the signal and log a discrepancy_event (ADR-010).

6.4 Interaction Map (Audit-Ready)
Layer	Reads	Writes	Forbidden	ADR Alignment
CEIO	Internet, APIs	raw_staging	IoS-003, IoS-004	ADR-014
CRIO	raw_staging, IoS-007 (T-1)	research_signals	canonical truth	EC-004, ADR-010
IoS-006	research_signals	canonical_features	raw external data	ADR-013, ADR-015
IoS-003	canonical_features, IoS-002	regime_state	external APIs, raw text	IoS-003 Spec
IoS-004	regime_state	exposure tables	non-canonical data	IoS-004 Spec
6.5 MIT Quad Enforcement Rules
MIT Layer	Domain	Bound Actor(s)	Enforcement Rule
LIDS	Truth	IoS-003	Must reject any feature not elevated by IoS-006
ACL	Coordination	CRIO, IoS-006	Must wait for CEIO batch completion before processing
DSL	Optimization	IoS-004	Must use validated regime_state; stochastic optimization must be deterministic under replay
RISL	Immunity	ALL	If CEIO fetches poisoned data â†’ isolate pipeline & trigger DEFCON (ADR-016)
6.6 Constitutional Status

The interaction model above is:

Canonical under ADR-013

Role-bound under ADR-014

Meta-governed under ADR-015

Runtime-protected under ADR-016

Class A Violation:
Any attempt by IoS-003 to access the internet.

Class B Violation:
Missing lineage hash between CRIO â†’ IoS-006.

Mandatory Action:
Violations must trigger RISL, DEFCON reassessment, and automatic isolation.

7. Activation & Governance

ADR-017 becomes effective immediately upon CEO signature.

All modules interacting with perception, research, external fetch, allocation, or immune response must comply.

Modifications require G4 CEO approval and VEGA co-signing.

All trades must include Quad-Hash:
{LIDS}_{ACL}_{DSL}_{RISL}.

8. Acceptance Criteria (G1 â†’ G4)
G1 â€” Technical Validation (STIG)

Role isolation verified

T-1 snapshot enforcement verified

IoS-006 ingest gate validated

Pipeline determinism confirmed

G2 â€” Governance Validation (VEGA)

Lineage compliance

Discrepancy event routing

DEFCON integration

G3 â€” Integration

Runtime orchestration alignment

Multi-agent synchronization

G4 â€” Constitutional Activation

Final CEO ratification

Immutable storage under ADR-013

9. Signatures

CEO â€” FjordHQ
LARS â€” Chief Strategy Officer
STIG â€” Chief Technology Officer
VEGA â€” Chief Compliance & Governance Officer
CFAO â€” Chief Foresight & Autonomy Officer
ADR-018 â€” AGENT STATE RELIABILITY PROTOCOL (ASRP)

Canonical Version: 2026.PROD.2
Status: CONSTITUTIONAL â€” ACTIVE
Owner: CEO
Dependencies: ADR-001, ADR-013, ADR-016, ADR-017
Implements: Mandatory Synchronized State for All Agents

1. Purpose & Strategic Mandate

ADR-018 establishes the Agent State Reliability Protocol (ASRP): FjordHQâ€™s constitutional guarantee that all agents operate from one unified, verified, cryptographically-pinned state before producing any reasoning, strategy, execution, or governance artifact.

ASRP ensures:

Zero drift in agent perception

Deterministic coordination across LIDSâ€“ACLâ€“DSLâ€“RISL (ADR-017)

Immutable auditability of all decisions

Protection against hallucination, divergence, and stale reasoning

Full compliance with ADR-013 (One-True-Source) and ADR-016 (DEFCON)

ASRP is a non-bypassable precondition for intelligence and autonomy.

2. The Synchrony Requirement (Non-Negotiable)

No agent may initiate reasoning, forecasting, or action unless a fresh, verified Shared State has been atomically retrieved from IoS-013.

This applies universally to:

Tier-1 Executives (LARS, STIG, FINN, VEGA)

Tier-2 Sub-Executives (CFAO, CSEO, CEIO, CDMO, LINE)

Tier-3 Units (CODE, pipelines, orchestrators)

The Shared State is not optional.
It is the constitutional starting point of every cognitive act.

3. Scope of Shared State (v1 Canonical Set)

ASRP recognizes exactly three state objects in v1:

3.1 current_defcon

Authority: STIG â€” ADR-016
Defines operational safety posture.

3.2 btc_regime

Authority: FINN â€” IoS-003 Canonical Regime
Defines market condition truth (LIDS pillar).

3.3 canonical_strategy

Authority: LARS â€” IoS-004 Allocation Doctrine
Defines the systemâ€™s active strategic posture.

No additional state objects may be introduced without G4 approval.

4. Atomic Synchronization Principle (New Constitutional Principle)

ASRP treats Shared State as a single atomic vector.

4.1 Atomicity Guarantee

Agents may not read state objects individually.
They must retrieve:

state_vector = {defcon, regime, strategy, hash, timestamp}


Where all fields:

are generated in the same system tick

share the same composite hash

reflect the same authoritative snapshot

4.2 Torn-Read Prohibition

If any component fails validation (freshness, hash mismatch, ownership),
the entire retrieval is invalid.

Partial reads are unconstitutional.

5. Output Binding Requirement (Chain of Custody) â€” NEW

Every agent-produced artifact must embed the state_snapshot_hash that governed the decision.

This applies to:

reasoning outputs

strategy proposals

execution plans

code artifacts

governance decisions

trades and allocations

Insight Packs, Skill Reports, Foresight Packs

5.1 Immutable Link

Every output must include:

state_snapshot_hash
state_timestamp
agent_id


This establishes a cryptographically provable link between context and action, enabling deterministic post-mortem reconstruction under ADR-002/ADR-011 lineage requirements.

No agent output is valid without its contextual fingerprint.

6. Fail-Closed Default (Zero-Trust Runtime) â€” NEW

ASRP is governed by a Zero-Trust safety model.

6.1 Halt-On-Silence Rule

If IoS-013 is:

unreachable

delayed beyond the latency threshold

returns corrupted state

returns a hash mismatch

exhibits inconsistent authority

then the system must immediately HALT.

6.2 No Local Caching

No agent may:

reuse previous state

fall back to cached local state

generate synthetic substitutes

guess missing state

Local caching is classified as an ADR-018 breach and a Class-A governance violation.

6.3 DEFCON Escalation

Any ASRP failure automatically triggers:

minimum DEFCON YELLOW (execution freeze)

VEGA review

STIG infrastructure audit

This is enforced under ADR-016.

7. Enforcement & Violations
7.1 Class A Governance Violation

Any attempt to:

bypass ASRP

use stale or uncoupled state

produce output without state_hash

override ownership boundaries

operate after an invalid read

constitutes a Class-A violation and triggers ADR-009 suspension.

7.2 Isolation & Containment

Under RISL (ADR-017), agents exhibiting drift or mismatch must be:

isolated immediately

quarantined from the orchestration bus

prevented from further reasoning

Reintegration requires VEGA approval.

8. Governance Integration
8.1 ADR-013 â€” Truth Architecture

ASRP stores summaries and pointers only.
Truth itself remains in canonical schemas.

8.2 ADR-016 â€” Safety

current_defcon gating must be evaluated as part of the atomic vector.

8.3 ADR-017 â€” MIT Quad

ASRP delivers the coordination substrate required by:

LIDS: truth depends on regime

ACL: coordination depends on shared strategy

DSL: allocation depends on DEFCON and strategy

RISL: immunity depends on state integrity

ASRP is the synchronization backbone of MIT Quad.

8.4 IoS-013 â€” Implementation

IoS-013 is the exclusive technical executor of ADR-018.
No alternative implementations are allowed.

9. Lifecycle & Evolution
9.1 Amendments

Any change to:

atomicity semantics

state object definitions

authority mapping

fail-closed logic

requires G4 CEO approval.

9.2 Expansion

New Shared State fields require:

FINN causal-truth approval

STIG schema & integrity approval

VEGA governance paper

CEO G4 ratification

9.3 Deprecation

State deprecation follows ADR-015 lifecycle governance.

10. Signatures

CEO â€” FjordHQ
STIG â€” Technical Authority
LARS â€” Strategic Authority
FINN â€” Research Authority
LINE â€” Execution Authority
VEGA â€” Governance & Compliance
ADR-019 â€” Human Interaction & Application Layer Charter

Canonical Version: 2026.PROD.2
Date: 28 November 2025
Owner: CEO
Governance Tier: Tier-1 â€“ CONSTITUTIONAL
Approvers: CEO â†’ VEGA

1. Purpose

ADR-019 defines the only authorized human interface to FjordHQ:
the Vision-IoS Dashboard, a governed, cryptographically verifiable control surface.

The objective is to ensure that human interaction cannot introduce:

drift

ambiguity

unauthorized execution

inconsistent data views

systemic fragility

This ADR protects the autonomy, safety, and integrity of the Intelligence Operating System.

2. Scope

This Charter governs:

Human access pathways (UI, API, emergency CLI)

Execution restrictions and governance checks

Data rendering guarantees

Narrative context injection

Read-Replica isolation

Break-Glass emergency protocol

ADR-019 is binding for all IoS modules and overrides any implementation-level shortcut.

3. The Dashboard as the Canonical Human Interface

All Operator interactions must occur exclusively through the Vision-IoS Dashboard.

The Dashboard is not a computational layer.
It is a Dumb Glass terminal that displays canonical state from the backend without altering, transforming, or calculating data.

No human may interact with IoS modules through code execution, shell access, or direct database calls except as defined under the Break-Glass Protocol.

4. Rendering Integrity â€” The Canonical Rendering Contract (Â§6.1)

To prevent UI divergence, all Dashboard views must conform to the following rules:

4.1 Dumb Glass Principle

The frontend layer is strictly prohibited from performing:

arithmetic or rounding

inference or aggregation

transformation of backend outputs

All values must be precomputed, validated, and cryptographically signed server-side.

4.2 Hash-of-Truth Verification

Every critical metric (PnL, exposure, volatility, risk envelope, regime) must display:

the canonical backend value, and

a verification hash proving the Dashboard has not altered the value

Any mismatch triggers:

automatic UI-LOCKOUT, and

a VEGA Critical Audit Event.

5. Human Context Injection â€” The Oracle Pathway (Â§6.2)

The system must support structured Human Narrative Vectors, enabling the Operator to contribute macro-context the models do not yet detect.

Examples:

Regulatory risk shifts

Geopolitical escalation

Narrative heat / sentiment

Liquidity fragility

Counterparty rumors

Rules:

Inputs must be digitally signed by the Operator

Routed into IoS-009 (Intent & Reflexivity Engine)

Treated strictly as probabilistic modifiers, never deterministic overrides

Evaluated by LARS, weighted by FINN, certified by VEGA

This channel allows the system to learn from human foresight without compromising autonomy.

6. Read-Replica Isolation â€” The Observability Safety Layer (Â§7.5)

Human observation must never affect system performance.

All Dashboard reads must target:

an asynced read replica, or

a dedicated analytical cache

It is explicitly prohibited for the Dashboard to query:

master execution tables

regime engines

high-frequency risk envelopes

IoS-012 decision surfaces

This prevents frontend activity from degrading real-time execution, preserving millisecond-grade autonomy.

7. Execution Restrictions (Corrected)

Humans may NOT:

execute any IoS module

trigger strategy logic

modify risk envelopes

override DEFCON

call backtests

mutate trading state

Except under the Break-Glass Protocol.

All human commands must remain within the Dashboardâ€™s interaction boundaries.

8. Break-Glass Protocol â€” DEFCON Emergency Access (Â§8.1)

If the Dashboard becomes unavailable or system autonomy threatens capital integrity, the Operator may use the emergency pathway.

Conditions for Activation:

DEFCON-1 declared per ADR-016

CEOâ€™s physical Ed25519 private key

VEGA co-signature (dual-control)

Immutable Tier-0 Audit Record created instantly

Full hash-chain continuation

Permitted Commands Only:

SYSTEM_HALT

DEFCON_RESET

POSITIONS_FLATTEN

Execution of these commands bypasses the Dashboard but never bypasses governance or cryptographic controls.

No other CLI commands are permitted.

9. Governance & Compliance

ADR-019 inherits mandatory constraints from:

ADR-001 System Charter

ADR-003 Institutional Compliance Framework

ADR-006 VEGA Governance Engine

ADR-010 Discrepancy Scoring

ADR-012 Economic Safety Architecture

ADR-013 Canonical Governance

ADR-016 DEFCON Protocol

ADR-018 Agent State Reliability Protocol

Any violation constitutes a Class A Governance Breach and forces immediate halt.

10. Amendment Procedure

CEO drafts revision

STIG â€” technical compatibility review

LINE â€” infrastructure & latency review

FINN â€” forecasting & research impact

VEGA â€” compliance, security, and governance certification

CEO â€” final approval

STIG â€” implement in database + hash-chain

11. Final Declaration

ADR-019 enshrines:

A tamper-proof human interface

Zero-drift data rendering

A safe context channel for human insight

Execution integrity through read-replicas

A cryptographically enforced emergency brake

This is the cockpit of FjordHQ.

Signed:
CEO
VEGA (Governance Authority)
ADR-020 â€” Autonomous Cognitive Intelligence (ACI) Protocol

Canonical Version: 2026.PROD.1
Status: ACTIVE / TIER-1 CONSTITUTIONAL
Date of Enactment: 08 December 2025
Issued by: CEO, FjordHQ
Governing Authorities: FINN (Method), STIG (Runtime), VEGA (Compliance)
Dependencies: ADR-001, ADR-003, ADR-004, ADR-010, ADR-012, ADR-013, ADR-016, ADR-017, ADR-018
Classification: TIER-1 CONSTITUTIONAL

1. Executive Summary

ADR-020 establishes Autonomous Cognitive Intelligence (ACI) as a constitutional capability within FjordHQ â€” the intelligence layer responsible for:

dynamic research planning

recursive fact-finding

causal inference

epistemic uncertainty measurement

and aggressive truth acquisition

ACI is authorized to think, hunt, infer and explain,
but it is constitutionally prohibited from making or executing financial decisions.

The protocol operationalizes three Deep Research architectures:

Search-in-the-Chain â€” reasoning and retrieval interleaved dynamically

InForage Logic â€” information-gain optimization under cost and latency constraints

IKEA Boundary Protocol â€” strict separation of internal knowledge vs verifiable fact

ACI is a LIDS + ACL capability under ADR-017â€™s MIT Quad and has Zero Execution Authority (ZEA) under DSL.

2. Strategic Mandate

The mission of ACI is:

To industrialize Epistemic Certainty at scale.

Where IoS-003 (Meta-Perception) tells the system what is happening,
ACI determines why it is happening â€” with evidence, not intuition.

ACI is empowered to:

autonomously generate hypotheses

initiate multi-step research loops

self-correct when evidence contradicts its assumptions

consume compute/API budgets to purchase certainty (ADR-012 compliant)

detect causal patterns that matter for alpha generation

But ACI may never:

touch execution

modify strategy

alter any canonical database

issue directives to LINE or DSL

It is the brain, not the hands.

3. The ACI Cognitive Architecture (The Loop)

All ACI agents MUST operate inside a deterministic, auditable cognitive loop pinned under ADR-018.

3.1 Phase 1 â€” Dynamic Planning (Search-in-the-Chain)

ACI plans are non-static. Every retrieval modifies the plan.

Input:

LARS query

System anomaly (IoS-003, IoS-010, VEGA discrepancy)

Action:

Generate ResearchPlan_v1

Identify subgoals

Predict where uncertainty is greatest

Constraint:
If the first retrieval disproves the premise,
the entire plan must be rewritten immediately.

3.2 Phase 2 â€” Information Acquisition (InForage Logic)

ACI must acquire information using an economic search model:

High information-gain queries â†’ permitted

Low information-gain queries â†’ rejected

API cost ceilings â†’ enforced by STIG (ADR-012)

Web-agent fallback permitted only when structured APIs fail

ACI must stop when expected information-gain falls below cost threshold.

3.3 Phase 3 â€” Knowledge Arbitration (IKEA Protocol)

ACI must classify every claim as:

Internal reasoning (allowed from parametric memory)

External fact (requires citation + retrieval)

Facts without sources are illegal.

Violation of IKEA is a Class B Governance Violation.

3.4 Phase 4 â€” Causal Synthesis

ACI must output:

causal graph of findings

uncertainty distribution

evidence chain

confidence thresholds

contradictions flagged explicitly

ACI is forbidden from masking uncertainty.

4. MIT Quad Integration (ADR-017 Alignment)

ACI is bound to the MIT Quad architecture:

MIT Pillar	ACI Role
LIDS (Truth)	Primary causal inference engine; validator for signals (IoS-006) and Alpha Graph (IoS-007).
ACL (Coordination)	Uses Orchestrator to delegate sub-tasks to Fact-Check, Retrieval, Reasoning Units. Respects CEIO boundaries.
DSL (Execution)	HARD FIREWALL â€” ACI cannot issue or influence trades.
RISL (Immunity)	Any hallucination, loop, or uncertainty spike triggers forced termination.

ACI is therefore intelligent, but constrained.

5. Safety, Governance & Operational Law
5.1 DEFCON Scaling (ADR-016)
DEFCON	ACI Behaviour
5 â€“ GREEN	Full autonomy. Deep recursion + multimodal browsing allowed.
4 â€“ YELLOW	Cost-aware mode. Web agents disabled. Search depth reduced.
3 â€“ ORANGE	Hypothesis generation frozen. Only LARS-directed tasks allowed.
2 â€“ RED	ACI shutdown. Cognitive resources reallocated to execution systems.
1 â€“ BLACK	Total kill. No reasoning allowed.

STIG enforces state; ACI must comply instantly.

5.2 Agent State Reliability (ADR-018)

Before any reasoning step, ACI must:

read a fresh state_snapshot_hash

attach it to output

Any output without valid state hash is invalid and rejected by FINN.

5.3 Hallucination Law (Zero Guessing Doctrine)

ACI must:

abort if factual uncertainty > 20%

classify any speculative claim as Hypothesis

request verification rather than infer where unsure

5.4 Logging & Determinism (ADR-004, ADR-010)

Every cycle must record:

plan evolution

queries issued

costs consumed

uncertainty deltas

evidence lineage

All must be reproducible.

6. Roles & Jurisdiction
Role	Authority Over ACI
LARS (Strategy)	Requests research. Consumes insights. Cannot override FINN.
FINN (Methodology)	Owns reasoning frameworks, causal inference logic, and scientific validity of outputs.
STIG (Runtime)	Enforces compute, cost, rate-limits, sandboxing, and air-gap against execution.
VEGA (Compliance)	Validates discrepancy, audits hallucination, certifies protocol adherence.
CFAO (Foresight)	Stress-tests ACI logic under future-state projections.

No agent may override FINN on methodology or STIG on runtime authority.

7. Activation & Constitutional Status

Upon issuance and signature:

ACI becomes a constitutionally protected intelligence layer

All ACI agents operate strictly under ADR-020

Any deviation constitutes a Class A/B governance violation

STIG must enforce runtime sandboxing

VEGA must monitor compliance continuously

Effective 08 December 2025, ADR-020 is the Law of the Land.

Role	Status	Date
CEO	APPROVED	2025-12-08
STIG	TECHNICAL VALIDATION	2025-12-08
FINN	METHODOLOGY ALIGNED	2025-12-08
VEGA	GOVERNANCE ATTESTED	2025-12-08
Appendix A â€” Normative Mathematical Specification (Binding Reference)

(Clean core: math lives in appendix, not the law body)

Contents include:

IKEA reward equations

InForage reward decomposition

Efficiency penalties

CEIO hybrid reward formulation

Alpha Graph coverage metric

Operational hyperparameters

This appendix defines how ACI agents must calculate:

uncertainty

evidence weighting

boundary arbitration

information-gain economics

causal entropy triggers

alpha-focused reward alignment

All future implementation MUST match Appendix A exactly
unless superseded by a formally enacted ADR revision.

APPENDIX B â€” SHADOW EXECUTION PROTOCOL (The Hedgefund Sandbox) B.1 Purpose To allow ACI to validate causal alpha (Shorts, Volatility, Hedges) without risking capital or creating new ADRs. B.2 The Shadow Permisison ACI is authorized to emit Shadow_Hypothesis_Vectors directly to the Execution Engine (IoS-012) under the following strict flag: execution_mode = "SHADOW_PAPER" B.3 Allowed Instruments (Shadow Only) While in Shadow Mode, ACI may request: Directional: Short Selling (Inverse exposure) Volatility: Options (Calls/Puts/Straddles) Leverage: Up to 5x (Synthetic) Scope: Any liquid asset (Crypto, FX, Indices) supported by the data provider. B.4 Safety Constraint Any output targeting SHADOW_PAPER requires Zero Sovereignty Checks. It is a simulation. It must never touch the REAL_CAPITAL ledger defined in ADR-012.
# ADR-021 â€“ Cognitive Engine Architecture & Deep Research Protocol

**Canonical Version:** 2026.PRODUCTION
**Status:** APPROVED
**Date:** 09 December 2025
**Owner:** CEO
**Authority Chain:** ADR-001 â†’ ADR-007 â†’ ADR-010 â†’ ADR-012 â†’ ADR-014 â†’ ADR-017 (MIT QUAD) â†’ ADR-021
**Governing Agents:** VEGA (Compliance), LARS (Strategy), FINN (Research)
**Affects:** fhq_governance, fhq_meta, Orchestrator, All Tier-2 Agents, LLM Routing
**Classification:** GOVERNANCEâ€“CRITICAL

---

## 1. Decision

FjordHQ formally adopts the **Cognitive Engine Architecture** as the foundational reasoning layer for autonomous Deep Research operations. This ADR establishes three Tier-2 Cognitive Engines:

| Engine ID | Name | Title | Parent Authority |
|-----------|------|-------|------------------|
| EC-020 | SitC | Search-in-the-Chain Protocol | LARS |
| EC-021 | InForage | Information Foraging Protocol | FINN |
| EC-022 | IKEA | Internal-External Knowledge Synergistic Reasoning | VEGA |

**MIT QUAD Alignment (ADR-017)**: These engines implement the LIDS-ACL-DSL-RISL pillars:
- **SitC** â†’ LIDS (Inference & Truth) â€“ Ensures reasoning chains are grounded in verified truth
- **InForage** â†’ DSL (Optimization & Operations Research) â€“ Maximizes ROI on information foraging
- **IKEA** â†’ RISL (Resilience & Immunity) â€“ Prevents hallucination contamination

**These are not operational Sub-Executives (ADR-014) but Cognitive Protocols** â€“ reasoning architectures embedded into the system's decision-making core that govern *how* the system thinks, not *what* it executes.

### Distinction from ADR-014 Sub-Executives

| Dimension | Sub-Executives (ADR-014) | Cognitive Engines (ADR-021) |
|-----------|-------------------------|----------------------------|
| Purpose | Task execution within domains | Reasoning pattern enforcement |
| Output | Artifacts (Reports, Signals, Data) | Reasoning Chain Validity |
| Authority | Operational/Dataset/Model | Cognitive Authority |
| Activation | Per-task by Orchestrator | Always-on within reasoning loops |
| Parent | Single Tier-1 Executive | Cross-cutting governance layer |

---

## 2. Context

### 2.1 The Deep Research Paradigm Shift

Traditional RAG (Retrieval-Augmented Generation) operates on a linear model: Query â†’ Retrieve â†’ Generate. This is insufficient for FjordHQ's $100,000 REAL MONEY revenue target because:

1. **Static Planning Fails**: Financial markets are non-stationary; plans must adapt to new information
2. **Inefficient Search Burns Capital**: Unlimited API calls without ROI optimization erode margins
3. **Hallucination Creates Risk**: Acting on parametric beliefs when external verification is required leads to capital loss

Research basis (arXiv:2505.00186 "Deep Research: A Survey of Autonomous Research Agents") identifies three critical mechanisms for production-grade Deep Research systems:

1. **Search-in-the-Chain (SitC)**: Dynamic interleaving of search and reasoning
2. **InForage**: Information-theoretic optimization of search behavior
3. **IKEA**: Knowledge boundary-aware retrieval decisions

### 2.2 Gap Analysis: FjordHQ Pre-ADR-021

| Capability | Status Before ADR-021 | Risk |
|------------|----------------------|------|
| Dynamic Planning | ADR-007 static routing | Strategic drift, wasted tokens |
| Search Optimization | No RL-based decision model | API cost overruns, margin erosion |
| Knowledge Boundaries | No parametric/external classification | Hallucination risk, bad trades |

ADR-021 closes these gaps by establishing constitutional cognitive protocols that operate within the MIT QUAD framework (ADR-017).

---

## 3. Scope

ADR-021 regulates:

1. Definition and registration of Cognitive Engines
2. Authority model for Tier-2 Cognitive Engines
3. Integration with existing governance (ADR-010, ADR-012, ADR-016)
4. Interaction patterns with Sub-Executives (ADR-014)
5. Evidence and signature requirements
6. Revenue protection mechanisms
7. DEFCON-aware behavior specifications

This ADR does NOT regulate:
- Operational task execution (ADR-014)
- Economic limits (ADR-012) â€“ but Cognitive Engines MUST respect them
- DEFCON states (ADR-016) â€“ but Cognitive Engines MUST respond to them

---

## 4. Cognitive Engine Contracts

### 4.1 EC-020 â€“ SitC (Search-in-the-Chain Protocol)

**Full specification in Appendix A (EC-020_2026_PRODUCTION)**

| Field | Value |
|-------|-------|
| Engine ID | EC-020 |
| Name | SitC (Search-in-the-Chain) |
| Role Type | Tier-2 Cognitive Authority (Reasoning & Global Planning) |
| Parent | LARS (EC-002) |
| Mandate | Dynamic Global Planning with Interleaved Search |
| Research Basis | arXiv:2304.14732 |

**Core Function**: SitC prevents strategic drift by enforcing that no reasoning chain proceeds past an unverified node. It constructs a Chain-of-Query (CoQ) and dynamically modifies it during execution.

**Revenue Protection**: Protects capital by preventing trade hypothesis execution unless the full causality chain is verified step-by-step. If a logic link breaks, SitC aborts generation *before* execution costs are incurred.

### 4.2 EC-021 â€“ InForage (Information Foraging Protocol)

**Full specification in Appendix B (EC-021_2026_PRODUCTION)**

| Field | Value |
|-------|-------|
| Engine ID | EC-021 |
| Name | InForage |
| Role Type | Tier-2 Cognitive Authority (Search Optimization & ROI) |
| Parent | FINN (EC-005) |
| Mandate | ROI on Curiosity â€“ Maximize Information Gain per Token Cost |
| Research Basis | arXiv:2505.09316 |

**Core Function**: InForage treats information retrieval as an economic investment. It uses a Reinforcement Learning reward function to decide if a search is profitable: `Reward = (Î”Outcome Certainty) - (Search Cost + Latency Penalty)`.

**Revenue Protection**: Ensures the research factory is self-funding by:
- Reducing API/Compute costs by up to 60% (stopping searches early when marginal utility drops)
- Increasing Alpha precision by filtering out "low-nutrition" noise

### 4.3 EC-022 â€“ IKEA (Internal-External Knowledge Synergistic Reasoning)

**Full specification in Appendix C (EC-022_2026_PRODUCTION)**

| Field | Value |
|-------|-------|
| Engine ID | EC-022 |
| Name | IKEA |
| Role Type | Tier-2 Cognitive Authority (Hallucination Firewall) |
| Parent | VEGA (EC-001) |
| Mandate | The Truth Boundary â€“ Know what you know |
| Research Basis | arXiv:2505.07596 |

**Core Function**: IKEA solves the knowledge boundary problem: "Do I know this, or do I need to look it up?" It prevents the two deadly sins of AI: Hallucination (guessing when you should search) and Redundancy (searching when you already know).

**Revenue Protection**: Primary defense against "Bad Data Loss":
- Prevents trading on outdated internal weights (e.g., assuming 2024 rates in 2025)
- Prevents wasted time/cost searching for static facts (e.g., "What is EBITDA?")

---

## 5. Cognitive Engine Control Framework (CECF)

*Governing Model for Tier-2 Cognitive Engines*

### CECF-1: Authority Hierarchy

```
Tier-1 Executives (CEO, VEGA, LARS, STIG, LINE, FINN)
              â†“
Tier-2 Cognitive Engines (SitC, InForage, IKEA)
              â†“
Tier-2 Sub-Executives (CSEO, CDMO, CRIO, CEIO, CFAO)
              â†“
Tier-3 Sub-Agents (future)
```

**Cognitive Engines shape reasoning. Sub-Executives execute tasks. Executives decide.**

### CECF-2: Activation Model

Unlike Sub-Executives which are invoked per-task, Cognitive Engines are **always-on protocols** that:

1. Monitor all reasoning chains in progress
2. Intervene when their domain rules are violated
3. Operate transparently within the Orchestrator pipeline

### CECF-3: Integration with ADR-014 Sub-Executives

| Sub-Executive | Primary Cognitive Engine | Secondary |
|---------------|-------------------------|-----------|
| CSEO | SitC (strategy reasoning) | IKEA (fact verification) |
| CDMO | IKEA (data validation) | InForage (source priority) |
| CRIO | SitC (research chains) | InForage (search efficiency) |
| CEIO | InForage (external data ROI) | IKEA (source classification) |
| CFAO | SitC (scenario planning) | InForage (forecast data) |

### CECF-4: DEFCON Behavior (ADR-016 Integration)

| DEFCON Level | SitC Behavior | InForage Behavior | IKEA Behavior |
|--------------|---------------|-------------------|---------------|
| GREEN | Full dynamic planning | Normal optimization | Standard boundary check |
| YELLOW | Enforce shorter chains | Aggressive cost-cutting (Scent > 0.95) | Bias toward internal knowledge |
| ORANGE | Chain-of-Thought validation mode | Emergency budget only | External verification mandatory |
| RED | Abort all active chains | HALT all searches | READ-ONLY mode |
| BLACK | System shutdown | System shutdown | System shutdown |

### CECF-5: Economic Safety (ADR-012 Integration)

Cognitive Engines operate under the Economic Safety Architecture:

| Engine | Cost Allocation (ADR-012) | Budget Source |
|--------|--------------------------|---------------|
| SitC | max_llm_steps_per_task = 3 (default) | vega.llm_rate_limits |
| InForage | max_cost_per_task = $0.50 (default) | vega.llm_cost_limits |
| IKEA | Zero direct cost (classification only) | N/A |

### CECF-6: Discrepancy Scoring (ADR-010 Integration)

Cognitive Engines contribute to discrepancy scoring:

| Engine | Discrepancy Contribution | Weight |
|--------|-------------------------|--------|
| SitC | Chain integrity score (verified nodes / total nodes) | 1.0 (Critical) |
| InForage | Search efficiency score (information gain / cost) | 0.5 (Medium) |
| IKEA | Boundary violation rate (hallucination attempts) | 1.0 (Critical) |

Threshold triggers per ADR-010:
- Score > 0.05: WARNING
- Score > 0.10: CATASTROPHIC â†’ VEGA suspension request (ADR-009)

### CECF-7: Evidence Requirements

Each Cognitive Engine invocation must produce:

1. **Ed25519 signature** (ADR-008)
2. **Evidence bundle** containing:
   - Input context
   - Decision rationale
   - Output modification
   - Cost incurred (if applicable)
3. **Governance event log entry**

Stored in: `fhq_meta.cognitive_engine_evidence`

---

## 6. Technical Implementation Requirements

### 6.1 Database Schema (fhq_governance)

```sql
-- Cognitive Engine Registry
CREATE TABLE fhq_governance.cognitive_engines (
    engine_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    engine_code VARCHAR(10) NOT NULL UNIQUE, -- 'EC-020', 'EC-021', 'EC-022'
    engine_name VARCHAR(50) NOT NULL,
    role_type VARCHAR(100) NOT NULL,
    parent_executive_id UUID REFERENCES fhq_org.org_agents(agent_id),
    authority_level INTEGER DEFAULT 2,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    research_basis VARCHAR(50), -- arXiv reference
    contract_sha256 VARCHAR(64) NOT NULL,
    created_by VARCHAR(50) DEFAULT 'CEO',
    created_at TIMESTAMP DEFAULT NOW()
);

-- Cognitive Engine Configuration
CREATE TABLE fhq_governance.cognitive_engine_config (
    config_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    engine_id UUID REFERENCES fhq_governance.cognitive_engines(engine_id),
    config_key VARCHAR(100) NOT NULL,
    config_value JSONB NOT NULL,
    defcon_level defcon_level DEFAULT 'GREEN',
    effective_from TIMESTAMP DEFAULT NOW(),
    effective_to TIMESTAMP,
    created_by VARCHAR(50),
    UNIQUE(engine_id, config_key, defcon_level)
);

-- Cognitive Engine Evidence
CREATE TABLE fhq_meta.cognitive_engine_evidence (
    evidence_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    engine_id UUID REFERENCES fhq_governance.cognitive_engines(engine_id),
    task_id UUID REFERENCES fhq_org.org_tasks(task_id),
    invocation_type VARCHAR(50), -- 'PLAN_REVISION', 'SEARCH_DECISION', 'BOUNDARY_CHECK'
    input_context JSONB,
    decision_rationale TEXT,
    output_modification JSONB,
    cost_usd NUMERIC(10,6),
    information_gain_score NUMERIC(5,4),
    chain_integrity_score NUMERIC(5,4),
    boundary_violation BOOLEAN DEFAULT FALSE,
    signature VARCHAR(128),
    hash_prev VARCHAR(64),
    hash_self VARCHAR(64),
    created_at TIMESTAMP DEFAULT NOW()
);

-- Chain-of-Query State (SitC)
CREATE TABLE fhq_meta.chain_of_query (
    coq_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    task_id UUID REFERENCES fhq_org.org_tasks(task_id),
    node_index INTEGER NOT NULL,
    node_type VARCHAR(30), -- 'REASONING', 'SEARCH', 'VERIFICATION'
    node_content TEXT,
    verification_status VARCHAR(20), -- 'PENDING', 'VERIFIED', 'FAILED', 'SKIPPED'
    search_result_id UUID,
    created_at TIMESTAMP DEFAULT NOW(),
    verified_at TIMESTAMP,
    UNIQUE(task_id, node_index)
);

-- Knowledge Boundary Classification (IKEA)
CREATE TABLE fhq_meta.knowledge_boundary_log (
    boundary_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    task_id UUID REFERENCES fhq_org.org_tasks(task_id),
    query_text TEXT NOT NULL,
    classification VARCHAR(20), -- 'PARAMETRIC', 'EXTERNAL_REQUIRED', 'HYBRID'
    confidence_score NUMERIC(5,4),
    internal_certainty NUMERIC(5,4),
    volatility_flag BOOLEAN DEFAULT FALSE,
    retrieval_triggered BOOLEAN,
    decision_rationale TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Search Foraging Log (InForage)
CREATE TABLE fhq_meta.search_foraging_log (
    forage_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    task_id UUID REFERENCES fhq_org.org_tasks(task_id),
    search_query TEXT NOT NULL,
    scent_score NUMERIC(5,4), -- Predicted information value
    estimated_cost_usd NUMERIC(10,6),
    actual_cost_usd NUMERIC(10,6),
    information_gain NUMERIC(5,4), -- Post-hoc measured value
    search_executed BOOLEAN,
    termination_reason VARCHAR(50), -- 'EXECUTED', 'SCENT_TOO_LOW', 'BUDGET_EXCEEDED', 'DIMINISHING_RETURNS'
    created_at TIMESTAMP DEFAULT NOW()
);
```

### 6.2 Register Engines in fhq_governance.cognitive_engines

Required initial data:

```sql
INSERT INTO fhq_governance.cognitive_engines
(engine_code, engine_name, role_type, authority_level, research_basis, contract_sha256, created_by)
VALUES
('EC-020', 'SitC', 'Tier-2 Cognitive Authority (Reasoning & Global Planning)', 2, 'arXiv:2304.14732', '<sha256_hash>', 'CEO'),
('EC-021', 'InForage', 'Tier-2 Cognitive Authority (Search Optimization & ROI)', 2, 'arXiv:2505.09316', '<sha256_hash>', 'CEO'),
('EC-022', 'IKEA', 'Tier-2 Cognitive Authority (Hallucination Firewall)', 2, 'arXiv:2505.07596', '<sha256_hash>', 'CEO');
```

### 6.3 Orchestrator Integration Requirements

The Orchestrator (ADR-007) must be extended to:

1. **SitC Integration**:
   - Before executing any multi-step task, construct Chain-of-Query
   - After each reasoning step, verify node before proceeding
   - On verification failure, trigger plan revision

2. **InForage Integration**:
   - Before any external API call, compute Scent Score
   - Compare against cost threshold from `vega.llm_cost_limits`
   - Log decision to `fhq_meta.search_foraging_log`

3. **IKEA Integration**:
   - Before generating any factual output, classify query
   - If EXTERNAL_REQUIRED and no retrieval performed, BLOCK output
   - Log classification to `fhq_meta.knowledge_boundary_log`

---

## 7. Revenue Connection: The $100,000 Target

The Cognitive Engines directly protect and enable the $100,000 REAL MONEY revenue target:

| Engine | Protection Mechanism | Revenue Impact |
|--------|---------------------|----------------|
| SitC | Prevents strategic drift and incomplete analysis | Avoids bad trade decisions |
| InForage | Optimizes research spend for maximum ROI | Protects margins (up to 60% cost reduction) |
| IKEA | Prevents hallucination-based decisions | Avoids catastrophic losses |

**Combined Effect**: The system moves from "Chain-of-Thought" (linear, fragile) to "Chain-of-Reasoning with Active Foraging" (dynamic, economic, self-aware).

---

## 8. Consequences

### Positive

- **Institutional-grade reasoning**: Every decision chain is verified
- **Economic discipline**: Research costs are bounded and optimized
- **Hallucination prevention**: Knowledge boundaries are enforced
- **Full auditability**: Complete evidence trail for every cognitive decision
- **DEFCON-aware**: Automatic behavioral adjustment under stress
- **Revenue protection**: Direct connection to $100k target

### Negative

- **Increased complexity**: Three new protocols to maintain
- **Latency impact**: Verification and classification add processing time
- **Training requirement**: RL-based optimization requires ongoing tuning

### Risks Mitigated

- Strategic drift from incomplete analysis
- API cost overruns from unbounded search
- Hallucination-based trading decisions
- Inefficient research spend
- Governance bypass through reasoning manipulation

---

## 9. Acceptance Criteria

ADR-021 is considered implemented when:

1. All three Cognitive Engines are registered in `fhq_governance.cognitive_engines`
2. Database schema is deployed (`cognitive_engine_evidence`, `chain_of_query`, `knowledge_boundary_log`, `search_foraging_log`)
3. Orchestrator recognizes and invokes all engines
4. DEFCON-aware behavior is implemented and tested
5. ADR-012 economic limits are enforced by InForage
6. ADR-010 discrepancy scoring includes cognitive engine metrics
7. VEGA approves activation
8. Evidence bundles are generated for every invocation
9. Full test coverage per ADR-011 Production Fortress requirements

---

## 10. Status

**APPROVED**
VEGA Attestation Required
Ready for Immediate Production Deployment

---

## 11. Governance Chain

This framework is 100% anchored in:

- ADR-001 (Constitution)
- ADR-002 (Audit & Error Reconciliation)
- ADR-007 (Orchestrator)
- ADR-010 (Discrepancy Scoring)
- ADR-012 (Economic Safety)
- ADR-014 (Sub-Executive Governance)
- ADR-016 (DEFCON Protocol)
- ADR-017 (MIT QUAD Protocol)

---

## Appendix A: EC-020_2026_PRODUCTION â€“ SitC Contract

*(See separate file: EC-020_2026_PRODUCTION_SitC_Search_in_the_Chain.md)*

## Appendix B: EC-021_2026_PRODUCTION â€“ InForage Contract

*(See separate file: EC-021_2026_PRODUCTION_InForage_Information_Foraging.md)*

## Appendix C: EC-022_2026_PRODUCTION â€“ IKEA Contract

*(See separate file: EC-022_2026_PRODUCTION_IKEA_Knowledge_Boundary.md)*

---

## 12. Signatures

| Role | Signature | Date |
|------|-----------|------|
| CEO | âœ… APPROVED | 2025-12-09 |
| VEGA | âœ… Attestor | 2025-12-09 |
| LARS | âœ… Strategy Authority | 2025-12-09 |
| FINN | âœ… Research Authority | 2025-12-09 |

---

**END OF ADR-021_2026_PRODUCTION**
# ADR-022: The Autonomous Database Horizon Implementation Charter

**ADR-ID:** ADR-022
**Title:** The Autonomous Database Horizon Implementation Charter
**Status:** DRAFT
**Date:** 2026-01-03
**Owner:** STIG (CTO)
**Tier:** 1 (Constitutional)
**Governing Reference:** `00_CONSTITUTION/The Autonomous Database Horizon.md`

---

## EXECUTIVE SUMMARY (CEO Quick Reference)

**Current State:** 78.5% alignment with Autonomous Database Horizon standard
**Target State:** 92% alignment by Q2 2026
**Status:** DRAFT - CEO CORRECTIONS APPLIED

### CEO Corrections Applied (Pillars 1-3)

| Correction | Original | Fixed |
|------------|----------|-------|
| **CoT Storage** | Full CoT in JSONB | Structured Reasoning Artifact + Hash |
| **Refinement Loop** | Best-effort retry | Hard-bound circuit (3 attempts, $0.02, 2.0s) |
| **AIQF** | Undefined | Canonical formula + benchmark registry |
| **Observability** | Q4 2026 | IMMEDIATE (Week 1-2) |
| **EU AI Act** | "Full compliance Aug 2025" | Scoped to DEPLOYER obligations |

### Immediate Priorities (Next 4-6 Weeks)

| Priority | Action | Why Urgent |
|----------|--------|------------|
| **1. Observability Core** | Pillar 1-3 instrumentation | Cannot measure refinement without it |
| **2. SQL Refinement** | Structured artifacts + circuit breaker | 86.6% accuracy with governance |
| **3. EU AI Act** | DEPLOYER inventory | Aug 2025 GPAI obligations active |
| **4. AIQF Benchmark** | 50-query test set | VEGA gate requires defined metric |

### Key Deliverables

- **7 SQL Migrations** (191, 191b, 192-196)
- **14 Python Functions** (STaR-SQL, Circuit Breaker, AIQF, HybridRAG, ABAC, Observability)
- **Complete Document Inventory:** 21 ADRs, 18 IoS, 18 ECs catalogued

### CEO Questions Answered (Section 13)

1. **AIQF Formula:** `(firstÃ—0.6) + (within3Ã—0.25) + (semanticÃ—0.1) + (no_escalationÃ—0.05)` â‰¥ 0.95
2. **Phase 1 Scope:** FINN + STIG agents; `fhq_meta`, `fhq_research`, `fhq_canonical` schemas
3. **Hard Ceilings:** 3 attempts, 4000 tokens, 2.0s latency, $0.02/query, $25/day refinement budget

---

## 1. CONTEXT & DECISION

This ADR establishes the implementation roadmap for achieving full compliance with "The Autonomous Database Horizon" constitutional standard. It consolidates all existing governance documents and defines the path to Phase 3 Autonomous Governance (2026+).

**Decision:** FjordHQ shall implement the Autonomous Database Horizon architecture in three phases, achieving >90% compliance by Q2 2026.

---

## 2. COMPLETE GOVERNANCE DOCUMENT INVENTORY

### 2.1 Architecture Decision Records (ADR-001 to ADR-021)

| ADR | Title | Tier | Owner | Status | Domain |
|-----|-------|------|-------|--------|--------|
| **ADR-001** | System Charter | 1 | CEO | ACTIVE | Constitutional foundation, executive roles |
| **ADR-002** | Audit and Error Reconciliation Charter | 1 | VEGA | ACTIVE | All changes must be logged, audit trails |
| **ADR-003** | Institutional Standards and Compliance Framework | 2 | STIG | ACTIVE | Schema naming, MDLC, compliance |
| **ADR-004** | Change Gates Architecture (G0-G4) | 1 | VEGA | ACTIVE | Approval workflow, gate progression |
| **ADR-005** | Mission & Vision Charter | 1 | CEO | ACTIVE | Strategic direction, purpose |
| **ADR-006** | VEGA Autonomy and Governance Engine Charter | 1 | CEO | ACTIVE | VEGA powers, veto authority |
| **ADR-007** | Orchestrator Architecture | 1 | CEO | ACTIVE | LARS coordination, workflow |
| **ADR-008** | Cryptographic Key Management and Rotation | 1 | STIG | ACTIVE | Ed25519 signing, key ceremonies |
| **ADR-009** | Governance Approval Workflow for Agent Suspension | 2 | VEGA | ACTIVE | Suspension procedures |
| **ADR-010** | State Reconciliation Methodology and Discrepancy Scoring | 2 | STIG | ACTIVE | State consistency, drift detection |
| **ADR-011** | Fortress and VEGA Testsuite | 2 | STIG | ACTIVE | Hash chains, integrity testing |
| **ADR-012** | Economic Safety Architecture | 1 | CEO | ACTIVE | Cost ceilings, API waterfall, budgets |
| **ADR-013** | Canonical ADR Governance and One-True-Source | 2 | STIG | ACTIVE | Single source of truth |
| **ADR-014** | Executive Activation and Sub-Executive Governance | 1 | CEO | ACTIVE | Agent hierarchy, activation |
| **ADR-015** | Meta-Governance Framework for ADR Ingestion | 2 | VEGA | ACTIVE | Document ingestion rules |
| **ADR-016** | DEFCON Circuit Breaker Protocol | 1 | LINE | ACTIVE | Emergency halt, risk levels |
| **ADR-017** | MIT Quad Protocol for Alpha Sovereignty | 1 | CEO | ACTIVE | Alpha signal protection |
| **ADR-018** | Agent State Reliability Protocol (ASRP) | 2 | STIG | ACTIVE | State persistence, recovery |
| **ADR-019** | Human Interaction & Application Layer Charter | 1 | CEO | ACTIVE | Dashboard, user interface |
| **ADR-020** | Autonomous Cognitive Intelligence | 1 | CEO | ACTIVE | ACI framework, FINN-InForage-SitC-IKEA |
| **ADR-021** | Cognitive Engine Architecture Deep Research Protocol | 2 | FINN | ACTIVE | Research methodology |

**Total: 21 ADRs ACTIVE** (11 Tier-1 Constitutional, 10 Tier-2 Operational)

---

### 2.2 Instructions of Service (IoS-001 to IoS-015)

| IoS | Title | Tier | Owner | Status | Domain |
|-----|-------|------|-------|--------|--------|
| **IoS-001** | IoS-001_2026_PRODUCTION | 2 | STIG | ACTIVE | Data ingestion pipeline |
| **IoS-002** | IoS-002 | 2 | STIG | ACTIVE | Signal processing |
| **IoS-003** | IoS-003 | 2 | FINN | ACTIVE | Regime classification |
| **IOS-003-B** | Intraday Regime-Delta (Ephemeral Context Engine) | 2 | FINN | G0_SUBMITTED | Intraday context |
| **IoS-004** | IoS-004 | 2 | FINN | ACTIVE | Alpha generation |
| **IoS-005** | IoS-005 | 2 | FINN | ACTIVE | Signal validation |
| **IoS-006** | Global Macro & Factor Integration Engine | 2 | FINN | ACTIVE | Macro factors, G3 gates |
| **IoS-007** | IoS-007 | 2 | FINN | ACTIVE | Risk assessment |
| **IoS-008** | IoS-008 | 2 | LINE | ACTIVE | Execution protocols |
| **IoS-009** | IoS-009 | 2 | FINN | ACTIVE | Backtesting |
| **IoS-010** | IoS-010 | 2 | FINN | ACTIVE | Portfolio construction |
| **IoS-011** | IoS-011 | 2 | FINN | ACTIVE | Position sizing |
| **IoS-012** | IoS-012 | 2 | LINE | ACTIVE | Order management |
| **IoS-013** | IoS-013 | 3 | FINN | ACTIVE | Research operations |
| **IoS-014** | IoS-014 | 2 | STIG | ACTIVE | Infrastructure ops |
| **IoS-015** | IoS-015 | 2 | FINN | ACTIVE | Learning cycles |
| **G4.2** | Contextual Alpha Orchestration | 2 | - | ACTIVE | G4 gate operations |
| **G5** | Silent Sniper Paper Execution | 2 | - | ACTIVE | Paper trading |

**Total: 17 IoS ACTIVE, 1 G0_SUBMITTED**

---

### 2.3 Employment Contracts (EC-001 to EC-022)

| EC | Title | Tier | Owner | Status | Agent Role |
|----|-------|------|-------|--------|------------|
| **EC-001** | EC-001 | 1 | VEGA | ACTIVE | Chief Governance Officer |
| **EC-002** | EC-002 | 1 | LARS | ACTIVE | Chief Strategy Officer |
| **EC-003** | EC-003 | 2 | STIG | ACTIVE | Chief Technology Officer |
| **EC-004** | EC-004 | 2 | FINN | ACTIVE | Chief Research Officer |
| **EC-005** | EC-005 | 2 | LINE | ACTIVE | Chief Operations Officer |
| **EC-006** | EC-006 | 2 | CSEO | ACTIVE | Chief Security Officer |
| **EC-007** | EC-007 | 2 | CDMO | ACTIVE | Chief Data Management Officer |
| **EC-008** | EC-008 | 2 | FRAMEWORK | FRAMEWORK_CHARTER | Framework specification |
| **EC-009** | EC-009 | 2 | CEIO | ACTIVE | Chief External Intelligence Officer |
| **EC-010** | EC-010 | 2 | CFAO | ACTIVE | Chief Financial Analysis Officer |
| **EC-011** | EC-011 | 3 | CODE | ACTIVE | Development execution |
| **EC-012** | EC-012 | 3 | RESERVED | RESERVED | Future agent slot |
| **EC-013** | EC-013 | 2 | CRIO | ACTIVE | Chief Risk & Intelligence Officer |
| **EC-018** | EC-018 | 2 | CEIO | FROZEN | Meta-Alpha daemon |
| **EC-019** | EC-019 | 1 | CEO | ACTIVE | CEO directives |
| **EC-020** | EC-020_2026_PRODUCTION | 2 | FINN | FROZEN | SitC (Seeing is the Cause) |
| **EC-021** | EC-021_2026_PRODUCTION | 2 | FINN | FROZEN | InForage cost optimization |
| **EC-022** | EC-022_2026_PRODUCTION | 2 | FINN | ACTIVE | IKEA truth boundaries |

**Total: 13 ACTIVE, 3 FROZEN, 1 FRAMEWORK, 1 RESERVED**

**ACI Triangle (Autonomous Cognitive Intelligence):**
- EC-020 (SitC): Reasoning integrity, verification chains
- EC-021 (InForage): Cost optimization, API budget
- EC-022 (IKEA): Truth boundaries, anti-hallucination

---

## 3. DATABASE INFRASTRUCTURE STATUS

### 3.1 Schema Inventory (40 Schemas, 6,989 MB)

| Schema | Tables | Primary Function |
|--------|--------|------------------|
| `fhq_meta` | 140 | Registries, keys, attestations |
| `fhq_governance` | 125 | Governance actions, audit logs |
| `fhq_research` | 121 | Signal discovery, learning |
| `fhq_canonical` | 44 | Golden needles, G4/G5 gates |
| `fhq_alpha` | 34 | Alpha signals, backtesting |
| `fhq_execution` | 33 | Trading, paper orders |
| `fhq_finn` | 25 | FINN cognitive engine |
| `fhq_perception` | 15 | Market perception |
| `fhq_macro` | 15 | Macro indicators |
| `fhq_positions` | 13 | Position tracking |
| `fhq_graph` | 9 | Knowledge graph |
| `fhq_memory` | 7 | Agent memory, embeddings |
| `vision_*` | 40 | Signal verification |

### 3.2 Key Metrics

| Metric | Value |
|--------|-------|
| Golden Needles | 1,765 |
| Evidence Nodes | 29 |
| Graph Nodes | 13 |
| Graph Edges | 18 |
| Embeddings | 5 |
| Financial Ontology | 31 entries |
| Agent Keys | 11 (all Ed25519) |
| VEGA Attestations | 39 |
| Governance Actions | 5,173 |
| API Budget Entries | 34 |
| LLM Routing Logs | 406 |
| DEFCON Status | GREEN |

---

## 4. AUTONOMOUS DATABASE HORIZON ALIGNMENT

### 4.1 Current Alignment Score: 78.5%

| Pillar | Weight | Score | Gap |
|--------|--------|-------|-----|
| AOP Middleware | 15% | 85% | Self-healing queries |
| Multi-Agent Orchestration | 15% | 90% | Differential privacy |
| System 2 Reasoning | 15% | 80% | Reasoning chain population |
| Model Context Protocol | 10% | 70% | MCP gateway, resource registry |
| GraphRAG/HybridRAG | 15% | 75% | Unified pipeline |
| Zero Trust Security | 20% | 85% | Semantic ABAC, firewall |
| Regulatory Governance | 10% | 50% | EU AI Act, FLOP tracking |

### 4.2 Target Alignment: 92% by Q2 2026

---

## 5. IMPLEMENTATION ROADMAP

**Research Foundation:** Based on "Optimalisering av plan.pdf" evaluation with academic references:
- STaR-SQL (ACL 2025): 86.6% execution accuracy via reasoning-driven SQL
- MAGIC (AAAI 2025): Multi-agent self-correction guidelines
- GraphRAG-Bench (2025): Schema-bound accuracy 16% â†’ 90%
- EU AI Act: Effective dates Feb 2025 (prohibitions) and Aug 2025 (full compliance)

### 5.1 Immediate Actions (Next 4-6 Weeks)

#### 5.1.1 Establish Reasoning-Driven SQL Refinement (STaR-SQL + MAGIC)

**Objective:** Implement reasoning-driven, self-correcting SQL generation per Section 2.3, enhanced with STaR-SQL Chain-of-Thought and MAGIC-inspired auto-generated correction guidelines.

**Research Basis:**
- STaR-SQL (ACL 2025): Achieves **86.6% execution accuracy** - 31.6 percentage points above few-shot baseline
- MAGIC (AAAI 2025): Multi-agent system (manager, correction, feedback agents) that automatically generates self-correction guidelines
- Self-healing database platforms: Continuous monitoring with ML-based anomaly detection

**Database Changes (CEO-Corrected v2 - Pre-Implementation Fixes Applied):**

**CEO Pre-Implementation Review Corrections (2026-01-03):**
1. âœ… Latency ceiling: 30s â†’ 2000ms (matches ADR-016 HIGH_LATENCY breaker exactly)
2. âœ… circuit_state default: OPEN â†’ CLOSED (correct circuit breaker semantics)
3. âœ… Schema: fhq_meta â†’ fhq_governance (ADR-016 anchor alignment)
4. âœ… FK constraints: Added for correction_guideline_id, escalation_bundle_id
5. âœ… Reasoning artifact only: No full CoT storage (forensic bundle exception)
6. âœ… No new circuit breaker tables: Reuse existing `fhq_governance.circuit_breakers`
7. âœ… Evidence bundle pattern: Reference `vision_verification.summary_evidence_ledger`

```sql
-- Migration: 191_reasoning_driven_sql_refinement.sql
-- CEO PRE-IMPLEMENTATION REVIEW: 8 corrections applied 2026-01-03 (DB-grounded)
-- SCHEMA: fhq_governance (not fhq_meta) per ADR-016 anchor requirement
-- CIRCUIT BREAKER: Reuse fhq_governance.circuit_breakers (no new tables)

-- First create the evidence_bundle table for FK reference
-- PATTERN: Follows vision_verification.summary_evidence_ledger structure (CEO Directive 2025-12-20)
-- Ensures court-proof evidence chain: raw_query â†’ query_result_hash â†’ query_result_snapshot
CREATE TABLE IF NOT EXISTS fhq_governance.refinement_evidence_bundle (
    bundle_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    refinement_id UUID,  -- Back-reference (set after log insert)
    bundle_type VARCHAR(30) CHECK (bundle_type IN ('ESCALATION', 'FORENSIC', 'G4_INCIDENT')),
    raw_cot_preserved TEXT,  -- Only populated for G4 incidents
    preservation_reason TEXT NOT NULL,
    preserved_by VARCHAR(20) NOT NULL,
    -- Court-proof evidence fields (per vision_verification.summary_evidence_ledger pattern)
    raw_query TEXT,  -- The exact SQL that was attempted
    query_result_hash VARCHAR(64),  -- SHA-256 of results for verification
    query_result_snapshot JSONB,  -- Actual data at time of escalation
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE fhq_governance.sql_refinement_log (
    refinement_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    original_query TEXT NOT NULL,

    -- CORRECTED: Structured Reasoning Artifact (not raw CoT)
    -- Full CoT is ephemeral unless G4 incident forces retention
    reasoning_artifact JSONB NOT NULL CHECK (
        reasoning_artifact ? 'intent' AND
        reasoning_artifact ? 'schema_elements' AND
        reasoning_artifact ? 'verification_steps'
    ),
    -- Required artifact structure:
    -- {
    --   "intent": "what the query aims to answer",
    --   "schema_elements": {"tables": [], "columns": []},
    --   "join_plan": "FK path or explicit join keys",
    --   "filters": [],
    --   "aggregation_grain": null|"day"|"ticker"|etc,
    --   "verification_steps": [],
    --   "risk_flags": ["wide_join", "unknown_column_resolved_by_guess", etc]
    -- }
    reasoning_hash VARCHAR(64) NOT NULL,  -- SHA-256 of artifact
    artifact_version INTEGER DEFAULT 1,

    generated_sql TEXT NOT NULL,

    -- Error handling
    error_message TEXT,
    error_type VARCHAR(50),
    error_taxonomy VARCHAR(50),  -- Structured error classification

    -- MAGIC-inspired self-correction (FK ADDED)
    correction_guideline_id UUID REFERENCES fhq_governance.sql_correction_guidelines(guideline_id),
    refined_query TEXT,

    -- CORRECTED: Hard-bound circuit breaker (ADR-012 + ADR-016)
    attempt_number INTEGER DEFAULT 1 CHECK (attempt_number <= 3),
    max_attempts INTEGER DEFAULT 3,
    tokens_consumed INTEGER DEFAULT 0,
    tokens_budget INTEGER DEFAULT 4000,  -- Per-query ceiling
    latency_ms INTEGER,
    latency_budget_ms INTEGER DEFAULT 2000,  -- CORRECTED: 2.0s (matches ADR-016 HIGH_LATENCY breaker)

    -- Circuit breaker status
    -- CORRECTED: Default CLOSED (traffic allowed), OPEN means blocked
    circuit_state VARCHAR(20) DEFAULT 'CLOSED' CHECK (circuit_state IN ('CLOSED', 'OPEN', 'HALF_OPEN')),
    escalated_to_human BOOLEAN DEFAULT FALSE,
    escalation_bundle_id UUID REFERENCES fhq_governance.refinement_evidence_bundle(bundle_id),  -- FK ADDED

    success BOOLEAN DEFAULT FALSE,
    agent_id VARCHAR(20) NOT NULL,

    -- Semantic verification results (not just syntactic)
    semantic_check_passed BOOLEAN,
    semantic_check_details JSONB,  -- FK path plausibility, rowcount bounds, null explosion risk

    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Guidelines table (must exist before refinement_log for FK)
CREATE TABLE fhq_governance.sql_correction_guidelines (
    guideline_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    error_pattern VARCHAR(100) NOT NULL,
    correction_template TEXT NOT NULL,

    -- Lifecycle controls (per CEO directive)
    guideline_version INTEGER DEFAULT 1,
    supersedes_guideline_id UUID REFERENCES fhq_governance.sql_correction_guidelines(guideline_id),
    validated_on_benchmark_run_id UUID REFERENCES fhq_governance.aiqf_benchmark_runs(run_id),  -- FK ADDED

    success_rate FLOAT DEFAULT 0.0,
    success_rate_confidence_lower FLOAT,  -- 95% CI lower bound
    usage_count INTEGER DEFAULT 0,

    created_by VARCHAR(20) NOT NULL,

    -- Governance controls
    is_active BOOLEAN DEFAULT TRUE,
    is_global_default BOOLEAN DEFAULT FALSE,  -- Requires VEGA signoff
    vega_signoff_attestation_id UUID REFERENCES fhq_governance.vega_attestations(attestation_id),  -- FK ADDED
    sunset_at TIMESTAMPTZ,  -- Deprecation date
    sunset_reason TEXT,

    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- REUSE existing circuit_breakers table (CEO DIRECTIVE: No new breaker tables)
-- fhq_governance.circuit_breakers has UNIQUE(breaker_name) constraint
-- breaker_type must be one of: 'RATE','COST','EXECUTION','GOVERNANCE','MARKET','SYSTEM'

INSERT INTO fhq_governance.circuit_breakers (
    breaker_name,
    breaker_type,
    trigger_condition,
    defcon_threshold,
    action_on_trigger,
    is_active
) VALUES (
    'SQL_REFINEMENT_FAILURE',
    'GOVERNANCE',
    '{"condition": "refinement_failures_10min > 5", "description": "SQL refinement loop failure rate exceeded"}',
    'YELLOW',
    '{"actions": ["THROTTLE_REFINEMENT", "LOG_TO_GOVERNANCE"]}',
    true
)
ON CONFLICT (breaker_name) DO NOTHING;

-- Indexes on fhq_governance schema
CREATE INDEX idx_refinement_success ON fhq_governance.sql_refinement_log(success, created_at);
CREATE INDEX idx_refinement_agent ON fhq_governance.sql_refinement_log(agent_id, circuit_state);
CREATE INDEX idx_guidelines_pattern ON fhq_governance.sql_correction_guidelines(error_pattern, success_rate DESC);
CREATE INDEX idx_guidelines_active ON fhq_governance.sql_correction_guidelines(is_active, is_global_default);
-- NOTE: No index needed for circuit_breakers - existing table already indexed

-- Add back-reference to evidence bundle after refinement_log exists
ALTER TABLE fhq_governance.refinement_evidence_bundle
    ADD CONSTRAINT fk_evidence_refinement
    FOREIGN KEY (refinement_id) REFERENCES fhq_governance.sql_refinement_log(refinement_id);
```

**Python Implementation:**
- Create `03_FUNCTIONS/star_sql_reasoning_engine.py` (STaR-SQL CoT integration)
- Create `03_FUNCTIONS/magic_correction_agent.py` (Auto-guideline generation)
- Implement multi-agent pipeline: Manager â†’ SQL Generator â†’ Verifier â†’ Corrector
- Track error â†’ reasoning â†’ correction â†’ success chains

**Success Metric:** >86% queries correct on first attempt (matching STaR-SQL benchmark), >98% within 3 attempts.

---

## 13. CEO QUESTIONS - AUTHORITATIVE ANSWERS

### Q1: AIQF Definition - What is the exact formula and test set?

**Formula (Canonical):**
```
AIQF = (correct_first_attempt Ã— 0.60) +
       (correct_within_3 Ã— 0.25) +
       (semantic_correct Ã— 0.10) +
       (no_escalation Ã— 0.05)
```

**Test Set Specification:**
- **Location:** `fhq_governance.aiqf_benchmark_registry` (Migration 191b)
- **Size:** 50 queries of varying complexity
- **Query Classes:**
  - Simple lookups (10 queries)
  - Multi-table joins (15 queries)
  - Aggregations with filters (15 queries)
  - Complex nested/window queries (10 queries)
- **Evidence:** `dataset_hash`, `expected_results_fingerprint` stored per benchmark version
- **Certification:** VEGA signs `vega_certification_attestation_id` upon validation

---

### Q2: Query Classes in Scope - Which agents and schemas?

**Phase 1 Agents (Refinement Loop Authorized):**
| Agent | Authorized | Reason |
|-------|------------|--------|
| **FINN** | YES | Primary research queries |
| **STIG** | YES | Infrastructure/audit queries |
| **LARS** | NO (Phase 1) | Orchestrator - delegates to FINN/STIG |
| **LINE** | NO | Execution agent - no SQL generation |
| **VEGA** | NO | Governance - read-only |

**Phase 1 Schema Domains:**
| Schema | In Scope | Reason |
|--------|----------|--------|
| `fhq_meta` | YES | Core registries, minimal risk |
| `fhq_research` | YES | Signal discovery, primary use case |
| `fhq_canonical` | YES | Golden needles, critical data |
| `fhq_governance` | READ-ONLY | No refinement writes allowed |
| `fhq_execution` | NO (Phase 1) | Trading data - too sensitive |
| `fhq_alpha` | Phase 2 | After AIQF > 0.95 proven on Phase 1 |
| `vision_*` | Phase 2 | After circuit breaker stability proven |

**Authority Boundary:**
Refinement loop is **subordinate to** ADR-012 (Economic Safety) and ADR-016 (DEFCON). The loop cannot retry autonomously - it must respect circuit breaker state.

---

### Q3: Economic Constraints - Hard ceilings for refinement

**Per-Query Hard Ceilings:**
| Constraint | Ceiling | ADR Reference |
|------------|---------|---------------|
| Max Attempts | 3 | ADR-012 Â§4.2 |
| Max Tokens | 4,000 | ADR-012 Â§3.1 |
| Max Latency | 2,000 ms | ADR-016 Â§2.1 (matches HIGH_LATENCY breaker) |
| Max Cost | $0.02/query | ADR-012 Â§3.3 |

**Budget Attachment:**
| Agent | Budget Pool | Daily Ceiling |
|-------|-------------|---------------|
| FINN | `finn_research_daily` | $50/day |
| STIG | `stig_infra_daily` | $20/day |
| Refinement Total | `refinement_overhead` | $25/day |

**Escalation Path (when ceilings hit):**
1. Query marked `escalated_to_human = TRUE`
2. Evidence bundle created (`escalation_bundle_id`)
3. No further retries until human review
4. If 5 escalations in 10 minutes â†’ DEFCON YELLOW trigger

---

## 14. OBSERVABILITY TIMELINE - CORRECTED (Improvement D)

**CEO Directive:** Observability 2.0 Core must be **IMMEDIATE**, not Q4 2026.

**Immediate (Week 1-2):**
- Refinement success rate instrumentation
- Error taxonomy logging
- Guideline effectiveness (success_rate with confidence bounds)
- Cost per successful query

**Phase 1 (Week 3-4):**
- Circuit breaker state monitoring
- DEFCON integration alerts
- AIQF drift detection

**Phase 2 (Month 2-3):**
- Cognitive Performance Dashboard (UI polish)
- Historical trend analysis
- Predictive anomaly detection

**What is NOT deferred:**
- All Pillar 1-3 instrumentation is **immediate**
- Dashboard polish can wait, but metrics capture cannot

---

## 15. MIGRATION EXECUTION ORDER (CEO-DIRECTED)

**CEO Directive:** Run observability FIRST, then refinement migrations.

**Rationale:** Without instrumentation, you cannot measure the effect of the refinement loop. This prevents "governance-correct but unobservable" deployments.

### Execution Sequence

| Order | Migration | Purpose | Prerequisite |
|-------|-----------|---------|--------------|
| **1** | `196_observability_2_immediate.sql` | Pillar 1-3 instrumentation | None |
| **2** | `191b_aiqf_benchmark_registry.sql` | AIQF canonical metric | 196 (for drift detection) |
| **3** | `191_reasoning_driven_sql_refinement.sql` | SQL refinement + circuit breaker | 191b (for FK to benchmark_runs) |
| **4** | `192_hybridrag_graphrag_infrastructure.sql` | Knowledge graph extensions | 191 |
| **5** | `193_mcp_gateway_infrastructure.sql` | MCP tool registry | 192 |
| **6** | `194_eu_ai_act_compliance_scoped.sql` | AI inventory (DEPLOYER scope) | None (parallel) |
| **7** | `195_semantic_abac_privacy_preserving.sql` | ABAC with differential privacy | 193 |

### Pre-Flight Checklist

Before running ANY migration:
- [ ] VEGA attestation of migration SQL (signed)
- [ ] DEFCON status = GREEN
- [ ] Backup of `fhq_governance` schema complete
- [ ] Observability dashboards configured (after 196)

### Post-Migration Validation

After 196 + 191b + 191:
1. Run AIQF baseline benchmark (50 queries)
2. Record `aiqf_score` in `fhq_governance.aiqf_benchmark_runs`
3. VEGA signs attestation if AIQF â‰¥ 0.95
4. If AIQF < 0.95: HALT further migrations, enter remediation

---

## 16. CEO PRE-IMPLEMENTATION REVIEW SIGN-OFF

**Review Date:** 2026-01-03
**Reviewer:** CEO

### Corrections Applied (DB-Grounded 2026-01-03)

| # | Issue | Fix Applied | Status |
|---|-------|-------------|--------|
| 1 | Latency 30s vs ADR-016 2000ms trigger | Reduced to 2000ms (matches HIGH_LATENCY breaker) | âœ… |
| 2 | circuit_state DEFAULT 'OPEN' wrong | Changed to 'CLOSED' | âœ… |
| 3 | Tables in fhq_meta not fhq_governance | Moved to fhq_governance | âœ… |
| 4 | Section 5.3.1 said "reasoning_chain" | Corrected to "reasoning_artifact" | âœ… |
| 5 | Missing FK constraints | Added all FKs | âœ… |
| 6 | Migration order undefined | 196 â†’ 191b â†’ 191 sequence | âœ… |
| 7 | New circuit breaker table proposed | Reuse `fhq_governance.circuit_breakers` with INSERT | âœ… |
| 8 | Evidence bundle pattern unclear | Reference `vision_verification.summary_evidence_ledger` | âœ… |

### CEO Hard Commitments (DB-Grounded)

1. **No new schemas in ADR-022 Phase 1** - All tables in existing fhq_governance
2. **Latency ceiling is 2000ms** - Matches ADR-016 HIGH_LATENCY breaker exactly
3. **Reuse existing circuit_breakers table** - INSERT with `ON CONFLICT (breaker_name) DO NOTHING`

### Authorization

This ADR-022 DRAFT is now **IMPLEMENTATION-READY** pending:
- [ ] VEGA Technical Review
- [ ] LARS Strategic Approval
- [ ] CEO Final Authorization

---

## 17. CONCLUSION

Med denne planen vil FjordHQ kunne levere pÃ¥ ADR-022's lÃ¸fter pÃ¥ en **kontrollert, forskningsforankret og effektiv mÃ¥te**.

Hvert steg er knyttet til:
- **MÃ¥lbare milepÃ¦ler** med forskningsvaliderte benchmarks
- **Best practice** (MBB-klasse struktur)
- **Konkrete referanser** til systemets konstitusjon og aktuell AI-forskning

Slik balanseres **innovasjon med ansvarlighet** â€“ et absolutt krav for suksess nÃ¥r man befinner seg pÃ¥ frontlinjen av autonom AI-utvikling.

---

**ADR-022 Attestation:**
- **Evidence Method:** Direct database interrogation via MCP (`postgres_local` server)
- **Query Count:** 35+ SQL queries executed
- **Document Sources:** 21 ADRs, 18 IoS, 18 ECs verified in database
- **Constitutional Reference:** `00_CONSTITUTION/The Autonomous Database Horizon.md`
- **Research Reference:** `00_CONSTITUTION/Optimalisering av plan.pdf`
- **Schema Inventory:** 48 schemas, ~7GB, 621+ tables
- **Current Alignment Score:** 78.5% (target: 92% by Q2 2026)

**DB-Grounded Corrections Applied:**
- Latency: 2000ms (verified against ADR-016 HIGH_LATENCY breaker)
- Circuit breakers: Reuse `fhq_governance.circuit_breakers` with `UNIQUE(breaker_name)`
- Evidence bundles: Follow `vision_verification.summary_evidence_ledger` pattern
- No new schemas: All tables in existing `fhq_governance`

*Prepared by STIG (EC-003) under CEO Directive authority.*
*Date: 2026-01-03*
*DB-Grounded Review: 2026-01-03*
# ADR-023: MBB Corporate Standards Integration

**Status:** APPROVED
**Date:** 2026-01-08
**Authority:** STIG (CTO) with CEO approval
**Classification:** G1 - Reporting & Communication Standards

---

## EXECUTIVE SUMMARY

**Decision:** FjordHQ adopts McKinsey, BCG, Bain (MBB) corporate communication and analysis standards to enhance clarity, rigor, and executive decision-making velocity.

**Impact:** All strategic documents, evidence artifacts, and CEO-facing reports will follow:
- **Pyramid Principle** (answer first, then support)
- **MECE Framework** (mutually exclusive, collectively exhaustive)
- **Evidence-Based Decision Making** (every claim backed by data)
- **Structured Problem Solving** (issue tree decomposition)

**Rationale:** Economic Freedom = Alpha / Tidsbruk. MBB standards reduce CEO time spent parsing reports (denominator) while improving decision quality (numerator).

---

## PROBLEM STATEMENT

**Current State:**
- Reports often bury key findings in dense prose
- Analysis lacks clear structure (overlapping categories, missing elements)
- CEO spends excessive time extracting "So What?" from reports
- Evidence artifacts optimized for audit trails, not executive decision-making

**Cost:**
- CEO spends 2-3 hours/week parsing weekly reports
- Decision latency: 1-2 days for complex directives
- Strategic misalignment due to ambiguous recommendations

**Target State:**
- CEO grasps key findings in < 5 minutes per report
- Clear recommendation with supporting evidence structure
- Decision latency: Same-day for strategic directives
- Zero ambiguity in analysis structure (MECE principle)

---

## DECISION

FjordHQ adopts **MBB Corporate Standards** across all strategic communication, analysis, and evidence generation.

### Core Principles

#### 1. Pyramid Principle (Barbara Minto)

**Rule:** Start with the answer, then support with evidence.

**Structure:**
```
EXECUTIVE SUMMARY (The Answer)
â”œâ”€ Key Finding 1
â”œâ”€ Key Finding 2
â””â”€ Key Finding 3

SUPPORTING EVIDENCE
â”œâ”€ Finding 1 Evidence
â”‚   â”œâ”€ Data Point A
â”‚   â”œâ”€ Data Point B
â”‚   â””â”€ Data Point C
â”œâ”€ Finding 2 Evidence
â””â”€ Finding 3 Evidence
```

**Example:**
```
âŒ BAD (Bottom-Up):
"We analyzed 193 suppressions. 31 were regret. Regret rate is 16.1%.
Type A was 100%. This suggests hysteresis lag is the primary cause.
Therefore, we recommend adaptive confirms_required."

âœ… GOOD (Pyramid):
"RECOMMENDATION: Deploy adaptive confirms_required by Day 28.

RATIONALE: 100% of regret is Type A (hysteresis lag), not calibration
or data issues. Surgical fix targets root cause with minimal risk.

EVIDENCE:
- 193 suppressions analyzed (31 regret, 161 wisdom)
- Type A: 31 (100%), Type B: 0, Type C: 0
- Avg suppressed confidence: 0.77, chosen: 0.82 (system was RIGHT)"
```

---

#### 2. MECE Framework (Mutually Exclusive, Collectively Exhaustive)

**Rule:** Structure analysis so categories don't overlap and nothing is missing.

**Example:**

âŒ **NOT MECE** (Overlapping):
```
Regret Categories:
- Hysteresis Issues
- Timing Problems  â† Overlaps with hysteresis
- Confidence Errors
- Data Quality Issues
```

âœ… **MECE**:
```
Regret Categories (CEO-DIR-2026-021):
- Type A: Hysteresis Lag (confirms_required constraint)
- Type B: Confidence Floor (just below LIDS threshold)
- Type C: Data Blindness (missing macro signals)
- Type X: Unknown (residual category for edge cases)

Properties:
- Mutually Exclusive: Each regret belongs to exactly one category
- Collectively Exhaustive: All regrets covered (Type X catches outliers)
```

---

#### 3. Evidence-Based Decision Making

**Rule:** Every claim must be backed by verifiable data with court-proof evidence chain.

**Standard Format:**
```
CLAIM: "Current orchestrator runs every 88-90 minutes (misaligned with data patterns)"

EVIDENCE:
â”œâ”€ Raw Query: SELECT AVG(EXTRACT(EPOCH FROM (execution_start - LAG...)))
â”œâ”€ Query Result: 88.5 minutes average interval
â”œâ”€ Query Hash: SHA-256 a1b2c3...
â”œâ”€ Timestamp: 2026-01-08T20:45:00Z
â”œâ”€ Evidence ID: CEO-DIR-2026-023-DATABASE-VERIFICATION-001
â””â”€ Verification: Re-run query, compare hash
```

**Integration:**
- All evidence artifacts include `raw_query`, `query_result_hash`, `query_result_snapshot`
- Court-proof ledger: `vision_verification.summary_evidence_ledger`
- Enforcer: `stig_court_proof_enforcer.py`

---

#### 4. Structured Problem Solving (Issue Tree)

**Rule:** Decompose complex problems into hierarchical decision trees.

**Example:**

```
PROBLEM: 16.1% regret rate (missed alpha opportunities)
â”œâ”€ HYPOTHESIS 1: Calibration Problem (overconfidence)
â”‚   â”œâ”€ Test: Brier Score decomposition
â”‚   â””â”€ Result: REJECTED (Brier 0.12, well-calibrated)
â”œâ”€ HYPOTHESIS 2: Data Blindness (missing signals)
â”‚   â”œâ”€ Test: Type C regret analysis
â”‚   â””â”€ Result: REJECTED (0% Type C regret)
â””â”€ HYPOTHESIS 3: Hysteresis Lag (timing constraint) âœ“
    â”œâ”€ Test: Type A regret analysis
    â”œâ”€ Result: CONFIRMED (100% Type A regret)
    â””â”€ RECOMMENDATION: Adaptive confirms_required
```

---

#### 5. Executive Summary Standards

**Template:**

```markdown
# [DOCUMENT TITLE]

## EXECUTIVE SUMMARY

**Key Decision:** [Single-sentence recommendation]

**Rationale:** [2-3 sentences explaining why]

**Impact:** [Quantified business impact]

**Risk:** [Key risk + mitigation]

**Timeline:** [When will this happen]

---

## KEY FINDINGS

1. **Finding 1:** [Impact statement]
   - Supporting fact A
   - Supporting fact B

2. **Finding 2:** [Impact statement]
   - Supporting fact A
   - Supporting fact B

3. **Finding 3:** [Impact statement]
   - Supporting fact A
   - Supporting fact B

---

## SUPPORTING EVIDENCE

[Detailed analysis, data tables, charts]

---

## RECOMMENDATIONS

| Action | Owner | Target Date | Expected Impact |
|--------|-------|-------------|-----------------|
| Action 1 | STIG | 2026-01-10 | $X cost savings |
| Action 2 | FINN | 2026-01-15 | Y% alpha improvement |

---

## APPENDIX

[Technical details, raw data, additional context]
```

---

#### 6. The "So What?" Test

**Rule:** Every data point must answer "So What? Why does this matter?"

**Example:**

âŒ **BAD** (Data without context):
```
"Beliefs arrive every 2.4 minutes.
Regimes update every 5.4 minutes.
Orchestrator runs every 88 minutes."
```

âœ… **GOOD** (So What?):
```
"Beliefs arrive every 2.4 minutes (SO WHAT: High-frequency updates require
frequent monitoring, not 88-minute intervals).

Orchestrator runs every 88 minutes (SO WHAT: 60-80 minute latency gap,
missing regime shifts and belief updates during sleep periods).

RECOMMENDATION: 10-minute probe cycle to match data frequency."
```

---

#### 7. 80/20 Rule (Pareto Principle)

**Rule:** Focus on the 20% of factors that drive 80% of impact.

**Application:**

```
ANALYSIS: Regret Attribution (193 suppressions)

20% OF CAUSES (HIGH IMPACT):
- Type A (Hysteresis Lag): 31 cases (100% of regret)
  â†’ SURGICAL FIX: Adaptive confirms_required
  â†’ EXPECTED IMPACT: 6-9% regret reduction (50-75% of total regret)

80% OF CAUSES (LOW IMPACT):
- Type B (Confidence Floor): 0 cases
- Type C (Data Blindness): 0 cases
  â†’ NO ACTION REQUIRED (0% impact)

FOCUS: 100% effort on Type A surgical fix (80/20 principle).
```

---

## IMPLEMENTATION

### Phase 1: Documentation Standards (Day 10)

**Deliverables:**
1. Update all CEO-facing reports to pyramid structure
2. Apply MECE framework to all categorical analysis
3. Add "So What?" statements to all data points

**Owner:** STIG
**Target:** 2026-01-10

---

### Phase 2: Evidence Framework Upgrade (Day 15)

**Deliverables:**
1. Update evidence artifact templates with pyramid structure
2. Add executive summary to all evidence JSON files
3. Implement "claim â†’ evidence chain" validation

**Owner:** STIG
**Target:** 2026-01-15

**Code Changes:**
```python
# 03_FUNCTIONS/stig_court_proof_enforcer.py

class MBBEvidenceFormatter:
    """
    Format evidence artifacts following MBB pyramid principle
    """

    def format_evidence_artifact(self, evidence_data: Dict) -> Dict:
        """
        Transform raw evidence into MBB-compliant structure

        Structure:
        1. Executive Summary (answer first)
        2. Key Findings (MECE categories)
        3. Supporting Evidence (data tables)
        4. Technical Appendix (raw queries, hashes)
        """
        return {
            "executive_summary": {
                "key_decision": self.extract_recommendation(evidence_data),
                "rationale": self.extract_rationale(evidence_data),
                "impact": self.quantify_impact(evidence_data),
                "risk": self.assess_risk(evidence_data)
            },
            "key_findings": self.structure_findings_mece(evidence_data),
            "supporting_evidence": evidence_data['detailed_analysis'],
            "technical_appendix": {
                "raw_query": evidence_data['raw_query'],
                "query_result_hash": evidence_data['query_result_hash'],
                "timestamp": evidence_data['timestamp']
            }
        }
```

---

### Phase 3: CEO Reporting Templates (Day 22)

**Deliverables:**
1. Weekly learning report template (MBB structure)
2. Strategic directive response template
3. Evidence artifact template library

**Owner:** STIG
**Target:** 2026-01-22

---

### Phase 4: Training & Validation (Day 30)

**Deliverables:**
1. MBB standards training for all agents (LARS, FINN, CSEO, etc.)
2. Report quality validation checklist
3. CEO feedback loop (clarity, decision velocity metrics)

**Owner:** VEGA
**Target:** 2026-02-07

---

## METRICS & SUCCESS CRITERIA

### Primary Metrics

| Metric | Baseline | Target | Measurement |
|--------|----------|--------|-------------|
| **CEO Report Parsing Time** | 2-3 hours/week | < 1 hour/week | CEO self-report |
| **Decision Latency** | 1-2 days | Same-day | Timestamp directive issued â†’ response approved |
| **Clarity Score** | N/A | > 8/10 | CEO rates each report 1-10 |
| **MECE Compliance** | 60% | > 95% | VEGA audit of categorical analysis |
| **Pyramid Structure** | 40% | 100% | Executive summary present in all strategic docs |

### Secondary Metrics

| Metric | Target |
|--------|--------|
| **Evidence Chain Completeness** | 100% (every claim has evidence ID) |
| **"So What?" Coverage** | > 90% (data points have impact statements) |
| **80/20 Focus** | > 80% (recommendations target high-impact factors) |

---

## GOVERNANCE

### Quality Gates

**G1 (Self-Review):**
- Agent validates own output against MBB checklist
- Automated: MECE validator, pyramid structure checker

**G2 (Peer Review):**
- STIG reviews FINN reports for MBB compliance
- LARS reviews cross-agent synthesis for structure

**G3 (VEGA Audit):**
- Quarterly MBB compliance audit
- Evidence chain integrity verification
- CEO clarity score > 8/10 required

**G4 (CEO Approval):**
- CEO provides clarity feedback on strategic reports
- Continuous improvement based on CEO input

---

## TOOLS & AUTOMATION

### MBB Compliance Checker (Python)

```python
# 03_FUNCTIONS/mbb_compliance_checker.py

class MBBComplianceChecker:
    """
    Validate reports against MBB corporate standards

    Checks:
    1. Pyramid Structure (executive summary first)
    2. MECE Categories (no overlap, no gaps)
    3. Evidence Chain (every claim has evidence ID)
    4. So What Coverage (data points have impact statements)
    5. 80/20 Focus (recommendations target high-impact)
    """

    def validate_report(self, report: Dict) -> Dict:
        checks = {
            "pyramid_structure": self.check_pyramid(report),
            "mece_compliance": self.check_mece(report),
            "evidence_chain": self.check_evidence(report),
            "so_what_coverage": self.check_so_what(report),
            "pareto_focus": self.check_80_20(report)
        }

        score = sum(checks.values()) / len(checks)

        return {
            "compliance_score": score,
            "checks": checks,
            "passing": score >= 0.90,
            "recommendations": self.generate_recommendations(checks)
        }

    def check_pyramid(self, report: Dict) -> bool:
        """Executive summary exists and comes first"""
        return (
            "executive_summary" in report and
            list(report.keys())[0] == "executive_summary"
        )

    def check_mece(self, report: Dict) -> bool:
        """Categories are mutually exclusive and collectively exhaustive"""
        categories = self.extract_categories(report)

        # Check mutual exclusivity (no item in multiple categories)
        items = []
        for cat in categories.values():
            items.extend(cat)

        if len(items) != len(set(items)):
            return False  # Duplicate items = not mutually exclusive

        # Check collective exhaustiveness (all items categorized)
        all_items = self.extract_all_items(report)
        return set(items) == set(all_items)

    def check_evidence(self, report: Dict) -> bool:
        """Every claim has evidence ID"""
        claims = self.extract_claims(report)
        return all(claim.get('evidence_id') for claim in claims)

    def check_so_what(self, report: Dict) -> bool:
        """Data points have impact statements"""
        data_points = self.extract_data_points(report)
        return sum(dp.get('impact_statement') for dp in data_points) / len(data_points) >= 0.90

    def check_80_20(self, report: Dict) -> bool:
        """Recommendations target high-impact factors (top 20%)"""
        factors = self.extract_factors_with_impact(report)
        top_20_percent = sorted(factors, key=lambda x: x['impact'], reverse=True)[:int(len(factors)*0.2)]

        recommendations = self.extract_recommendations(report)
        return all(rec['factor'] in top_20_percent for rec in recommendations)
```

---

## SERPER INTEGRATION

**Serper API Key:** âœ… Configured in `.env` (line 74)

**Purpose:** Web search for market intelligence, news sentiment, macro signals

**MBB Standard Integration:**

**Before (Raw Search Results):**
```python
results = serper_search("Federal Reserve interest rate decision")
# Returns: 100+ unstructured search results
```

**After (MBB-Structured Output):**
```python
results = serper_search_mbb("Federal Reserve interest rate decision")

# Returns:
{
    "executive_summary": {
        "key_finding": "Fed held rates at 5.25-5.50% (hawkish hold)",
        "market_impact": "10Y yields +12bps, SPX -1.2%",
        "recommendation": "Shift to defensive positioning"
    },
    "key_findings_mece": {
        "policy_decision": "Rates unchanged at 5.25-5.50%",
        "forward_guidance": "Higher for longer (2 more hikes priced)",
        "market_reaction": "Risk-off (equities down, yields up)"
    },
    "supporting_evidence": [
        {"source": "Fed Press Release", "url": "...", "credibility": "PRIMARY"},
        {"source": "Bloomberg Terminal", "url": "...", "credibility": "HIGH"},
        {"source": "WSJ Analysis", "url": "...", "credibility": "HIGH"}
    ]
}
```

**Implementation:**
```python
# 03_FUNCTIONS/serper_mbb_wrapper.py

import os
import requests
from typing import Dict, List

class SerperMBBWrapper:
    """
    Serper API wrapper with MBB structured output

    Transforms raw search results into pyramid-structured
    executive intelligence reports
    """

    def __init__(self):
        self.api_key = os.getenv('SERPER_API_KEY')
        self.base_url = "https://google.serper.dev/search"

    def search_mbb(self, query: str, num_results: int = 10) -> Dict:
        """
        Execute search and return MBB-structured output

        Returns:
        - executive_summary: Key finding + market impact
        - key_findings_mece: Mutually exclusive categories
        - supporting_evidence: Source credibility ratings
        """
        # Raw search
        raw_results = self._raw_search(query, num_results)

        # LLM synthesis (FINN or GPT-4o)
        structured = self._synthesize_mbb(raw_results, query)

        return structured

    def _raw_search(self, query: str, num_results: int) -> List[Dict]:
        """Execute Serper API search"""
        headers = {
            'X-API-KEY': self.api_key,
            'Content-Type': 'application/json'
        }

        payload = {
            'q': query,
            'num': num_results
        }

        response = requests.post(self.base_url, json=payload, headers=headers)
        response.raise_for_status()

        return response.json().get('organic', [])

    def _synthesize_mbb(self, raw_results: List[Dict], query: str) -> Dict:
        """
        Use LLM to synthesize raw results into MBB structure

        Prompt Engineering:
        "You are a McKinsey consultant. Synthesize search results
        into pyramid structure: executive summary first, then
        MECE key findings, then supporting evidence."
        """
        # Call FINN or GPT-4o with structured prompt
        synthesis = call_llm_synthesis(raw_results, query)

        return {
            "executive_summary": synthesis['executive_summary'],
            "key_findings_mece": synthesis['key_findings'],
            "supporting_evidence": self._rate_source_credibility(raw_results),
            "serper_metadata": {
                "query": query,
                "num_results": len(raw_results),
                "timestamp": datetime.now(timezone.utc).isoformat()
            }
        }

    def _rate_source_credibility(self, results: List[Dict]) -> List[Dict]:
        """
        Rate source credibility (PRIMARY, HIGH, MEDIUM, LOW)

        PRIMARY: Fed, SEC, official government sources
        HIGH: Bloomberg Terminal, WSJ, FT
        MEDIUM: CNBC, Reuters, established news
        LOW: Blogs, social media, unverified sources
        """
        credibility_tiers = {
            "federalreserve.gov": "PRIMARY",
            "sec.gov": "PRIMARY",
            "bloomberg.com": "HIGH",
            "wsj.com": "HIGH",
            "ft.com": "HIGH",
            "reuters.com": "MEDIUM",
            "cnbc.com": "MEDIUM"
        }

        rated = []
        for result in results:
            domain = self._extract_domain(result['link'])
            credibility = credibility_tiers.get(domain, "LOW")

            rated.append({
                "title": result['title'],
                "url": result['link'],
                "snippet": result.get('snippet', ''),
                "credibility": credibility
            })

        return rated

    def _extract_domain(self, url: str) -> str:
        """Extract domain from URL"""
        from urllib.parse import urlparse
        return urlparse(url).netloc
```

---

## EXAMPLES

### Example 1: Weekly Learning Report (MBB Structure)

```markdown
# WEEKLY LEARNING METRICS (Week 2)

## EXECUTIVE SUMMARY

**Key Finding:** 100% of regret is Type A (hysteresis lag). Calibration
and data quality are NOT the problem.

**Recommendation:** Deploy adaptive confirms_required by Day 28 (shadow mode).
Expected regret reduction: 6-9% absolute (50-75% of current regret).

**Risk:** LOW. Shadow mode validation ensures no production impact until proven.

**Timeline:** Day 28 (shadow deploy) â†’ Day 60 (production evaluation)

---

## KEY FINDINGS (MECE)

1. **Type A Dominance (100% of Regret)**
   - 31 regret cases, all Type A (hysteresis lag)
   - 0 Type B (confidence floor)
   - 0 Type C (data blindness)
   - **So What:** Surgical fix available (adaptive confirms_required)

2. **Calibration is Healthy (Brier 0.12)**
   - Brier score: 0.12 (target: < 0.15)
   - Z-score: -0.3 (well-calibrated)
   - **So What:** NOT an overconfidence problem, skip recalibration

3. **Data Coverage is Complete (0% Type C)**
   - All macro signals present
   - No blind spots detected
   - **So What:** NOT a data problem, skip additional feeds

---

## SUPPORTING EVIDENCE

[Detailed tables, charts, raw data...]

---

## RECOMMENDATIONS (80/20 FOCUS)

| Action | Impact | Owner | Target |
|--------|--------|-------|--------|
| Deploy adaptive confirms_required (shadow) | 6-9% regret reduction | CRIO | Day 28 |
| Continue observation (no intervention) | Maintain data integrity | STIG | Day 30 |
```

---

### Example 2: Strategic Directive Response (MBB Structure)

```markdown
# CEO-DIR-2026-023 RESPONSE

## EXECUTIVE SUMMARY

**Status:** ALIGNED AND READY FOR DEPLOYMENT

**Key Decision:** Deploy 10-minute probe + 4-hour heavy cycle architecture
(validated by empirical database analysis).

**Impact:**
- 60-80% LLM call reduction ($200-300/month savings)
- 6-8x faster drift detection (10 min vs 88 min)
- Both numerator (alpha) and denominator (tidsbruk) improve

**Risk:** MEDIUM-HIGH (academic-to-production translation gap for UPF,
Prediction Markets). Mitigated via pilot phases with fallback strategies.

**Timeline:** Day 10 (core), Day 15-22 (advanced components), Day 45+ (experimental)

---

## KEY FINDINGS (MECE)

[Structured findings following pyramid principle...]
```

---

## REFERENCES

**Academic Sources:**
- Minto, Barbara. *The Pyramid Principle*. Prentice Hall, 2008.
- McKinsey & Company. *The McKinsey Way*. McGraw-Hill, 1999.

**Internal ADRs:**
- ADR-002: Audit Charter (evidence-based decision making)
- ADR-004: Change Gates (structured governance)
- ADR-018: Agent State Reliability Protocol (court-proof evidence)

**CEO Directives:**
- CEO-DIR-2025-12-20: Court-Proof Evidence Enforcement
- CEO-DIR-2026-021: Regret-to-Rule Learning Pipeline
- CEO-DIR-2026-023: Adaptive Vision Architecture

---

## APPROVAL

**Proposed By:** STIG (CTO)
**Date:** 2026-01-08
**Status:** APPROVED

**Compliance:** ADR-002 (Audit), ADR-004 (Governance), ADR-013 (Infrastructure)

**Signature:** STIG-ADR-023-MBB-STANDARDS
**Lineage Hash:** d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7e8f9a0b1c2

---

**ELIMINATE NOISE. GENERATE SIGNAL. COMMUNICATE WITH CLARITY.**
ADR-024 â€” AEL Phase Gate Protocol

Five-Rung Autonomy Ladder & Pre-Signable Intervention Categories

Status: APPROVED (G4 Activated 2026-01-14)
Tier: CONSTITUTIONAL â€“ LEARNING GOVERNANCE
Owner: CEO
Governing Authorities: FINN (Methodology), STIG (Runtime), VEGA (Compliance)
Dependencies: ADR-001, ADR-003, ADR-010, ADR-012, ADR-016, ADR-017, ADR-018, ADR-020, ADR-021, ADR-022, ADR-023
Scope: Autonomous Epistemic Learning (AEL) only â€“ not execution, not capital allocation

1. Purpose

This ADR formally defines what qualifies as autonomous learning inside FjordHQ and establishes a phase-gated path from observation to bounded autonomy.

The protocol exists to prevent three systemic failures:

Confusing local optimization with learning

Allowing silent drift under the guise of â€œimprovementâ€

Granting write-access before epistemic competence is proven

Autonomy without proof is not intelligence. It is risk.

2. Audit-Grade Definition of Autonomous Learning

For FjordHQ, autonomous learning is not a metric improvement, a one-off delta, or a human-authorized tweak.

Autonomous learning exists if and only if all of the following conditions are met:

Intervention Proposal
AEL produces a concrete, bounded intervention candidate with:

explicit scope

stated hypothesis

expected direction of effect

Controlled Application
The intervention is applied only through a declared gate.

No silent parameter drift

No implicit overwrite

No retroactive mutation

Out-of-Sample Evaluation
The system evaluates impact using:

predefined holdout logic (or equivalent)

declared horizon(s)

declared asset coverage

Replicable Improvement
Improvement must be:

statistically meaningful

operationally relevant

observable again in subsequent independent cycles

Deterministic Rollback
The system can revert to the prior state with:

exact version recovery

no residual contamination

Full Attribution
Every step is:

hash-bound

time-bound

agent-attributable

evidence-backed

If any of these elements are missing, the activity is classified as:

Optimization Experiment â€“ Not Autonomous Learning

This distinction is constitutional.

3. The Missing Transition: Effect vs Learning

FjordHQ currently demonstrates real effect, but not yet autonomous learning, because:

Coverage is partial (crypto + 1h horizon only)

Intervention authority is external (CEO / FINN / STIG)

Generalization across assets, regimes, and horizons is unproven

Repeatability across independent cycles is not established

This is correct and expected at this stage.

The objective of ADR-024 is not to accelerate autonomy, but to prevent premature autonomy.

4. The Five-Rung Autonomy Ladder (Non-Skippable)

Autonomy is earned sequentially. Skipping rungs destroys causality.

Rung A â€” Measurement Completeness

Learning cannot exist without complete outcomes.

Minimum requirements:

Continuous outcome matching across asset classes

crypto (24/7)

equities (exchange hours)

Multi-horizon support (e.g. 1h, 24h) with correct clocks

No sparse outcome domains

Failure mode if violated:

Subset learning

False confidence

Regime-conditional hallucination

Rung B â€” Canonical Evaluation Contract

All learning must be evaluated under a single invariant contract:

Fixed metric definitions

Fixed bucketing logic

Fixed sampling rules

Explicit leakage protections

If evaluation logic drifts, learning becomes undefined.

This rung establishes:

One definition of â€œbetterâ€, invariant over time.

Rung C â€” Intervention Registry & Causal Isolation

Every intervention must be:

Uniquely identified (hash + version)

Explicitly scoped (what it may touch)

Executed in isolation windows (e.g. LDOW)

Attribution must be unambiguous.

This prevents:

Cross-contamination

Post-hoc rationalization

Narrative overfitting

Rung D â€” Autonomous Proposal, Human-Authorized Execution

At this rung:

AEL may propose interventions

AEL may not execute them

Humans authorize execution under governance.

Success criteria:

Proposals are consistently coherent

Evidence is sufficient pre-execution

Rejections are rare and explainable

This is autonomy with a safety catch.

Rung E â€” Autonomous Execution Under Pre-Signed Policy

This is the first rung where operational autonomous learning exists.

Conditions:

Only pre-approved intervention classes

Strict parameter envelopes

Automatic rollback mandatory

VEGA attestation remains absolute

Execution autonomy is bounded, revocable, and supervised.

5. Pre-Signable Intervention Categories

Only the following categories may ever be pre-approved for autonomous execution:

Calibration tuning within fixed bounds

Threshold adjustments without topology change

Weight re-normalization under invariant schemas

Explicitly excluded:

Feature creation or removal

Regime logic changes

Objective function redefinition

Capital or execution logic

Each category requires:

Defined blast radius

Defined rollback path

Defined evaluation horizon

6. Learning Autonomy â€“ Domain-Specific Meaning

FjordHQ operates supervised probabilistic forecasting, not reinforcement learning from execution.

Therefore, learning is defined as:

Improved calibration (probabilities match frequencies)

Improved skill / resolution (Î”FSS â‰¥ 0)

Improved generalization (holdout deltas persist across cycles)

All improvements must respect:

latency constraints

safety envelopes

DEFCON governance

Economic Safety (ADR-012)

7. The Prime Rule of Autonomy

Write-access is earned through repeated correct read-only judgments.

Therefore:

Multiple cycles are mandatory

Coverage must expand deliberately

Metric gaming is prohibited

Silent drift is a Class-A violation

Stillness is not weakness.
Stillness is discipline.

8. AEL Phase Gate Model (Canonical)
Phase	Capability	Authority
Phase 0	Observation only	Current state
Phase 1	Read-only evaluation + evidence packaging	Near-complete
Phase 2	Intervention proposal	Next gate
Phase 3	Execution of pre-approved classes	Conditional
Phase 4	Expanded bounded autonomy	Future

Progression requires explicit gate approval.
No implicit promotion exists.

9. Governance & Enforcement

ADR-024 is enforced via ADR-018 (State Reliability)

Violations escalate under ADR-016 (DEFCON)

Unauthorized execution is a Class-A breach (ADR-009)

This ADR does not accelerate autonomy.
It protects the right kind of autonomy.

10. Final Statement

FjordHQ does not chase autonomy.
It earns it.

Autonomous learning is not speed.
It is earned write-access after epistemic proof.

End of ADR-024
 FjordHQ ACI Integration Plan

 C-Level Executive Strategy Document

 Classification: STIG-2025-ACI-INTEGRATION
 Authority: ADR-020 (ACI), ADR-021 (Cognitive Engine Architecture)
 Status: CONDITIONAL APPROVAL (CEO Directive 2025-12-17)

 ---
 CEO DIRECTIVE COMPLIANCE

 Reference: CEO DIRECTIVE: ACI INTEGRATION â€“ CONDITIONAL APPROVAL & REMEDIATION (2025-12-17)

 This plan has been rectified to incorporate all 8 Critical Mandates issued by CEO/FjordHQ Executive Board.

 | Mandate | Description                              | Compliance Section           |
 |---------|------------------------------------------|------------------------------|
 | I       | ASRP State-Binding (ADR-018)             | MANDATE I COMPLIANCE         |
 | II      | Economic Safety as Runtime Law (ADR-012) | MANDATE II COMPLIANCE        |
 | III     | DEFCON Deterministic Gating (ADR-016)    | MANDATE III COMPLIANCE       |
 | IV      | Governance of Learning Loop              | MANDATE IV COMPLIANCE        |
 | V       | IKEA Fail-Safe Default                   | MANDATE V COMPLIANCE         |
 | VI      | Audit-Grade Metrics                      | MANDATE VI COMPLIANCE        |
 | VII     | Evidence of Existence                    | APPENDIX A: SCHEMA INTEGRITY |
 | VIII    | Role Isolation (MIT Quad)                | MANDATE VIII COMPLIANCE      |

 ---
 EXECUTIVE SUMMARY

 FjordHQ has built sophisticated cognitive infrastructure (EC-018, EC-020, EC-021, EC-022) but only EC-018 is fully
 operational. This plan activates the complete ACI stack to enable autonomous alpha generation with
 governance-compliant self-learning.

 Current State:
 | Component           | Status     | Gap                                        |
 |---------------------|------------|--------------------------------------------|
 | EC-018 (Meta-Alpha) | ACTIVE     | None - operational                         |
 | EC-020 (SitC)       | REGISTERED | No implementation file                     |
 | EC-021 (InForage)   | REGISTERED | Imported but not wired into cognitive loop |
 | EC-022 (IKEA)       | REGISTERED | No implementation file                     |
 | Learning Loop       | PARTIAL    | Not connected to cognitive engines         |

 Target State: Full ACI stack operational with self-learning feedback loop.

 ---
 WAVE 1: IKEA IMPLEMENTATION (CRITICAL - SAFETY FIRST)

 Rationale: IKEA is the hallucination firewall. Must be first to prevent bad data decisions.

 1.1 Create 03_FUNCTIONS/ios022_ikea_boundary_engine.py

 # Core functionality required:
 class IKEABoundaryEngine:
     def classify_query(self, query: str) -> Tuple[str, float]:
         """Returns (PARAMETRIC|EXTERNAL_REQUIRED|HYBRID, confidence)"""

     def check_volatility_class(self, data_type: str) -> str:
         """Returns EXTREME|HIGH|MEDIUM|LOW|STATIC"""

     def log_classification(self, query, classification, confidence):
         """Log to fhq_meta.knowledge_boundary_log"""

 Classification Rules (per EC-022 contract):
 - PARAMETRIC: Stable knowledge (formulas, definitions, sector classifications)
 - EXTERNAL_REQUIRED: Time-sensitive data (prices, earnings, macro releases)
 - HYBRID: Stable concept + current data (P/E vs industry average)

 1.2 Wire IKEA into finn_cognitive_brain.py

 File: C:\fhq-market-system\vision-ios\03_FUNCTIONS\finn_cognitive_brain.py

 Integration point: Before every LLM call in run_cognitive_cycle() (around line 433-456)

 # Add IKEA gate before context retrieval
 if self.ikea_engine:
     for claim in self._extract_factual_claims(query):
         classification, confidence = self.ikea_engine.classify_query(claim)
         if classification == 'EXTERNAL_REQUIRED':
             # Must retrieve before proceeding
             self._trigger_retrieval(claim)

 1.3 Wire IKEA into ec018_alpha_daemon.py

 File: C:\fhq-market-system\vision-ios\03_FUNCTIONS\ec018_alpha_daemon.py

 Integration point: Before hypothesis generation to ensure all factual claims have retrieval backing.

 ---
 WAVE 2: INFORAGE FULL INTEGRATION (HIGH PRIORITY)

 Rationale: InForage exists (inforage_cost_controller.py) but is not fully wired.

 2.1 Complete integration in finn_cognitive_brain.py

 Current state (lines 68-73):
 try:
     from inforage_cost_controller import InForageCostController, StepType, CostDecision
     COST_CONTROL_AVAILABLE = True
 except ImportError:
     COST_CONTROL_AVAILABLE = False

 Required changes in run_cognitive_cycle() (around line 475-488):

 # Before each API-consuming step, check InForage
 if self.cost_controller:
     predicted_gain = self._estimate_information_gain(patch=self.state.current_patch)
     result = self.cost_controller.check_cost(StepType.API_CALL, predicted_gain)

     if result.should_abort:
         logger.warning(f"InForage ABORT: {result.abort_reason}")
         # Skip this cycle, preserve budget for higher-value opportunities
         results['inforage_abort'] = result.abort_reason
         return results

 2.2 Add InForage to ec018_alpha_daemon.py

 Add cost checks before:
 - Serper API call (news retrieval)
 - DeepSeek API call (hypothesis generation)

 ---
 WAVE 3: SITC PLANNER (MEDIUM PRIORITY)

 Rationale: SitC requires IKEA and InForage to function. Orchestrates reasoning chains.

 3.1 Create 03_FUNCTIONS/ios020_sitc_planner.py

 class SitCPlanner:
     def create_research_plan(self, hypothesis: str) -> List[ChainNode]:
         """Decompose hypothesis into Chain-of-Query nodes"""

     def verify_node(self, node: ChainNode) -> VerificationResult:
         """Verify node using IKEA + InForage"""

     def revise_plan(self, node: ChainNode, new_evidence: Any) -> List[ChainNode]:
         """Dynamically revise plan based on new evidence"""

     def log_chain(self, nodes: List[ChainNode]):
         """Log to fhq_meta.chain_of_query"""

 Node Types (per EC-020 contract):
 - PLAN_INIT, REASONING, SEARCH, VERIFICATION, PLAN_REVISION, SYNTHESIS, ABORT

 3.2 Wire SitC into cognitive loop

 Wrap research tasks in SitC plans for:
 - EC-018 hypothesis generation
 - FINN cognitive cycle research steps

 ---
 WAVE 4: LEARNING LOOP COMPLETION (HIGH PRIORITY)

 Rationale: Close the feedback loop for self-improvement.

 4.1 Add cognitive engine feedback to learning_feedback_pipeline.py

 File: C:\fhq-market-system\vision-ios\03_FUNCTIONS\learning_feedback_pipeline.py

 Add new methods:
 def _update_ikea_classifier(self, outcome: TradeOutcome):
     """Update IKEA boundary classifier based on trade outcomes"""
     # If hypothesis used hallucinated data and trade failed -> penalty

 def _update_inforage_scent(self, outcome: TradeOutcome):
     """Update InForage Scent Score based on actual ROI"""
     # Compare predicted_gain to actual_gain, adjust scent model

 def _update_sitc_success(self, outcome: TradeOutcome):
     """Update SitC plan success metrics"""
     # Track which plan structures lead to successful trades

 4.2 Log cognitive decisions to evidence table

 All IKEA/InForage/SitC decisions must log to fhq_meta.cognitive_engine_evidence:
 INSERT INTO fhq_meta.cognitive_engine_evidence (
     engine_id, task_id, invocation_type,
     input_context, decision_rationale, output_modification,
     cost_usd, information_gain_score, chain_integrity_score,
     boundary_violation, signature
 )

 ---
 WAVE 5: DAEMON ORCHESTRATION

 5.1 Update scheduled tasks

 Market Hours (09:30-16:00 ET):
 - Every 30 min: FINN Cognitive Cycle with full ACI stack
 - Every 1 hour: EC-018 Alpha Hunt

 Daily:
 - 06:00: IoS-001 price ingestion
 - 07:00: IoS-003 regime update
 - 22:00: Causal graph update (VarClus + PCMCI)

 5.2 Health monitoring

 Add cognitive engine heartbeat checks to existing monitoring.

 ---
 CRITICAL FILES TO MODIFY

 | File                                        | Action                                | Priority |
 |---------------------------------------------|---------------------------------------|----------|
 | 03_FUNCTIONS/ios022_ikea_boundary_engine.py | CREATE                                | CRITICAL |
 | 03_FUNCTIONS/finn_cognitive_brain.py        | MODIFY (wire IKEA, complete InForage) | CRITICAL |
 | 03_FUNCTIONS/ec018_alpha_daemon.py          | MODIFY (add IKEA/InForage gates)      | HIGH     |
 | 03_FUNCTIONS/ios020_sitc_planner.py         | CREATE                                | MEDIUM   |
 | 03_FUNCTIONS/learning_feedback_pipeline.py  | MODIFY (add cognitive feedback)       | HIGH     |
 | 03_FUNCTIONS/context_injection_layer.py     | VERIFY (already integrated)           | LOW      |

 ---
 DATABASE TABLES (VERIFIED EXIST)

 - fhq_meta.chain_of_query - SitC plan nodes
 - fhq_meta.cognitive_engine_evidence - Audit trail
 - fhq_meta.knowledge_boundary_log - IKEA classifications
 - fhq_meta.search_foraging_log - InForage decisions
 - fhq_optimization.inforage_cost_log - Cost tracking

 ---
 SUCCESS METRICS

 | Metric                       | Target      | Source                 |
 |------------------------------|-------------|------------------------|
 | IKEA Classification Accuracy | >85%        | knowledge_boundary_log |
 | InForage Cost Savings        | >40%        | inforage_cost_log      |
 | Hypothesis Validation Rate   | >30% G0->G1 | g0_draft_proposals     |
 | Paper Trading Sharpe         | >0.5        | paper_trade_outcomes   |
 | Learning Updates/Week        | >50         | learning_updates       |

 ---
 DEFCON BEHAVIOR

 | DEFCON | EC-020 (SitC)         | EC-021 (InForage)       | EC-022 (IKEA)      |
 |--------|-----------------------|-------------------------|--------------------|
 | GREEN  | Full dynamic planning | Normal optimization     | Standard check     |
 | YELLOW | Shorter chains        | Aggressive cost-cutting | Bias internal      |
 | ORANGE | CoT validation only   | Emergency budget only   | External mandatory |
 | RED    | ABORT all chains      | HALT all searches       | READ-ONLY          |

 ---
 IMPLEMENTATION SEQUENCE

 1. WAVE 1.1: Create ios022_ikea_boundary_engine.py
 2. WAVE 1.2: Wire IKEA into finn_cognitive_brain.py
 3. WAVE 1.3: Wire IKEA into ec018_alpha_daemon.py
 4. WAVE 2.1: Complete InForage integration in finn_cognitive_brain.py
 5. WAVE 2.2: Add InForage to ec018_alpha_daemon.py
 6. WAVE 4.1: Add cognitive feedback to learning_feedback_pipeline.py
 7. WAVE 3.1: Create ios020_sitc_planner.py
 8. WAVE 3.2: Wire SitC into cognitive loop
 9. WAVE 5: Update daemon orchestration

 ---
 GOVERNANCE COMPLIANCE

 - All changes require G1 technical validation
 - VEGA attestation required for each wave completion
 - Ed25519 signatures on all database operations
 - Audit trail to fhq_meta.adr_audit_log

 Authority Chain: CEO -> LARS (strategy) -> STIG (implementation) -> VEGA (governance)

 ---
 GOVERNANCE ARTIFACTS TO CREATE

 CEO Directives (05_GOVERNANCE/PHASE3/)

 | File                                            | Purpose                         |
 |-------------------------------------------------|---------------------------------|
 | CD_ACI_WAVE1_IKEA_ACTIVATION_20251217.json      | IKEA boundary engine activation |
 | CD_ACI_WAVE2_INFORAGE_COMPLETION_20251217.json  | InForage full integration       |
 | CD_ACI_WAVE3_SITC_ACTIVATION_20251217.json      | SitC planner activation         |
 | CD_ACI_WAVE4_LEARNING_LOOP_20251217.json        | Learning feedback completion    |
 | CD_ACI_WAVE5_DAEMON_ORCHESTRATION_20251217.json | Daemon scheduling update        |

 VEGA Attestation Templates

 Each wave completion requires:
 {
   "attestation_type": "G1_TECHNICAL_VALIDATION",
   "target": "EC-0XX",
   "gate_level": "G1",
   "status": "PENDING",
   "validation_criteria": [...],
   "evidence_required": [...]
 }

 ---
 FULL IMPLEMENTATION SCOPE

 User Decision: Full implementation of all 5 waves with complete governance artifacts.

 Deliverables Checklist (CEO Mandate Compliant)

 Core Implementation:
 - ios022_ikea_boundary_engine.py created (with fail-safe default per Mandate V)
 - ios020_sitc_planner.py created (with ASRP state binding per Mandate I)
 - finn_cognitive_brain.py modified (RuntimeEconomicGuardian per Mandate II)
 - ec018_alpha_daemon.py modified (IKEA + InForage + ASRP binding)
 - learning_feedback_pipeline.py modified (staging-only per Mandate IV)
 - finn_brain_scheduler.py modified (DEFCON hard gates per Mandate III)

 New Infrastructure:
 - RuntimeEconomicGuardian class (Mandate II)
 - defcon_gate_check() function (Mandate III)
 - fhq_governance.learning_proposals table (Mandate IV)
 - Schema boundary enforcement decorator (Mandate VIII)

 Governance Artifacts:
 - 5 CEO Directive JSON files created
 - G1 validation tests for each wave
 - VEGA attestation templates
 - Schema integrity hash recorded

 ---
 MANDATE I COMPLIANCE: ASRP State-Binding (ADR-018)

 Requirement: Every artifact must embed state_snapshot_hash and timestamp from Atomic Shared State.

 Implementation:

 1. IKEA Classifications - Every knowledge_boundary_log entry will include:
 {
     "state_snapshot_hash": <current_asrp_hash>,
     "state_timestamp": <atomic_timestamp>,
     "classification": "PARAMETRIC|EXTERNAL_REQUIRED|HYBRID",
     "query_hash": <sha256_of_query>
 }
 2. InForage Decisions - Every search_foraging_log entry will include:
 {
     "state_snapshot_hash": <current_asrp_hash>,
     "state_timestamp": <atomic_timestamp>,
     "decision": "CONTINUE|ABORT",
     "cost_at_decision": <cumulative_cost>
 }
 3. SitC Plan Nodes - Every chain_of_query node will include:
 {
     "state_snapshot_hash": <hash_at_node_creation>,
     "state_timestamp": <atomic_timestamp>,
     "node_type": "REASONING|SEARCH|VERIFICATION|..."
 }
 4. Helper Function - Create get_current_asrp_state() in all cognitive engines:
 def get_current_asrp_state(conn) -> Tuple[str, datetime]:
     """Retrieve atomic state snapshot hash and timestamp."""
     sql = '''
         SELECT state_snapshot_hash, vector_timestamp
         FROM fhq_meta.aci_state_snapshot_log
         WHERE is_atomic = true
         ORDER BY created_at DESC LIMIT 1
     '''
     return (hash, timestamp)

 ---
 MANDATE II COMPLIANCE: Economic Safety as Runtime Law (ADR-012)

 Requirement: InForageCostController must be unbypassable at Runtime level, not just Agent level.

 Implementation:

 1. Runtime Guardian Class - Create RuntimeEconomicGuardian in finn_cognitive_brain.py:
 class RuntimeEconomicGuardian:
     """Unbypassable economic safety enforcement."""

     def __init__(self):
         self._cost_controller = None
         self._load_failed = False

     def initialize(self) -> bool:
         try:
             from inforage_cost_controller import InForageCostController
             self._cost_controller = InForageCostController()
             return True
         except Exception as e:
             self._load_failed = True
             self._trigger_circuit_breaker(f"ECONOMIC_SAFETY_LOAD_FAILURE: {e}")
             return False

     def check_or_fail(self, step_type, predicted_gain) -> CostCheckResult:
         """Check cost or HARD FAIL. No exceptions."""
         if self._load_failed or self._cost_controller is None:
             raise RuntimeEconomicViolation("Cost controller unavailable - HARD FAIL")
         return self._cost_controller.check_cost(step_type, predicted_gain)
 2. Hard Fail Mode - If cost controller fails to load:
   - Circuit breaker triggers immediately
   - All cognitive cycles BLOCKED
   - DEFCON escalation to ORANGE
 3. No Try/Except Bypass - Replace optional patterns:
 # BEFORE (Bypassable):
 if self.cost_controller:
     result = self.cost_controller.check_cost(...)

 # AFTER (Unbypassable):
 result = self.runtime_guardian.check_or_fail(...)  # Raises on failure

 ---
 MANDATE III COMPLIANCE: DEFCON Deterministic Gating (ADR-016)

 Requirement: Daemon Scheduler must have explicit Hard Gates linked to DEFCON state.

 Implementation:

 1. DaemonOrchestrator DEFCON Gates - Create defcon_gate_check():
 def defcon_gate_check(conn) -> Tuple[bool, str]:
     """Hard gate check BEFORE any cycle starts."""
     sql = "SELECT current_level FROM fhq_governance.defcon_status ORDER BY updated_at DESC LIMIT 1"
     level = execute(sql)

     if level in ('RED', 'BLACK'):
         kill_running_processes()  # Immediate termination
         return (False, f"DEFCON {level}: ALL PROCESSES KILLED")

     if level == 'ORANGE':
         return (False, f"DEFCON ORANGE: NEW CYCLES BLOCKED")

     return (True, f"DEFCON {level}: PROCEED")
 2. Scheduler Integration - In finn_brain_scheduler.py:
 def run_scheduled_cycle():
     # HARD GATE - Checked BEFORE any agent logic
     can_proceed, reason = defcon_gate_check(conn)
     if not can_proceed:
         logger.critical(reason)
         return  # BLOCKED

     # Only if gate passes
     brain.run_cognitive_cycle()
 3. DEFCON Behavior Matrix (Proscriptive, not Descriptive):
 | DEFCON | Research Cycles   | Running Processes | Learning Updates |
 |--------|-------------------|-------------------|------------------|
 | GREEN  | ALLOWED           | ALLOWED           | STAGING ONLY     |
 | YELLOW | ALLOWED (reduced) | ALLOWED           | STAGING ONLY     |
 | ORANGE | BLOCKED           | ALLOWED (no new)  | BLOCKED          |
 | RED    | BLOCKED           | KILLED            | BLOCKED          |
 | BLACK  | BLOCKED           | KILLED            | BLOCKED          |


 ---
 MANDATE IV COMPLIANCE: Governance of Learning Loop (ADR-020/021)

 Requirement: NO automated updates to IKEA classifier. All updates go to staging + G1/VEGA approval.

 Implementation:

 1. Learning Loop Architecture (Corrected):
 Trade Outcome
      â†“
 learning_feedback_pipeline.py
      â†“
 PROPOSAL (fhq_governance.learning_proposals)  â† Staging Area
      â†“
 [G1 VEGA Attestation Required]
      â†“
 PRODUCTION (cognitive engine weights)
 2. New Table - fhq_governance.learning_proposals:
 CREATE TABLE fhq_governance.learning_proposals (
     proposal_id UUID PRIMARY KEY,
     engine_id VARCHAR(10),  -- 'IKEA', 'INFORAGE', 'SITC'
     proposal_type VARCHAR(50),  -- 'BOUNDARY_WEIGHT', 'SCENT_MODEL', 'PLAN_PRIOR'
     current_value JSONB,
     proposed_value JSONB,
     evidence_bundle JSONB,  -- Trade outcomes that justify the change
     status VARCHAR(20) DEFAULT 'PENDING',  -- PENDING, APPROVED, REJECTED
     submitted_at TIMESTAMPTZ DEFAULT NOW(),
     reviewed_by VARCHAR(50),
     reviewed_at TIMESTAMPTZ,
     vega_attestation_id UUID
 );
 3. Prohibited Actions:
   - âŒ self.ikea_classifier.update_weights(outcome)
   - âŒ self.inforage.adjust_scent_model(actual_roi)
   - âœ… self._propose_learning_update(engine, proposal, evidence)
 4. "Facts Without Sources Are Illegal" - This constraint is IMMUTABLE:
   - IKEA boundary engine parameters are Constitutional
   - Any relaxation requires CEO + VEGA approval through G4 gate

 ---
 MANDATE V COMPLIANCE: IKEA Fail-Safe Default

 Requirement: If uncertain or failed, default to EXTERNAL_REQUIRED (maximum safety).

 Implementation:

 1. Fail-Safe Classification in ios022_ikea_boundary_engine.py:
 def classify_query(self, query: str) -> Tuple[str, float]:
     try:
         classification, confidence = self._internal_classify(query)

         # FAIL-SAFE: If confidence < threshold, default to maximum safety
         if confidence < 0.7:
             logger.warning(f"IKEA: Low confidence ({confidence:.2f}), defaulting to EXTERNAL_REQUIRED")
             return ('EXTERNAL_REQUIRED', confidence)

         return (classification, confidence)

     except Exception as e:
         # FAIL-SAFE: Any failure defaults to maximum safety
         logger.error(f"IKEA classification failed: {e}")
         return ('EXTERNAL_REQUIRED', 0.0)
 2. Burden of Proof Inversion:
   - Default state: EXTERNAL_REQUIRED (assume we don't know)
   - To classify as PARAMETRIC: Must prove with high confidence (>0.85)
   - To classify as HYBRID: Must identify which parts are parametric
 3. Extractor Failure Handling:
 def _extract_factual_claims(self, text: str) -> List[str]:
     try:
         claims = self._nlp_extract(text)
         return claims if claims else [text]  # If no claims extracted, treat entire text as claim
     except:
         return [text]  # Fail-safe: entire text needs verification

 ---
 MANDATE VI COMPLIANCE: Audit-Grade Metrics

 Requirement: Ground truth sources defined, vanity metrics removed.

 Implementation:

 1. Ground Truth Sources:
 | Metric                       | Ground Truth Provider      | Measurement Method                      |
 |------------------------------|----------------------------|-----------------------------------------|
 | IKEA Classification Accuracy | VEGA Sampling (10% random) | Human review of 50 classifications/week |
 | InForage Cost Savings        | ADR-012 Budget Log         | actual_cost / baseline_cost             |
 | Hypothesis Validation Rate   | IoS-004 Backtest Results   | g1_validated / g0_submitted             |
 | Paper Trading Performance    | Alpaca Paper API           | Realized P&L from broker                |

 2. Removed Vanity Metrics (cannot be mathematically proven):
   - ~~"Chain Integrity Score >0.9"~~ â†’ No ground truth definition
   - ~~"InForage Scent Accuracy >80%"~~ â†’ No labeled dataset
 3. New Audit-Compliant Metrics:
 | Metric                     | Formula                              | Source Table        |
 |----------------------------|--------------------------------------|---------------------|
 | IKEA False Negative Rate   | (claims_hallucinated / total_claims) | vega.sampling_audit |
 | InForage Budget Efficiency | (value_generated / cost_incurred)    | inforage_cost_log   |
 | SitC Plan Completion Rate  | (plans_completed / plans_started)    | chain_of_query      |


 ---
 MANDATE VIII COMPLIANCE: Role Isolation (MIT Quad)

 Requirement: IKEA/InForage/SitC outputs are Evidence, not Truth. Must reside in fhq_meta.

 Implementation:

 1. Schema Boundary Enforcement:
 | Schema     | Purpose               | IKEA/InForage/SitC Access        |
 |------------|-----------------------|----------------------------------|
 | fhq_data   | Canonical Market Data | âŒ READ-ONLY                     |
 | fhq_market | Canonical Truth       | âŒ NO ACCESS                     |
 | fhq_meta   | Context & Evidence    | âœ… WRITE (logs, classifications) |
 | fhq_alpha  | Alpha Proposals       | âœ… WRITE (via G0 process only)   |

 2. Port-of-Admittance Enforcement:
   - Cognitive outputs (IKEA classifications, InForage decisions) â†’ fhq_meta.*
   - To become Truth â†’ Must pass through G0-G4 gates â†’ fhq_alpha.*
   - Never direct write to fhq_data.* or fhq_market.*
 3. Code Enforcement - All cognitive engine writes must use:
 ALLOWED_SCHEMAS = ['fhq_meta', 'fhq_optimization']

 def validated_insert(self, schema: str, table: str, data: dict):
     if schema not in ALLOWED_SCHEMAS:
         raise MITQuadViolation(f"Cognitive engine cannot write to {schema}")
     # Proceed with insert

 ---
 APPENDIX A: SCHEMA INTEGRITY REPORT (Mandate VII)

 Generated: 2025-12-17
 Verification Method: Direct PostgreSQL query against production database

 | Schema           | Table                     | Row Count | Status          |
 |------------------|---------------------------|-----------|-----------------|
 | fhq_meta         | aci_state_snapshot_log    | 0         | EXISTS (empty)  |
 | fhq_meta         | chain_of_query            | 0         | EXISTS (empty)  |
 | fhq_meta         | cognitive_engine_evidence | 0         | EXISTS (empty)  |
 | fhq_meta         | knowledge_boundary_log    | 0         | EXISTS (empty)  |
 | fhq_meta         | search_foraging_log       | 0         | EXISTS (empty)  |
 | fhq_optimization | inforage_cost_log         | 10        | EXISTS (active) |
 | fhq_alpha        | g0_draft_proposals        | 154       | EXISTS (active) |
 | fhq_alpha        | g1_validated_signals      | 91        | EXISTS (active) |
 | fhq_alpha        | backtest_queue            | 2         | EXISTS (active) |
 | fhq_alpha        | backtest_results          | 144       | EXISTS (active) |
 | fhq_execution    | paper_trade_outcomes      | 0         | EXISTS (empty)  |
 | fhq_execution    | learning_updates          | 0         | EXISTS (empty)  |

 Migration Reference: Migration 102 (cognitive engine registration), Migration 129 (ACI console infrastructure)

 Schema Hash: To be computed at implementation time via pg_dump --schema-only | sha256sum
