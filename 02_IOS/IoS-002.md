IoS-002 – Indicator Engine (Sensory Cortex)Canonical Version: 2026.PROD.1Status: DRAFT FOR G1 (Technical Validation)Owner: FINN (Research & Insight Domain)Authority Chain: ADR-001 → ADR-003 → ADR-007 → IoS-001 → IoS-002Governing Agent: VEGA (Compliance & Oversight)Environment: fhq_market (Source), fhq_research (Target)1. Executive SummaryIoS-002 establishes the Sensory Cortex of the FjordHQ Intelligence Operating System.In the transition from Data to Alpha, raw OHLCV (Open, High, Low, Close, Volume) data is insufficient for high-fidelity reasoning. It requires a deterministic transformation layer to convert "market noise" into "auditable features."The Indicator Engine is the sole authorized system component responsible for calculating, validating, and storing technical market drivers. It serves as the bridge between:Raw Reality (IoS-001 Canonical Assets)Strategic Reasoning (IoS-003 Meta-Perception)Without this module, the reasoning agents (FINN/LARS) are effectively blind, forced to hallucinate patterns from raw noise. With this module, they perceive mathematically defined reality.2. Strategic Scope & Feature UniverseThis module does not interpret the market; it measures it. It produces the "Feature Vectors" required for downstream AI reasoning, aligned with Gartner's definition of reliable data foundations for reasoning models2222.The engine computes four classes of deterministic features:2.1 Momentum & Oscillators (The "Pulse")RSI (14) – Relative Strength IndexStochRSI – Stochastic RSICCI – Commodity Channel IndexMFI – Money Flow IndexPurpose: Quantify overextension and reversal probability.2.2 Trend & Direction (The "Current")MACD – Moving Average Convergence DivergenceMoving Averages: EMA (9, 20, 50, 200), SMA (50, 200)Ichimoku Cloud: Full 5-line suite (Tenkan, Kijun, Senkou A/B, Chikou)PSAR – Parabolic SARPurpose: Objectively define market regime (Bull/Bear/Neutral).2.3 Volatility & Risk (The "Weather")Bollinger Bands (20, 2 std dev)ATR (14) – Average True RangePurpose: Define dynamic risk parameters for Position Sizing (IoS-012).2.4 Volume & Force (The "Fuel")OBV – On-Balance VolumeROC – Rate of ChangePurpose: Validate price action through participation.3. Architectural Rationale (Why Position #002?)The FjordHQ Value Chain dictates that feature extraction must precede reasoning.Data Integrity (ADR-001/013): FINN owns the research domain. Features must be calculated once and stored canonically to prevent "calculation drift" between agents.Orchestration Logic (ADR-007): The pipeline FETCH -> CALC -> THINK -> ACT breaks if the CALC stage is missing. Reasoning agents (LARS) cannot be allowed to calculate their own indicators on the fly (violation of Separation of Concerns).Compliance (ADR-003): BCBS-239 and ISO-8000 require full lineage. We must prove exactly how a signal was derived. Hard-coding this in IoS-002 ensures auditability.GenAI Readiness: This module prepares structured data for future Vector Database ingestion, enabling GraphRAG capabilities later3333.4. Functional Requirements4.1 Deterministic CalculationInput: Canonical OHLCV from fhq_market.Processing: Standardized mathematical formulas (TA-Lib or verifiable Python equivalent).Output: float64 precision stored in fhq_research.Constraint: Same Input + Same Code = Identical Output (Zero Tolerance for deviation).4.2 Immutable Lineage (BCBS-239)Every calculated row must include:calculation_timestampengine_version (e.g., v1.0.1)formula_hash (SHA-256 of the logic used)4.3 Anti-Hallucination Tolerances (ADR-010)Float Tolerance: $\le 0.1\%$ deviation against reference benchmark.Completeness: No NULL values allowed in active trading windows.Verification: VEGA must be able to independently verify a random sample of calculations.5. Deliverables (Data Assets)Upon activation, IoS-002 delivers the following Canonical Tables in the fhq_research schema:Table NameGranularityContentindicator_momentumTime-seriesRSI, Stoch, CCI, MFIindicator_trendTime-seriesMACD, EMA_, SMA_, PSARindicator_volatilityTime-seriesBB_*, ATRindicator_ichimokuTime-seriesTenkan, Kijun, Cloud_A, Cloud_B, ChikouEvidence Bundle:A "Golden Sample" dataset proving calculation accuracy against a known external benchmark (e.g., TradingView or Binance standard values).6. Governance AlignmentADR-001 (Roles): FINN acts as the "Chief Research Officer," owning the definition of indicators. STIG owns the implementation (SQL/Python).ADR-010 (Reconciliation): Indicators are classified as Medium Criticality (Operational/Analytical). Errors here trigger a "Warning" but not immediate system suspension unless they cascade to P&L.Gartner Alignment: By structuring data before feeding it to LLMs, we mitigate the risk of hallucination inherent in GenAI, leveraging structured inputs for better reasoning4444.7. Change Gates (ADR-004)G0 (Submission): FINN defines the indicator list.G1 (Technical): STIG verifies code efficiency and schema.G2 (Governance): VEGA checks against ADR-003 (Standards).G3 (Audit): VEGA runs the "Golden Sample" test.G4 (Activation): CEO approves deployment to Production.8. Acceptance CriteriaIoS-002 is considered ACTIVE when:[ ] All specified indicators are calculating automatically on new OHLCV ingest.[ ] Data is stored in fhq_research with full lineage metadata.[ ] A "Golden Sample" test confirms <0.001% deviation from standard libraries.[ ] VEGA has successfully attested the first batch of data.[ ] The Orchestrator pipeline CALC_INDICATORS stage is live.