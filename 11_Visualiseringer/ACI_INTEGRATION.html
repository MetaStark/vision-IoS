<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FjordHQ ACI Integration Plan (STIG-2025)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; /* Slate 950 */
            color: #e2e8f0;
        }

        .mono-font {
            font-family: 'JetBrains Mono', monospace;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 500px;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(51, 65, 85, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
        }

        .gradient-text {
            background: linear-gradient(135deg, #38bdf8 0%, #818cf8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .timeline-line {
            position: absolute;
            left: 24px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #334155;
            z-index: 0;
        }

        /* Custom Flowchart Nodes (CSS Only - No SVG) */
        .flow-node {
            border: 1px solid #475569;
            background: #1e293b;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            position: relative;
        }
        
        .arrow-down::after {
            content: "‚Üì";
            display: block;
            text-align: center;
            color: #64748b;
            font-weight: bold;
            margin: 5px 0;
        }

    </style>
</head>
<body class="antialiased selection:bg-amber-500 selection:text-white">

    <!-- Header -->
    <nav class="sticky top-0 z-50 glass-panel border-b border-slate-800 bg-[#020617]/80">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex flex-col">
                    <span class="text-2xl font-bold tracking-tight text-white mono-font">FJORDHQ <span class="text-amber-500">::</span> ACI_INTEGRATION</span>
                    <span class="text-xs text-slate-400 mono-font">STIG-2025-ACI-INTEGRATION | Auth: ADR-020</span>
                </div>
                <div class="flex items-center gap-4">
                    <div class="px-3 py-1 bg-amber-500/10 border border-amber-500/50 rounded text-amber-500 text-xs font-bold mono-font">
                        CONDITIONAL APPROVAL
                    </div>
                    <div class="px-3 py-1 bg-slate-800 border border-slate-700 rounded text-slate-300 text-xs font-bold mono-font">
                        CEO DIRECTIVE 2025-12-17
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Executive Summary -->
        <section class="mb-16">
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-6 text-white">
                Cognitive Engine <br><span class="gradient-text">Activation Plan</span>
            </h1>
            <p class="text-xl text-slate-400 max-w-4xl leading-relaxed mb-8">
                This rectified plan activates the complete ACI stack (EC-018 to EC-022) to enable autonomous alpha generation. It strictly adheres to the 8 Critical Mandates issued by the Executive Board, prioritizing <span class="text-amber-400">Safety (IKEA)</span> and <span class="text-blue-400">Reasoning (SitC)</span> over raw speed.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="glass-panel p-4 rounded-lg border-t-4 border-amber-500">
                    <div class="text-xs text-slate-400 mono-font mb-1">CURRENT GAP</div>
                    <div class="text-2xl font-bold text-white">4 Modules</div>
                    <div class="text-xs text-amber-500">Inactive / Partial</div>
                </div>
                <div class="glass-panel p-4 rounded-lg border-t-4 border-emerald-500">
                    <div class="text-xs text-slate-400 mono-font mb-1">MANDATES</div>
                    <div class="text-2xl font-bold text-white">8 / 8</div>
                    <div class="text-xs text-emerald-500">Fully Compliant</div>
                </div>
                <div class="glass-panel p-4 rounded-lg border-t-4 border-blue-500">
                    <div class="text-xs text-slate-400 mono-font mb-1">TARGET STATE</div>
                    <div class="text-2xl font-bold text-white">Autonomous</div>
                    <div class="text-xs text-blue-500">Self-Learning Loop</div>
                </div>
                <div class="glass-panel p-4 rounded-lg border-t-4 border-purple-500">
                    <div class="text-xs text-slate-400 mono-font mb-1">GOVERNANCE</div>
                    <div class="text-2xl font-bold text-white">G1-G4</div>
                    <div class="text-xs text-purple-500">VEGA Attested</div>
                </div>
            </div>
        </section>

        <!-- Compliance Grid -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold text-white mb-6 mono-font flex items-center gap-2">
                <span class="text-emerald-500">‚úì</span> CEO MANDATE COMPLIANCE
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Mandate I -->
                <div class="bg-slate-900/50 p-4 rounded border border-slate-800">
                    <div class="flex justify-between mb-2">
                        <span class="text-xs font-bold text-emerald-400">MANDATE I</span>
                        <span class="text-xs text-slate-500">ADR-018</span>
                    </div>
                    <h3 class="text-sm font-bold text-white mb-1">ASRP State-Binding</h3>
                    <p class="text-xs text-slate-400">Every artifact embeds state_snapshot_hash & atomic timestamp.</p>
                </div>
                <!-- Mandate II -->
                <div class="bg-slate-900/50 p-4 rounded border border-slate-800">
                    <div class="flex justify-between mb-2">
                        <span class="text-xs font-bold text-emerald-400">MANDATE II</span>
                        <span class="text-xs text-slate-500">ADR-012</span>
                    </div>
                    <h3 class="text-sm font-bold text-white mb-1">Runtime Eco-Safety</h3>
                    <p class="text-xs text-slate-400">Economic Safety as Runtime Law. Unbypassable guardian.</p>
                </div>
                <!-- Mandate III -->
                <div class="bg-slate-900/50 p-4 rounded border border-slate-800">
                    <div class="flex justify-between mb-2">
                        <span class="text-xs font-bold text-emerald-400">MANDATE III</span>
                        <span class="text-xs text-slate-500">ADR-016</span>
                    </div>
                    <h3 class="text-sm font-bold text-white mb-1">DEFCON Gating</h3>
                    <p class="text-xs text-slate-400">Deterministic hard gates. Red = Immediate Kill.</p>
                </div>
                <!-- Mandate V -->
                <div class="bg-slate-900/50 p-4 rounded border border-slate-800">
                    <div class="flex justify-between mb-2">
                        <span class="text-xs font-bold text-emerald-400">MANDATE V</span>
                        <span class="text-xs text-slate-500">SAFETY</span>
                    </div>
                    <h3 class="text-sm font-bold text-white mb-1">IKEA Fail-Safe</h3>
                    <p class="text-xs text-slate-400">Default to EXTERNAL_REQUIRED if confidence < 0.7.</p>
                </div>
            </div>
        </section>

        <!-- Implementation Waves (Timeline) -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold text-white mb-8 mono-font">IMPLEMENTATION WAVES</h2>
            <div class="relative pl-8 space-y-12">
                <div class="timeline-line"></div>

                <!-- Wave 1 -->
                <div class="relative">
                    <div class="absolute -left-10 mt-1 w-5 h-5 rounded-full bg-amber-500 border-4 border-slate-900"></div>
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-amber-500">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold text-white">WAVE 1: IKEA Activation (Critical)</h3>
                            <span class="px-2 py-1 bg-amber-500/20 text-amber-400 text-xs font-bold rounded">SAFETY FIRST</span>
                        </div>
                        <p class="text-slate-400 text-sm mb-4">The Hallucination Firewall. Must be active before any reasoning occurs.</p>
                        <ul class="text-xs text-slate-300 space-y-2 mono-font bg-slate-950/50 p-3 rounded">
                            <li>> Create 03_FUNCTIONS/ios022_ikea_boundary_engine.py</li>
                            <li>> Wire into finn_cognitive_brain.py (Context Retrieval)</li>
                            <li>> Wire into ec018_alpha_daemon.py (Hypothesis Gen)</li>
                        </ul>
                    </div>
                </div>

                <!-- Wave 2 -->
                <div class="relative">
                    <div class="absolute -left-10 mt-1 w-5 h-5 rounded-full bg-blue-500 border-4 border-slate-900"></div>
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-blue-500">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold text-white">WAVE 2: InForage Integration</h3>
                            <span class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs font-bold rounded">EFFICIENCY</span>
                        </div>
                        <p class="text-slate-400 text-sm mb-4">Cost controller wiring. Prevents API budget drain.</p>
                        <ul class="text-xs text-slate-300 space-y-2 mono-font bg-slate-950/50 p-3 rounded">
                            <li>> Complete integration in finn_cognitive_brain.py</li>
                            <li>> Implement check_cost() before API calls</li>
                            <li>> Enable RuntimeEconomicGuardian</li>
                        </ul>
                    </div>
                </div>

                <!-- Wave 3 -->
                <div class="relative">
                    <div class="absolute -left-10 mt-1 w-5 h-5 rounded-full bg-purple-500 border-4 border-slate-900"></div>
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-purple-500">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold text-white">WAVE 3: SitC Planner</h3>
                            <span class="px-2 py-1 bg-purple-500/20 text-purple-400 text-xs font-bold rounded">REASONING</span>
                        </div>
                        <p class="text-slate-400 text-sm mb-4">Structure-in-the-Chaos. Orchestrates reasoning chains (Chain-of-Query).</p>
                        <ul class="text-xs text-slate-300 space-y-2 mono-font bg-slate-950/50 p-3 rounded">
                            <li>> Create 03_FUNCTIONS/ios020_sitc_planner.py</li>
                            <li>> Define Plan Nodes: REASONING, SEARCH, VERIFICATION</li>
                            <li>> Wire into Cognitive Loop</li>
                        </ul>
                    </div>
                </div>

                <!-- Wave 4 & 5 -->
                <div class="relative">
                    <div class="absolute -left-10 mt-1 w-5 h-5 rounded-full bg-slate-500 border-4 border-slate-900"></div>
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-slate-500">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold text-white">WAVE 4 & 5: Learning & Orchestration</h3>
                            <span class="px-2 py-1 bg-slate-700 text-slate-300 text-xs font-bold rounded">CLOSING LOOP</span>
                        </div>
                        <p class="text-slate-400 text-sm mb-4">Governance-controlled self-improvement and daemon scheduling.</p>
                        <ul class="text-xs text-slate-300 space-y-2 mono-font bg-slate-950/50 p-3 rounded">
                            <li>> learning_feedback_pipeline.py -> Proposals Table</li>
                            <li>> Daemon Scheduler Update (Market Hours / Daily)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Deep Dive: Logic & Metrics -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16">
            
            <!-- IKEA Logic Flow -->
            <div class="glass-panel p-6 rounded-xl">
                <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <span class="text-amber-500">üõ°Ô∏è</span> IKEA Fail-Safe Logic
                </h3>
                <div class="flex flex-col items-center gap-2 text-xs font-mono">
                    <div class="bg-slate-800 text-white px-4 py-2 rounded border border-slate-600 w-full text-center">
                        Input: Fact Claim
                    </div>
                    <div class="arrow-down"></div>
                    <div class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded border border-blue-700 w-full text-center">
                        Is Parametric? (Internal Knowledge)
                    </div>
                    <div class="grid grid-cols-2 gap-4 w-full">
                        <div class="text-center">
                            <div class="text-emerald-500 font-bold mb-1">YES (>0.85)</div>
                            <div class="bg-emerald-900/30 text-emerald-300 px-2 py-2 rounded border border-emerald-700">
                                Use Internal
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="text-amber-500 font-bold mb-1">NO / UNSURE</div>
                            <div class="bg-amber-900/30 text-amber-300 px-2 py-2 rounded border border-amber-700">
                                Default: External
                            </div>
                        </div>
                    </div>
                    <div class="arrow-down"></div>
                     <div class="bg-slate-800 text-white px-4 py-2 rounded border border-slate-600 w-full text-center">
                        Log to fhq_meta.knowledge_boundary_log
                    </div>
                </div>
            </div>

            <!-- Chart: Success Metrics -->
            <div class="glass-panel p-6 rounded-xl">
                <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <span class="text-purple-500">üéØ</span> Target Success Metrics
                </h3>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="kpiRadar"></canvas>
                </div>
            </div>
        </section>

        <!-- DEFCON Matrix -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold text-white mb-6 mono-font">DEFCON BEHAVIOR PROTOCOL</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left text-slate-400">
                    <thead class="text-xs text-slate-200 uppercase bg-slate-800/50">
                        <tr>
                            <th class="px-6 py-3 rounded-tl-lg">DEFCON</th>
                            <th class="px-6 py-3">SitC (Planning)</th>
                            <th class="px-6 py-3">InForage (Cost)</th>
                            <th class="px-6 py-3 rounded-tr-lg">IKEA (Safety)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="bg-slate-900/30 border-b border-slate-800">
                            <td class="px-6 py-4 font-bold text-emerald-500">GREEN</td>
                            <td class="px-6 py-4">Full Dynamic Planning</td>
                            <td class="px-6 py-4">Normal Optimization</td>
                            <td class="px-6 py-4">Standard Check</td>
                        </tr>
                        <tr class="bg-slate-900/30 border-b border-slate-800">
                            <td class="px-6 py-4 font-bold text-yellow-500">YELLOW</td>
                            <td class="px-6 py-4">Shorter Chains</td>
                            <td class="px-6 py-4">Aggressive Cuts</td>
                            <td class="px-6 py-4">Bias Internal</td>
                        </tr>
                        <tr class="bg-slate-900/30 border-b border-slate-800">
                            <td class="px-6 py-4 font-bold text-orange-500">ORANGE</td>
                            <td class="px-6 py-4">Validation Only</td>
                            <td class="px-6 py-4">Emergency Budget</td>
                            <td class="px-6 py-4">External Mandatory</td>
                        </tr>
                        <tr class="bg-slate-900/30 border-b border-slate-800">
                            <td class="px-6 py-4 font-bold text-red-500">RED</td>
                            <td class="px-6 py-4 text-red-400">ABORT ALL</td>
                            <td class="px-6 py-4 text-red-400">HALT SEARCH</td>
                            <td class="px-6 py-4 text-red-400">READ-ONLY</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Footer -->
        <footer class="border-t border-slate-800 pt-8 pb-12 text-center">
            <p class="text-slate-500 text-sm font-mono">FJORDHQ SYSTEM // STIG-2025-ACI-INTEGRATION</p>
            <p class="text-slate-600 text-xs mt-2">Signatures: Ed25519 Verified | Authority: CEO Directive 2025-12-17</p>
        </footer>

    </main>

    <script>
        // --- Utility: Label Splitting ---
        function splitLabel(str) {
            if (str.length <= 16) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + ' ' + words[i]).length <= 16) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- Radar Chart: Success Metrics ---
        const ctxRadar = document.getElementById('kpiRadar').getContext('2d');
        const kpiLabels = [
            'IKEA Accuracy (%)', 
            'Cost Savings (%)', 
            'Hypothesis Valid Rate', 
            'Paper Sharpe', 
            'Learning Updates'
        ];
        const processedKPILabels = kpiLabels.map(splitLabel);

        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: processedKPILabels,
                datasets: [{
                    label: 'Target Metrics',
                    data: [85, 40, 30, 50, 50], // Scaled for visual balance (Sharpe 0.5 -> 50)
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    borderColor: '#3b82f6',
                    pointBackgroundColor: '#3b82f6',
                    borderWidth: 2
                },
                {
                    label: 'Current Baseline',
                    data: [20, 0, 5, 10, 0], // Hypothetical low baseline
                    backgroundColor: 'rgba(148, 163, 184, 0.2)',
                    borderColor: '#94a3b8',
                    pointBackgroundColor: '#94a3b8',
                    borderWidth: 1,
                    borderDash: [5, 5]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(148, 163, 184, 0.1)' },
                        grid: { color: 'rgba(148, 163, 184, 0.1)' },
                        pointLabels: {
                            color: '#e2e8f0',
                            font: { size: 11, family: 'JetBrains Mono' }
                        },
                        ticks: { display: false, backdropColor: 'transparent' },
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                },
                plugins: {
                    legend: {
                        labels: { color: '#94a3b8', font: { family: 'Inter' } }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        titleColor: '#f8fafc',
                        bodyColor: '#cbd5e1',
                        borderColor: 'rgba(59, 130, 246, 0.5)',
                        borderWidth: 1,
                        padding: 12,
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                let label = item.chart.data.labels[item.dataIndex];
                                if (Array.isArray(label)) {
                                    return label.join(' ');
                                } else {
                                    return label;
                                }
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>