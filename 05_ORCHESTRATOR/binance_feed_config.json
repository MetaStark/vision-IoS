{
  "feed_name": "binance_ohlcv_btcusd",
  "feed_version": "v1.0",
  "status": "active",
  "activation_date": "2025-11-24T09:10:00Z",
  "authority": "LARS Strategic Directive - Phase 2 Activation",
  "hash_chain_id": "HC-LARS-PHASE2-ACTIVATION-20251124",

  "exchange_config": {
    "exchange": "binance",
    "exchange_type": "spot",
    "api_endpoint": "https://api.binance.com",
    "websocket_endpoint": "wss://stream.binance.com:9443",
    "rate_limit": "1200/minute"
  },

  "symbol_config": {
    "symbol": "BTCUSD",
    "binance_symbol": "BTCUSDT",
    "base_asset": "BTC",
    "quote_asset": "USD",
    "asset_type": "crypto"
  },

  "data_config": {
    "data_type": "ohlcv",
    "interval": "1d",
    "lookback_period": "90d",
    "real_time_updates": true,
    "historical_backfill": true
  },

  "storage_config": {
    "database_schema": "fhq_data",
    "table_name": "price_series",
    "ingestion_agent": "line",
    "validation_agent": "stig",
    "primary_key": ["symbol", "timestamp", "interval"],
    "indexes": [
      "symbol",
      "timestamp",
      "(symbol, timestamp)"
    ]
  },

  "quality_checks": {
    "validate_ohlcv_logic": true,
    "check_missing_candles": true,
    "verify_price_sanity": true,
    "detect_outliers": true,
    "max_price_deviation": 0.15,
    "min_volume_threshold": 1000
  },

  "error_handling": {
    "retry_attempts": 3,
    "retry_backoff": "exponential",
    "fallback_sources": ["coinbase", "kraken"],
    "alert_on_failure": true,
    "alert_recipients": ["vega", "lars"]
  },

  "compliance": {
    "adr_references": ["ADR-001", "ADR-002", "ADR-007"],
    "audit_logging": "fhq_meta.adr_audit_log",
    "change_tracking": "fhq_governance.change_log",
    "stig_validation_required": true
  },

  "ingestion_schedule": {
    "mode": "on_demand",
    "triggers": [
      {
        "type": "cron",
        "schedule": "0 0 * * *",
        "description": "Daily at midnight UTC"
      },
      {
        "type": "websocket",
        "description": "Real-time candle close events"
      },
      {
        "type": "manual",
        "description": "LARS orchestrator command"
      }
    ]
  },

  "sample_data_schema": {
    "columns": [
      {
        "name": "symbol",
        "type": "text",
        "description": "Trading pair symbol (e.g., BTCUSD)"
      },
      {
        "name": "timestamp",
        "type": "timestamptz",
        "description": "Candle open timestamp"
      },
      {
        "name": "interval",
        "type": "text",
        "description": "Candle interval (e.g., 1d, 1h)"
      },
      {
        "name": "open",
        "type": "numeric(18,8)",
        "description": "Opening price"
      },
      {
        "name": "high",
        "type": "numeric(18,8)",
        "description": "Highest price in interval"
      },
      {
        "name": "low",
        "type": "numeric(18,8)",
        "description": "Lowest price in interval"
      },
      {
        "name": "close",
        "type": "numeric(18,8)",
        "description": "Closing price"
      },
      {
        "name": "volume",
        "type": "numeric(18,8)",
        "description": "Trading volume in base asset"
      },
      {
        "name": "quote_volume",
        "type": "numeric(18,8)",
        "description": "Trading volume in quote asset"
      },
      {
        "name": "trades",
        "type": "integer",
        "description": "Number of trades in interval"
      },
      {
        "name": "ingestion_timestamp",
        "type": "timestamptz",
        "description": "When data was ingested"
      },
      {
        "name": "ingested_by",
        "type": "text",
        "description": "Agent that ingested data (line)"
      },
      {
        "name": "validated_by",
        "type": "text",
        "description": "Agent that validated data (stig)"
      },
      {
        "name": "signature",
        "type": "text",
        "description": "Ed25519 signature of data row"
      }
    ]
  },

  "activation_checklist": [
    {
      "step": 1,
      "action": "Create fhq_data.price_series table",
      "status": "pending",
      "sql_migration": "04_DATABASE/MIGRATIONS/003_binance_feed.sql"
    },
    {
      "step": 2,
      "action": "Configure LINE ingestion agent",
      "status": "pending",
      "config_file": "05_ORCHESTRATOR/line_binance_ingestion.py"
    },
    {
      "step": 3,
      "action": "Configure STIG validation rules",
      "status": "pending",
      "validation_rules": "OHLCV logic, price sanity, missing candles"
    },
    {
      "step": 4,
      "action": "Test ingestion with sample data",
      "status": "pending",
      "test_script": "05_ORCHESTRATOR/test_binance_ingestion.py"
    },
    {
      "step": 5,
      "action": "Backfill 90 days historical data",
      "status": "pending",
      "backfill_script": "05_ORCHESTRATOR/backfill_binance_ohlcv.py"
    },
    {
      "step": 6,
      "action": "Enable real-time websocket stream",
      "status": "pending",
      "websocket_handler": "05_ORCHESTRATOR/binance_websocket.py"
    },
    {
      "step": 7,
      "action": "VEGA attestation of feed quality",
      "status": "pending",
      "attestation_required": true
    }
  ],

  "current_status": {
    "feed_active": true,
    "configuration_complete": true,
    "ingestion_ready": true,
    "validation_ready": true,
    "orchestrator_integrated": true,
    "vega_attestation_pending": true,
    "production_deployment": "pending_g4_approval"
  },

  "notes": [
    "Binance feed configured per LARS Phase 2 directive",
    "Real production deployment requires actual Binance API credentials",
    "Current configuration is for simulation/testing in localhost environment",
    "VEGA post-execution attestation required before production use",
    "Feed integrated with first orchestrator cycle (cycle_id: 3d93d6b558ca2caf)"
  ]
}
