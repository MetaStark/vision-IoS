{
  "pipeline_name": "DAILY_MACRO_INGEST",
  "version": "1.0.0",
  "authority": {
    "adrs": ["ADR-007", "ADR-012", "ADR-013"],
    "ios_ref": "IoS-006"
  },
  "schedule": {
    "cron": "5 0 * * *",
    "timezone": "UTC",
    "description": "Daily at 00:05 UTC (after market close)"
  },
  "data_sources": {
    "primary": "FRED",
    "fallback": ["Yahoo Finance", "Alpha Vantage"],
    "tier": "TIER_1_LAKE"
  },
  "features": {
    "FRED_PRIORITY": [
      {"feature_id": "VIX_INDEX", "fred_series": "VIXCLS", "cluster": "VOLATILITY"},
      {"feature_id": "DXY_INDEX", "fred_series": "DTWEXBGS", "cluster": "FACTOR"},
      {"feature_id": "M2_SUPPLY", "fred_series": "M2SL", "cluster": "LIQUIDITY"},
      {"feature_id": "T10Y2Y_SPREAD", "fred_series": "T10Y2Y", "cluster": "CREDIT"},
      {"feature_id": "T10YFF_SPREAD", "fred_series": "T10YFF", "cluster": "CREDIT"},
      {"feature_id": "GS10", "fred_series": "GS10", "cluster": "LIQUIDITY"},
      {"feature_id": "GS2", "fred_series": "GS2", "cluster": "LIQUIDITY"},
      {"feature_id": "GS1", "fred_series": "GS1", "cluster": "LIQUIDITY"},
      {"feature_id": "FED_FUNDS_RATE", "fred_series": "FEDFUNDS", "cluster": "LIQUIDITY"},
      {"feature_id": "TEDRATE", "fred_series": "TEDRATE", "cluster": "LIQUIDITY"},
      {"feature_id": "T10Y3M_SPREAD", "fred_series": "T10Y3M", "cluster": "LIQUIDITY"},
      {"feature_id": "BAMLHY_SPREAD", "fred_series": "BAMLH0A0HYM2", "cluster": "CREDIT"},
      {"feature_id": "BAMLBB_SPREAD", "fred_series": "BAMLC0A4CBBB", "cluster": "CREDIT"},
      {"feature_id": "BAMLAA_SPREAD", "fred_series": "BAMLC0A3CA", "cluster": "CREDIT"},
      {"feature_id": "UNEMPLOYMENT", "fred_series": "UNRATE", "cluster": "FACTOR"},
      {"feature_id": "PCE_INFLATION", "fred_series": "PCEPI", "cluster": "FACTOR"},
      {"feature_id": "CORE_PCE", "fred_series": "PCEPILFE", "cluster": "FACTOR"},
      {"feature_id": "GDP_GROWTH", "fred_series": "A191RL1Q225SBEA", "cluster": "FACTOR"},
      {"feature_id": "INDUSTRIAL_PROD", "fred_series": "INDPRO", "cluster": "FACTOR"}
    ],
    "YAHOO_FALLBACK": [
      {"feature_id": "VIX9D", "yahoo_ticker": "^VIX9D", "cluster": "VOLATILITY"},
      {"feature_id": "VIX_TERM_STRUCTURE", "yahoo_ticker": "^VIX3M", "cluster": "VOLATILITY"},
      {"feature_id": "SPX_RVOL_20D", "yahoo_ticker": "^GSPC", "cluster": "VOLATILITY", "compute": "rolling_std_20d"},
      {"feature_id": "NDX_INDEX", "yahoo_ticker": "^NDX", "cluster": "FACTOR"},
      {"feature_id": "GOLD_PRICE", "yahoo_ticker": "GC=F", "cluster": "FACTOR"},
      {"feature_id": "COPPER_PRICE", "yahoo_ticker": "HG=F", "cluster": "FACTOR"}
    ]
  },
  "stages": [
    {
      "name": "FETCH_FRED",
      "owner": "STIG",
      "executor": "CODE",
      "description": "Fetch macro data from FRED API",
      "timeout_seconds": 300,
      "retry_count": 3,
      "retry_delay_seconds": 60
    },
    {
      "name": "FETCH_YAHOO_FALLBACK",
      "owner": "STIG",
      "executor": "CODE",
      "description": "Fetch remaining features from Yahoo Finance",
      "timeout_seconds": 300,
      "depends_on": ["FETCH_FRED"],
      "condition": "missing_features > 0"
    },
    {
      "name": "STATIONARITY_TEST",
      "owner": "STIG",
      "executor": "CODE",
      "description": "Run ADF stationarity tests on new data",
      "timeout_seconds": 120,
      "depends_on": ["FETCH_FRED"]
    },
    {
      "name": "CANONICALIZE",
      "owner": "STIG",
      "executor": "STIG",
      "description": "Promote to canonical_series with hashes",
      "timeout_seconds": 120,
      "depends_on": ["STATIONARITY_TEST"]
    }
  ],
  "tables": {
    "feature_registry": "fhq_macro.feature_registry",
    "canonical_series": "fhq_macro.canonical_series",
    "provider_log": "fhq_macro.provider_ingestion_log"
  },
  "data_quality": {
    "require_stationarity_check": true,
    "adf_p_threshold": 0.05,
    "min_observations": 100,
    "max_gap_days": 7
  },
  "lineage": {
    "compute_row_hash": true,
    "log_to_provider_log": true,
    "log_to_task_registry": true
  },
  "economic_safety": {
    "adr_reference": "ADR-012",
    "api_tier": "TIER_1_LAKE",
    "rate_limit_per_hour": 500,
    "daily_call_budget": 1000
  }
}
