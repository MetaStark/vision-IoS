[LEARNING_REANIMATION] 2026-02-15 21:07:32,829 INFO: === Starting Learning Reanimation ===
[LEARNING_REANIMATION] 2026-02-15 21:07:32,829 INFO: Directive: CEO-DIR-2026-LEARNING-REANIMATION-022
[LEARNING_REANIMATION] 2026-02-15 21:07:32,829 INFO: Step 1: Checking pre-animation state...
[LEARNING_REANIMATION] 2026-02-15 21:07:32,860 INFO: LVI: 0.0 (stale 174.9h)
[LEARNING_REANIMATION] 2026-02-15 21:07:32,860 INFO: FSS: 438/21948 non-null (stale 55.6h)
[LEARNING_REANIMATION] 2026-02-15 21:07:32,860 INFO: Outcomes: 74295 total, 0.0h since last
[LEARNING_REANIMATION] 2026-02-15 21:07:32,860 INFO: Step 2: Manual FSS recomputation...
[LEARNING_REANIMATION] 2026-02-15 21:07:32,876 INFO: Computing FSS with baseline: NAIVE
[LEARNING_REANIMATION] 2026-02-15 21:07:32,876 ERROR: ERROR: function fhq_research.compute_fss(p_baseline_method => unknown) is not unique
LINE 6:                     FROM fhq_research.compute_fss(
                                 ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts.

[LEARNING_REANIMATION] 2026-02-15 21:08:42,935 INFO: === Starting Learning Reanimation ===
[LEARNING_REANIMATION] 2026-02-15 21:08:42,935 INFO: Directive: CEO-DIR-2026-LEARNING-REANIMATION-022
[LEARNING_REANIMATION] 2026-02-15 21:08:42,935 INFO: Step 1: Checking pre-animation state...
[LEARNING_REANIMATION] 2026-02-15 21:08:42,995 INFO: LVI: 0.0 (stale 174.9h)
[LEARNING_REANIMATION] 2026-02-15 21:08:42,995 INFO: FSS: 438/21948 non-null (stale 55.6h)
[LEARNING_REANIMATION] 2026-02-15 21:08:42,995 INFO: Outcomes: 74295 total, 0.0h since last
[LEARNING_REANIMATION] 2026-02-15 21:08:42,995 INFO: Step 2: Manual FSS recomputation...
[LEARNING_REANIMATION] 2026-02-15 21:08:42,995 INFO: Computing FSS with baseline: NAIVE (tag: NAIVE)
[LEARNING_REANIMATION] 2026-02-15 21:08:42,995 ERROR: ERROR: function fhq_research.compute_fss(p_start_date => timestamp with time zone, p_end_date => timestamp with time zone, p_asset_id => unknown, p_regime => unknown, p_baseline_method => unknown) does not exist
LINE 6:                     FROM fhq_research.compute_fss(
                                 ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[LEARNING_REANIMATION] 2026-02-15 21:08:57,533 INFO: === Starting Learning Reanimation ===
[LEARNING_REANIMATION] 2026-02-15 21:08:57,533 INFO: Directive: CEO-DIR-2026-LEARNING-REANIMATION-022
[LEARNING_REANIMATION] 2026-02-15 21:08:57,533 INFO: Step 1: Checking pre-animation state...
[LEARNING_REANIMATION] 2026-02-15 21:08:57,580 INFO: LVI: 0.0 (stale 174.9h)
[LEARNING_REANIMATION] 2026-02-15 21:08:57,580 INFO: FSS: 438/21948 non-null (stale 55.6h)
[LEARNING_REANIMATION] 2026-02-15 21:08:57,580 INFO: Outcomes: 74295 total, 0.0h since last
[LEARNING_REANIMATION] 2026-02-15 21:08:57,580 INFO: Step 2: Manual FSS recomputation...
[LEARNING_REANIMATION] 2026-02-15 21:08:57,580 INFO: Computing FSS with baseline: NAIVE (tag: NAIVE)
[LEARNING_REANIMATION] 2026-02-15 21:08:57,580 ERROR: ERROR: function fhq_research.compute_fss(p_start_date => date, p_end_date => date, p_asset_id => unknown, p_regime => unknown, p_baseline_method => unknown) is not unique
LINE 6:                     FROM fhq_research.compute_fss(
                                 ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts.

[LEARNING_REANIMATION] 2026-02-15 21:09:12,625 INFO: === Starting Learning Reanimation ===
[LEARNING_REANIMATION] 2026-02-15 21:09:12,625 INFO: Directive: CEO-DIR-2026-LEARNING-REANIMATION-022
[LEARNING_REANIMATION] 2026-02-15 21:09:12,625 INFO: Step 1: Checking pre-animation state...
[LEARNING_REANIMATION] 2026-02-15 21:09:12,684 INFO: LVI: 0.0 (stale 174.9h)
[LEARNING_REANIMATION] 2026-02-15 21:09:12,684 INFO: FSS: 438/21948 non-null (stale 55.6h)
[LEARNING_REANIMATION] 2026-02-15 21:09:12,684 INFO: Outcomes: 74295 total, 0.0h since last
[LEARNING_REANIMATION] 2026-02-15 21:09:12,684 INFO: Step 2: Manual FSS recomputation...
[LEARNING_REANIMATION] 2026-02-15 21:09:12,684 INFO: Computing FSS with baseline: NAIVE (tag: NAIVE)
[LEARNING_REANIMATION] 2026-02-15 21:09:12,688 ERROR: ERROR: column "computed_for_period" does not exist
LINE 4: ...                    sample_size, baseline_method, computed_f...
                                                             ^

[LEARNING_REANIMATION] 2026-02-15 21:11:23,782 INFO: === Starting Learning Reanimation ===
[LEARNING_REANIMATION] 2026-02-15 21:11:23,782 INFO: Directive: CEO-DIR-2026-LEARNING-REANIMATION-022
[LEARNING_REANIMATION] 2026-02-15 21:11:23,782 INFO: Step 1: Checking pre-animation state...
[LEARNING_REANIMATION] 2026-02-15 21:11:23,828 INFO: LVI: 0.0 (stale 174.9h)
[LEARNING_REANIMATION] 2026-02-15 21:11:23,828 INFO: FSS: 438/21948 non-null (stale 55.6h)
[LEARNING_REANIMATION] 2026-02-15 21:11:23,828 INFO: Outcomes: 74295 total, 0.1h since last
[LEARNING_REANIMATION] 2026-02-15 21:11:23,828 INFO: Step 2: Manual FSS recomputation...
[LEARNING_REANIMATION] 2026-02-15 21:11:23,828 INFO: Computing FSS with baseline: NAIVE (tag: NAIVE)
[LEARNING_REANIMATION] 2026-02-15 21:11:23,857 ERROR: ERROR: column ab.reference_baseline does not exist
LINE 43: ...             ab.asset_id || ab.avg_brier::TEXT || ab.referen...
                                                              ^
QUERY:  WITH asset_brier AS (
        -- Compute actual Brier for each asset
        SELECT
            bsl.asset_id,
            AVG(bsl.squared_error)::NUMERIC(10,4) AS avg_brier,
            COUNT(*) AS sample_count,
            bsl.regime
        FROM fhq_governance.brier_score_ledger bsl
        WHERE (p_asset_id IS NULL OR bsl.asset_id = p_asset_id)
          AND bsl.forecast_timestamp::DATE BETWEEN v_default_start AND v_default_end
          AND (p_regime IS NULL OR bsl.regime = p_regime)
          AND bsl.squared_error IS NOT NULL
        GROUP BY bsl.asset_id, bsl.regime
    ),
    baseline_calc AS (
        -- Compute reference baseline based on method
        SELECT
            ab.asset_id,
            ab.avg_brier::NUMERIC,
            ab.sample_count::INTEGER,
            ab.regime,
            CASE p_baseline_method
                WHEN 'HISTORICAL' THEN (
                    SELECT COALESCE(AVG(bsl2.squared_error), ab.avg_brier)
                    FROM fhq_governance.brier_score_ledger bsl2
                    WHERE bsl2.asset_id = ab.asset_id
                      AND bsl2.forecast_timestamp::DATE < v_default_start
                      AND bsl2.squared_error IS NOT NULL
                )
                WHEN 'REGIME_SPECIFIC' THEN (
                    SELECT COALESCE(AVG(bsl3.squared_error), ab.avg_brier)
                    FROM fhq_governance.brier_score_ledger bsl3
                    WHERE bsl3.regime = ab.regime
                      AND bsl3.forecast_timestamp::DATE < v_default_start
                      AND bsl3.squared_error IS NOT NULL
                )
                WHEN 'NAIVE' THEN ab.avg_brier
                ELSE ab.avg_brier  -- Default to historical average
            END AS reference_baseline,
            p_baseline_method,
            daterange(v_default_start, v_default_end, '[]')::DATERANGE,
            ('sha256:' || encode(sha256(
                ab.asset_id || ab.avg_brier::TEXT || ab.reference_baseline::TEXT ||
                v_default_start::TEXT || v_default_end::TEXT
            )::bytea, 'hex'))::TEXT
        FROM asset_brier ab
    )
    SELECT
        bc.asset_id,
        bc.avg_brier::NUMERIC AS brier_actual,
        bc.reference_baseline::NUMERIC AS brier_ref,
        CASE
            WHEN bc.reference_baseline > 0 THEN
                (1 - (bc.avg_brier / bc.reference_baseline))::NUMERIC
            ELSE NULL
        END AS fss_value,
        bc.baseline_method,
        v_default_start AS period_start,
        v_default_end AS period_end,
        bc.sample_count::INTEGER AS sample_size,
        ('sha256:' || encode(sha256(
            bc.asset_id || bc.avg_brier::TEXT || bc.reference_baseline::TEXT ||
            bc.sample_count::TEXT || bc.baseline_method::TEXT
        )::bytea, 'hex'))::TEXT,
        COALESCE(p_base_rate, bc.reference_baseline) AS base_rate
    FROM baseline_calc bc
    WHERE bc.sample_count >= 5  -- Minimum 5 samples required
    ORDER BY bc.asset_id
CONTEXT:  PL/pgSQL function fhq_research.compute_fss(text,date,date,text,text,numeric) line 7 at RETURN QUERY

