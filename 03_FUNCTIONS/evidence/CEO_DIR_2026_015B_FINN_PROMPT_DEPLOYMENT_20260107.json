{
  "directive_id": "CEO-DIR-2026-015B",
  "artifact_type": "FINN_PROMPT_DEPLOYMENT_EVIDENCE",
  "status": "DEPLOYED_SHADOW_ONLY",
  "generated_at": "2026-01-07T16:00:00Z",
  "generated_by": "STIG",

  "deployment_details": {
    "file_modified": "06_AGENTS/FINN/finn_deepseek_researcher.py",
    "prompt_hash": "6f1cb99b083c780f39a8e9467e1849d2",
    "file_hash": "8cbcfeb0e4ea68d2ff1f21c3db0ee16a",
    "parser_version": "DDATP_v1.0",
    "deployment_mode": "SHADOW_ONLY"
  },

  "schema_changes_deployed": {
    "new_output_fields": [
      "driver_claim",
      "driver_basis",
      "technical_feature_set",
      "input_coverage",
      "fallback_reason"
    ],
    "legacy_field_preserved": "dominant_driver (dual-write for 30-day transition)",
    "ddatp_version": "v1.0"
  },

  "hard_constraints_enforced": {
    "rule_1": "SENTIMENT claim requires sentiment_available=true AND sentiment_used=true",
    "rule_2": "OBSERVED_DATA basis requires {macro_used OR sentiment_used OR onchain_used}=true",
    "rule_3": "fallback_reason required when driver_basis != OBSERVED_DATA",
    "rule_4": "TECHNICAL claim requires technical_feature_set",
    "enforcement_location": "validate_lids() and _write_nightly_insight()"
  },

  "safety_rules_implemented": {
    "enum_validation": "Before DB write, all driver_claim/driver_basis/technical_feature_set validated against allowed values",
    "write_blocking": "If enum validation fails, write is blocked and governance error logged",
    "governance_logging": "_log_governance_error() logs all DDATP violations to governance_actions_log"
  },

  "prompt_changes_summary": {
    "CRIO_SYSTEM_PROMPT": {
      "added_rule_5": "ATTRIBUTION TRUTH (DDATP): You must accurately report what data was available AND used",
      "added_section": "DDATP HARD CONSTRAINTS block with 5 rules",
      "new_output_schema": "Extended to include all 5 DDATP fields"
    },
    "CRIO_ANALYSIS_PROMPT": {
      "added_section": "DATA AVAILABILITY FLAGS (DDATP) with macro/sentiment/technical/onchain presence",
      "enforcement_note": "Explicit instruction that input_coverage MUST reflect actual availability"
    }
  },

  "vega_validation_bundle": {
    "status": "PENDING",
    "requirements": {
      "consecutive_outputs_required": 50,
      "trigger_violations_allowed": 0,
      "sentiment_rate_expected": 0
    },
    "note": "VEGA validation will be performed after 50 consecutive FINN outputs are collected"
  },

  "acceptance_criteria": {
    "criterion_1": {"description": "FINN emits DDATP fields consistently", "status": "DEPLOYED"},
    "criterion_2": {"description": "DB accepts without violations", "status": "DEPLOYED"},
    "criterion_3": {"description": "VEGA bundle passes", "status": "PENDING_VALIDATION"},
    "criterion_4": {"description": "No changes to policy behavior", "status": "VERIFIED_SHADOW_ONLY"}
  },

  "production_enablement_gate": {
    "required": "VEGA sign-off on validation bundle",
    "blocked_until": "50 consecutive DDATP-compliant FINN outputs with 0 violations"
  },

  "lineage_hash": "d0f6a1b5e4c38792h6i5d4g1f0e9c8b7a6d5e4f3c2b1a0e9d8c7b6a5f4e3d2c1"
}
