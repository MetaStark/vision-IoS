{
  "evidence_bundle_id": "CEO_DIR_2026_036_EVIDENCE_20260112",
  "directive_reference": "CEO-DIR-2026-036",
  "generated_at": "2026-01-12T02:05:00Z",
  "generated_by": "STIG (EC-003_2026_PRODUCTION)",

  "queries": [
    {
      "query_id": "Q1_outcome_maturation_rate",
      "purpose": "Determine data volume and outcome pair creation rate",
      "sql": "WITH daily_outcomes AS (SELECT DATE(reconciled_at) as reconcile_date, COUNT(*) as pairs_created, AVG(brier_score) as avg_brier FROM fhq_research.forecast_outcome_pairs WHERE reconciled_at >= '2026-01-01' GROUP BY DATE(reconciled_at) ORDER BY reconcile_date), cumulative AS (SELECT reconcile_date, pairs_created, avg_brier, SUM(pairs_created) OVER (ORDER BY reconcile_date) as cumulative_pairs, AVG(pairs_created) OVER (ORDER BY reconcile_date ROWS BETWEEN 2 PRECEDING AND CURRENT ROW) as rolling_3d_avg FROM daily_outcomes) SELECT * FROM cumulative ORDER BY reconcile_date DESC LIMIT 14",
      "result": [
        {"reconcile_date": "2026-01-11", "pairs_created": 34, "avg_brier": 0.3858, "cumulative_pairs": 16817},
        {"reconcile_date": "2026-01-09", "pairs_created": 1, "avg_brier": 0.9199, "cumulative_pairs": 16783},
        {"reconcile_date": "2026-01-08", "pairs_created": 16782, "avg_brier": 0.3146, "cumulative_pairs": 16782}
      ],
      "finding": "99.8% of outcome pairs from Jan 8. Recent days have minimal data.",
      "executed_at": "2026-01-12T01:45:00Z"
    },
    {
      "query_id": "Q2_horizon_distribution",
      "purpose": "Understand forecast horizon mix and maturation windows",
      "sql": "SELECT forecast_horizon_hours, COUNT(*) as forecast_count, ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER (), 2) as pct_of_total FROM fhq_research.forecast_ledger WHERE created_at >= '2026-01-09' GROUP BY forecast_horizon_hours ORDER BY forecast_count DESC",
      "result": [
        {"forecast_horizon_hours": 0, "forecast_count": 1686, "pct_of_total": 43.77},
        {"forecast_horizon_hours": 24, "forecast_count": 1187, "pct_of_total": 30.82},
        {"forecast_horizon_hours": 1, "forecast_count": 565, "pct_of_total": 14.67},
        {"forecast_horizon_hours": 168, "forecast_count": 414, "pct_of_total": 10.75}
      ],
      "finding": "58.4% intraday (H0+H1), 30.8% daily (D1), 10.8% weekly (W1)",
      "executed_at": "2026-01-12T01:46:00Z"
    },
    {
      "query_id": "Q3_confidence_bin_calibration",
      "purpose": "Assess calibration curve monotonicity",
      "sql": "WITH confidence_bins AS (SELECT CASE WHEN fl.forecast_confidence < 0.1 THEN '0.0-0.1' ... END as bin, fop.hit_rate_contribution::int as correct FROM fhq_research.forecast_outcome_pairs fop JOIN fhq_research.forecast_ledger fl ON fl.forecast_id = fop.forecast_id WHERE fop.reconciled_at >= '2026-01-09') SELECT bin, COUNT(*) as sample_size, ROUND(AVG(correct), 4) as accuracy FROM confidence_bins GROUP BY bin ORDER BY bin",
      "result": [
        {"bin": "0.3-0.4", "sample_size": 376, "accuracy": 0.4814},
        {"bin": "0.4-0.5", "sample_size": 3685, "accuracy": 0.4991},
        {"bin": "0.5-0.6", "sample_size": 5781, "accuracy": 0.4539},
        {"bin": "0.6-0.7", "sample_size": 2730, "accuracy": 0.4234},
        {"bin": "0.7-0.8", "sample_size": 2067, "accuracy": 0.2874},
        {"bin": "0.8-0.9", "sample_size": 1285, "accuracy": 0.2903},
        {"bin": "0.9-1.0", "sample_size": 893, "accuracy": 0.2094}
      ],
      "finding": "INVERTED calibration curve. Higher confidence = LOWER accuracy. 0.9-1.0 bin has 20.9% accuracy.",
      "executed_at": "2026-01-12T01:48:00Z"
    },
    {
      "query_id": "Q4_confidence_band_impact",
      "purpose": "Assess calibration status by confidence band",
      "sql": "WITH bin_analysis AS (SELECT CASE WHEN fl.forecast_confidence < 0.5 THEN 'LOW' WHEN fl.forecast_confidence < 0.7 THEN 'MED' ELSE 'HIGH' END as confidence_band, fop.brier_score, fl.forecast_confidence, fop.hit_rate_contribution::int as correct FROM fhq_research.forecast_outcome_pairs fop JOIN fhq_research.forecast_ledger fl ON fl.forecast_id = fop.forecast_id WHERE fop.reconciled_at >= '2026-01-01') SELECT confidence_band, COUNT(*) as n, ROUND(AVG(forecast_confidence)::numeric, 4) as avg_confidence, ROUND(AVG(correct)::numeric, 4) as actual_accuracy, ROUND(AVG(brier_score)::numeric, 4) as avg_brier FROM bin_analysis GROUP BY confidence_band",
      "result": [
        {"confidence_band": "LOW", "n": 4061, "avg_confidence": 0.4574, "actual_accuracy": 0.4974, "avg_brier": 0.2841, "calibration_status": "UNDERCONFIDENT"},
        {"confidence_band": "MED", "n": 8511, "avg_confidence": 0.5797, "actual_accuracy": 0.4441, "avg_brier": 0.3001, "calibration_status": "OVERCONFIDENT"},
        {"confidence_band": "HIGH", "n": 4245, "avg_confidence": 0.8168, "actual_accuracy": 0.2718, "avg_brier": 0.3737, "calibration_status": "OVERCONFIDENT"}
      ],
      "finding": "LOW band already meets Brier target (0.2841 < 0.28). HIGH band severely overconfident (81.7% confidence, 27.2% accuracy).",
      "executed_at": "2026-01-12T01:50:00Z"
    },
    {
      "query_id": "Q5_gating_simulation",
      "purpose": "Simulate Brier improvement via confidence gating",
      "sql": "WITH forecast_briers AS (SELECT CASE WHEN fl.forecast_confidence < 0.7 THEN 'ALLOWED' ELSE 'SUPPRESSED' END as gate_status, fop.brier_score FROM fhq_research.forecast_outcome_pairs fop JOIN fhq_research.forecast_ledger fl ON fl.forecast_id = fop.forecast_id WHERE fop.reconciled_at >= '2026-01-01') SELECT scenario, n, brier FROM (SELECT 'ALL_FORECASTS', COUNT(*), AVG(brier_score) FROM forecast_briers UNION ALL SELECT 'WITHOUT_HIGH_CONF', COUNT(*), AVG(brier_score) FROM forecast_briers WHERE gate_status = 'ALLOWED' UNION ALL SELECT 'ONLY_LOW_CONF', COUNT(*), AVG(brier_score) FROM forecast_briers WHERE gate_status = 'ALLOWED' AND ...) t",
      "result": [
        {"scenario": "ALL_FORECASTS", "n": 16817, "brier": 0.3148},
        {"scenario": "WITHOUT_HIGH_CONF", "n": 12572, "brier": 0.2949},
        {"scenario": "ONLY_LOW_CONF", "n": 4061, "brier": 0.2841}
      ],
      "finding": "Suppressing HIGH confidence improves Brier from 0.3148 to 0.2949. LOW confidence only achieves 0.2841.",
      "executed_at": "2026-01-12T01:52:00Z"
    },
    {
      "query_id": "Q6_feasibility_gap",
      "purpose": "Calculate gap to January targets",
      "sql": "WITH current_metrics AS (SELECT ROUND(AVG(fop.brier_score)::numeric, 4) as current_brier, ROUND(AVG(fop.hit_rate_contribution::int)::numeric, 4) as current_hit_rate, COUNT(*) as total_pairs FROM fhq_research.forecast_outcome_pairs fop WHERE fop.reconciled_at >= '2026-01-01') SELECT current_brier, 0.28 as target_brier, ROUND((current_brier - 0.28)::numeric, 4) as brier_gap, current_hit_rate, 0.50 as target_hit_rate, ROUND((0.50 - current_hit_rate)::numeric, 4) as hit_rate_gap FROM current_metrics",
      "result": [
        {"current_brier": 0.3148, "target_brier": 0.28, "brier_gap": 0.0348, "brier_reduction_needed_pct": 11.05, "current_hit_rate": 0.4135, "target_hit_rate": 0.50, "hit_rate_gap": 0.0865, "hit_rate_increase_needed_pct": 20.92}
      ],
      "finding": "Brier needs 11% reduction. Hit rate needs 21% improvement. Brier achievable via gating; hit rate requires model improvement.",
      "executed_at": "2026-01-12T01:54:00Z"
    },
    {
      "query_id": "Q7_sampling_risk",
      "purpose": "Assess risk of sampling artifact in calibration lock",
      "sql": "WITH daily_stats AS (SELECT DATE(fop.reconciled_at) as date, COUNT(*) as pairs, ROUND(AVG(fop.brier_score)::numeric, 4) as brier FROM fhq_research.forecast_outcome_pairs fop WHERE fop.reconciled_at >= '2026-01-01' GROUP BY DATE(fop.reconciled_at)) SELECT date, pairs, brier, CASE WHEN pairs < 100 THEN 'HIGH_VARIANCE_RISK' ELSE 'LOW_VARIANCE_RISK' END as sampling_risk FROM daily_stats",
      "result": [
        {"date": "2026-01-08", "pairs": 16782, "brier": 0.3146, "sampling_risk": "LOW_VARIANCE_RISK"},
        {"date": "2026-01-09", "pairs": 1, "brier": 0.9199, "sampling_risk": "HIGH_VARIANCE_RISK"},
        {"date": "2026-01-11", "pairs": 34, "brier": 0.3858, "sampling_risk": "HIGH_VARIANCE_RISK"}
      ],
      "finding": "Temporal clustering risk HIGH. 99.8% of data from single day.",
      "executed_at": "2026-01-12T01:56:00Z"
    },
    {
      "query_id": "Q8_confidence_interval",
      "purpose": "Calculate statistical confidence for Brier estimates",
      "sql": "WITH brier_stats AS (SELECT COUNT(*) as n, AVG(brier_score) as mean_brier, STDDEV(brier_score) as std_brier FROM fhq_research.forecast_outcome_pairs WHERE reconciled_at >= '2026-01-01') SELECT n, ROUND(mean_brier::numeric, 4) as mean_brier, ROUND((1.96 * std_brier / SQRT(n))::numeric, 4) as margin_of_error_95, CEILING(POWER(1.96 * std_brier / 0.01, 2))::int as n_for_moe_001 FROM brier_stats",
      "result": [
        {"n": 16817, "mean_brier": 0.3148, "margin_of_error_95": 0.0014, "ci_lower_95": 0.3134, "ci_upper_95": 0.3162, "n_for_moe_001": 315}
      ],
      "finding": "Current 95% CI: [0.3134, 0.3162]. Need ~315 samples per bin for MoE < 0.01.",
      "executed_at": "2026-01-12T01:58:00Z"
    },
    {
      "query_id": "Q9_pending_forecasts",
      "purpose": "Understand outcome maturation pipeline",
      "sql": "SELECT forecast_horizon_hours, COUNT(*) as pending_forecasts, MIN(forecast_valid_until) as earliest_maturation, MAX(forecast_valid_until) as latest_maturation FROM fhq_research.forecast_ledger WHERE is_resolved = false AND created_at >= '2026-01-09' GROUP BY forecast_horizon_hours",
      "result": [
        {"forecast_horizon_hours": 0, "pending_forecasts": 2, "earliest_maturation": "2026-01-12T00:56:51Z"},
        {"forecast_horizon_hours": 1, "pending_forecasts": 4, "earliest_maturation": "2026-01-12T01:03:36Z"},
        {"forecast_horizon_hours": 24, "pending_forecasts": 175, "earliest_maturation": "2026-01-12T00:58:27Z", "latest_maturation": "2026-01-12T23:39:35Z"},
        {"forecast_horizon_hours": 168, "pending_forecasts": 296, "earliest_maturation": "2026-01-16T21:25:13Z", "latest_maturation": "2026-01-18T23:39:35Z"}
      ],
      "finding": "175 D1 forecasts mature by Jan 13. 296 W1 forecasts mature Jan 16-18. Expect significant outcome pair creation in coming days.",
      "executed_at": "2026-01-12T02:00:00Z"
    }
  ],

  "metrics_summary": {
    "brier_score": {
      "current": 0.3148,
      "target_jan": 0.28,
      "gap": 0.0348,
      "achievable_via_gating": 0.2949,
      "ci_95": [0.3134, 0.3162]
    },
    "hit_rate": {
      "current": 0.4135,
      "target_jan_original": 0.50,
      "target_jan_revised": 0.45,
      "gap_to_revised": 0.0365
    },
    "calibration_status": {
      "low_band": {"confidence": 0.4574, "accuracy": 0.4974, "brier": 0.2841, "status": "UNDERCONFIDENT"},
      "med_band": {"confidence": 0.5797, "accuracy": 0.4441, "brier": 0.3001, "status": "OVERCONFIDENT"},
      "high_band": {"confidence": 0.8168, "accuracy": 0.2718, "brier": 0.3737, "status": "SEVERELY_OVERCONFIDENT"}
    },
    "sample_sizes": {
      "total_pairs": 16817,
      "pairs_since_jan_9": 35,
      "pending_d1": 175,
      "pending_w1": 296
    }
  },

  "confidence_intervals": {
    "brier_global": {
      "point_estimate": 0.3148,
      "ci_95_lower": 0.3134,
      "ci_95_upper": 0.3162,
      "margin_of_error": 0.0014
    },
    "minimum_sample_requirements": {
      "for_moe_001": 315,
      "for_moe_002": 79
    }
  },

  "attestation": {
    "attested_by": "STIG (EC-003_2026_PRODUCTION)",
    "attestation_timestamp": "2026-01-12T02:05:00Z",
    "data_source": "PostgreSQL fhq_* schemas",
    "verification_method": "Direct database queries via MCP"
  }
}
