{
  "document_id": "PREFLIGHT-208-ASSET-IDENTITY-LINEAGE",
  "document_type": "GOVERNANCE_SPECIFICATION",
  "classification": "GOVERNANCE-CRITICAL",
  "directive": "CEO-DIR-2026-001",
  "migration": "208_ceo_dir_2026_001_epistemic_separation.sql",
  "timestamp": "2026-01-06T21:00:00Z",
  "author": "STIG",

  "section_1_lineage_flow": {
    "description": "Asset identity flows from canonical asset registry through epistemic layer to execution",

    "flow_stages": [
      {
        "stage": 1,
        "source": "fhq_meta.assets",
        "column": "canonical_id",
        "description": "Canonical asset identifier (e.g., BTC-USD)"
      },
      {
        "stage": 2,
        "target": "fhq_perception.model_belief_state",
        "column": "asset_id",
        "description": "Model belief indexed by asset"
      },
      {
        "stage": 3,
        "target": "fhq_perception.sovereign_policy_state",
        "column": "asset_id",
        "description": "Policy decision indexed by asset, references belief"
      },
      {
        "stage": 4,
        "target": "fhq_governance.epistemic_suppression_ledger",
        "column": "asset_id",
        "description": "Suppression audit indexed by asset"
      },
      {
        "stage": 5,
        "target": "fhq_execution.orders (future)",
        "column": "asset_id",
        "description": "Execution orders will reference policy"
      }
    ]
  },

  "section_2_fk_constraint_chain": {
    "description": "Mandatory foreign key relationships enforce lineage integrity",

    "constraints": [
      {
        "constraint_name": "sovereign_policy_state_belief_id_fkey",
        "source_table": "fhq_perception.sovereign_policy_state",
        "source_column": "belief_id",
        "target_table": "fhq_perception.model_belief_state",
        "target_column": "belief_id",
        "enforcement": "MANDATORY - every policy MUST reference a belief",
        "migration_line": "87"
      },
      {
        "constraint_name": "epistemic_suppression_ledger_belief_id_fkey",
        "source_table": "fhq_governance.epistemic_suppression_ledger",
        "source_column": "belief_id",
        "target_table": "fhq_perception.model_belief_state",
        "target_column": "belief_id",
        "enforcement": "MANDATORY - every suppression MUST reference a belief",
        "migration_line": "144"
      },
      {
        "constraint_name": "epistemic_suppression_ledger_policy_id_fkey",
        "source_table": "fhq_governance.epistemic_suppression_ledger",
        "source_column": "policy_id",
        "target_table": "fhq_perception.sovereign_policy_state",
        "target_column": "policy_id",
        "enforcement": "MANDATORY - every suppression MUST reference a policy",
        "migration_line": "145"
      }
    ],

    "integrity_guarantee": "No orphan policies or suppressions - all trace back to a belief"
  },

  "section_3_hash_chain_integration": {
    "description": "Lineage hash provides ADR-011 compliant audit chain",

    "hash_columns": {
      "model_belief_state": {
        "column": "lineage_hash",
        "type": "TEXT NOT NULL",
        "migration_line": "61",
        "purpose": "Chain hash linking belief records"
      }
    },

    "existing_infrastructure": {
      "hash_chain_tables": [
        "fhq_governance.hash_chain_log",
        "fhq_meta.adr_registry.chain_hash"
      ],
      "integration_point": "lineage_hash can be verified against governance hash chain"
    }
  },

  "section_4_mermaid_diagram": {
    "format": "mermaid",
    "diagram": "graph TD\n    A[fhq_meta.assets] -->|canonical_id| B[model_belief_state]\n    B -->|belief_id| C[sovereign_policy_state]\n    B -->|belief_id| D[epistemic_suppression_ledger]\n    C -->|policy_id| D\n    C -->|policy_regime| E[Execution Layer]\n    D -->|lesson_extracted| F[Learning Loop]\n    B -->|v_canonical_belief| F\n    \n    subgraph fhq_perception\n        B\n        C\n    end\n    \n    subgraph fhq_governance\n        D\n    end\n    \n    style B fill:#90EE90\n    style C fill:#87CEEB\n    style D fill:#FFB6C1"
  },

  "attestation": {
    "author": "STIG",
    "role": "Chief Technology Officer",
    "timestamp": "2026-01-06T21:00:00Z",
    "status": "APPROVED"
  }
}
